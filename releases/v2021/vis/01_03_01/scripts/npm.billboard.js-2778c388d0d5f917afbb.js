(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{Entt:function(t,e,i){},K7VU:function(t,e,i){(function(e){var n;n=function(t,i,n,a,r,o,s,c,l,u,d,g,h){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){i(1),t.exports=i(15)},function(t,e,i){},function(e,i){e.exports=t},function(t,e){t.exports=i},function(t,e){t.exports=n},function(t,e){t.exports=a},function(t,e){t.exports=r},function(t,e){t.exports=o},function(t,e){t.exports=s},function(t,e){t.exports=c},function(t,e){t.exports=l},function(t,e){t.exports=u},function(t,e){t.exports=d},function(t,e){t.exports=g},function(t,e){t.exports=h},function(t,i,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){a=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return i}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,i){return e&&c(t.prototype,e),i&&c(t,i),t}n.r(i),n.d(i,"bb",function(){return Pt});var u=n(2),d=n(3),g=n(4),h=n(5),f=n(6),p={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridFocus:"bb-ygrid-focus",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",zoomRect:"bb-zoom-rect",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_",TextOverlapping:"text-overlapping"};function x(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t){"@babel/helpers - typeof";return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var m,_=n(7),y=(m=function(t){return void 0!==t&&t})(self)||m(window)||m(e)||m(globalThis)||Function("return this")(),b=y&&y.document,T=function(t){return t||0===t},A=function(t){return"function"==typeof t},w=function(t){return"string"==typeof t},k=function(t){return"number"==typeof t},S=function(t){return void 0===t},C=function(t){return void 0!==t},L=function(t){return"boolean"==typeof t},O=function(t){return 10*Math.ceil(t/10)},D=function(t){return Math.ceil(t)+.5},R=function(t){return t[1]-t[0]},X=function(t){return"object"===v(t)},M=function(t){return S(t)||null===t||w(t)&&0===t.length||X(t)&&!(t instanceof Date)&&0===Object.keys(t).length||k(t)&&isNaN(t)},I=function(t){return!M(t)},E=function(t){return t&&t.constructor===Array},z=function(t){return t&&!t.nodeType&&X(t)&&!E(t)},F=function(t,e,i){return C(t[e])?t[e]:i},P=function(t){for(var e=A(t),i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return e&&t.call.apply(t,n),e},B=function(t){return w(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},Y=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-1,1],n=!!(arguments.length>3&&void 0!==arguments[3])&&arguments[3];if(t&&w(e))if(-1===e.indexOf("\n"))t.text(e);else{var a=[t.text(),e].map(function(t){return t.replace(/[\s\n]/g,"")});if(a[0]!==a[1]){var r=e.split("\n"),o=n?r.length-1:1;t.html(""),r.forEach(function(e,n){t.append("tspan").attr("x",0).attr("dy","".concat(0===n?i[0]*o:i[1],"em")).text(e)})}}},j=function(t){var e=t.getBBox(),i=e.x,n=e.y,a=e.width,r=e.height;return[{x:i,y:n+r},{x:i,y:n},{x:i+a,y:n},{x:i+a,y:n+r}]},N=function(t){var e=null,i=d.event,n=t.context||t.main;return i&&"BrushEvent"===i.constructor.name?e=i.selection:n&&(e=n.select(".".concat(p.brush)).node())&&(e=Object(_.brushSelection)(e)),e},V=function(t){return t.rect||(t.rect=t.getBoundingClientRect())},G=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Math.random()+(t?"":0)},H=function(t){var e=N(t);return!e||e[0]===e[1]},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;for(var i in e)t[i]=e[i];return t},U=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Z=function(t){return[].slice.call(t)},$=function(t){var e=t?t.transform:null,i=e&&e.baseVal;return i&&i.numberOfItems?i.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}},q=function(t){var e=t[0]instanceof Date,i=(e?t.map(Number):t).filter(function(t,e,i){return i.indexOf(t)===e});return e?i.map(function(t){return new Date(t)}):i},J=function(t){return t&&t.length?t.reduce(function(t,e){return t.concat(e)}):[]},K=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(!i.length||1===i.length&&!i[0])return t;var a=i.shift();return z(t)&&z(a)&&Object.keys(a).forEach(function(e){var i=a[e];z(i)?(!t[e]&&(t[e]={}),t[e]=K(t[e],i)):t[e]=E(i)?i.concat():i}),K.apply(void 0,[t].concat(i))}),Q=function(t){var e,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t[0]instanceof Date?e=i?function(t,e){return t-e}:function(t,e){return e-t}:i&&!t.every(isNaN)?e=function(t,e){return t-e}:!i&&(e=function(t,e){return(t>e?-1:t<e&&1)||t===e&&0}),t.concat().sort(e)},tt=function(t,e){var i=e.filter(function(t){return I(t)});return i.length?k(i[0])?i=Math[t].apply(Math,x(i)):i[0]instanceof Date&&(i=Q(i,"min"===t)[0]):i=void 0,i},et=function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=[],a=0|Math.max(0,Math.ceil((e-t)/i)),r=t;r<a;r++)n.push(t+r*i);return n},it={mouse:function(){try{return new MouseEvent("t"),function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0};t.dispatchEvent(new MouseEvent(e,i))}}catch(t){return function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0},n=b.createEvent("MouseEvent");n.initMouseEvent(e,i.bubbles,i.cancelable,y,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}}(),touch:function(t,e,i){var n=new Touch(K({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},i));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[n],targetTouches:[],changedTouches:[n]}))}},nt=function(t,e){var i=t;for(var n in e)i=i.replace(new RegExp("{=".concat(n,"}"),"g"),e[n]);return i},at=function(){function t(e){a(this,t);var i=Object(f.scaleLinear)(),n=e.config,r=e.params;this.owner=e,this.config=n,this.scale=i,(n.noTransition||!r.config.transition_duration)&&(n.withoutTransition=!0),n.range=i.rangeExtent?i.rangeExtent():this.scaleExtent((r.orgXScale||i).range())}return l(t,[{key:"getTickTransformSetter",value:function(t){var e=this.config,i="x"===t?function(t){return"translate(".concat(t+e.tickOffset,",0)")}:function(t){return"translate(0,".concat(t,")")};return function(t,e){t.attr("transform",function(t){return i(Math.ceil(e(t)))})}}},{key:"scaleExtent",value:function(t){var e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]}},{key:"generateTicks",value:function(t,e){var i=this.owner.params.tickStepSize,n=[];if(e&&i)for(var a=s(t.domain(),2),r=a[0],o=a[1],c=r;c<=o;)n.push(c),c+=i;else if(t.ticks)n=t.ticks.apply(t,x(this.config.tickArguments||[])).map(function(t){return w(t)&&k(t)&&!isNaN(t)&&Math.round(10*t)/10||t});else{for(var l=t.domain(),u=Math.ceil(l[0]);u<l[1];u++)n.push(u);n.length>0&&n[0]>0&&n.unshift(n[0]-(n[1]-n[0]))}return n}},{key:"copyScale",value:function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t}},{key:"textFormatted",value:function(t){var e=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,n=e?e(i):i;return C(n)?n:""}},{key:"transitionise",value:function(t){var e=this.config;return e.withoutTransition?t.interrupt():t.transition(e.transition)}}],[{key:"getSizeFor1Char",value:function(t){var e={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){try{var i=t.node().getBBox(),n=i.width,a=i.height;n&&a&&(e.w=n,e.h=a)}catch(t){}finally{t.text("")}}),this.getSizeFor1Char=function(){return e},e}}]),t}(),rt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var i={innerTickSize:6,outerTickSize:e.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:e.noTransition};i.tickLength=Math.max(i.innerTickSize,0)+i.tickPadding,this.config=i,this.params=e,this.helper=new at(this)}return l(t,[{key:"create",value:function(t){var e=this,i=this.config,n=this.helper,a=this.params,r=n.scale,o=i.orient,s=this.splitTickText.bind(this),c=/^(left|right)$/.test(o),l=/^(top|bottom)$/.test(o),u=n.getTickTransformSetter(l?"x":"y"),g=u===n.axisX?"y":"x",h=/^(top|left)$/.test(o)?-1:1,f=a.tickTextRotate;this.config.range=r.rangeExtent?r.rangeExtent():n.scaleExtent((a.orgXScale||r).range());var p=i,x=p.innerTickSize,v=p.tickLength,m=p.range,_=a.name,y=_&&/^(x|y|y2)$/.test(_)?a.config["axis_".concat(_,"_tick_text_position")]:{x:0,y:0},b="subX"===_?"subchart_axis_x":"axis_".concat(_),T=a.config["".concat(b,"_show")],A=!!T&&a.config["".concat(b,"_tick_show")],w=!!T&&a.config["".concat(b,"_tick_text_show")],S=null;t.each(function(){var t=Object(d.select)(this),p=this.__chart__||r,_=n.copyScale();S=t,this.__chart__=_,i.tickOffset=a.isCategory?Math.ceil((_(1)-_(0))/2):0;var b=t.selectAll(".domain").data([0]);if(b.enter().append("path").attr("class","domain").merge(n.transitionise(b)).attr("d",function(){var t=i.outerTickSize*h;return l?"M".concat(m[0],",").concat(t,"V0H").concat(m[1],"V").concat(t):"M".concat(t,",").concat(m[0],"H0V").concat(m[1],"H").concat(t)}),A||w){var T=i.tickValues||n.generateTicks(_,c),C=t.selectAll(".tick").data(T,_),L=C.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),O=C.exit().remove();C=L.merge(C),A&&L.append("line"),w&&L.append("text");var D=at.getSizeFor1Char(C),R=[],X=C.select("text").selectAll("tspan").data(function(t,e){var i=a.tickMultiline?s(t,_,T,c,D.w):E(n.textFormatted(t))?n.textFormatted(t).concat():[n.textFormatted(t)];return R[e]=i.length,i.map(function(t){return{index:e,splitted:t}})});X.exit().remove(),(X=X.enter().append("tspan").merge(X).text(function(t){return t.splitted})).attr("x",l?0:v*h).attr("dx",function(){var t=0;return/(top|bottom)/.test(o)&&f&&(t=8*Math.sin(Math.PI*(f/180))*("top"===o?-1:1)),t+(y.x||0)}()).attr("dy",function(t,e){var i=0;return"top"!==o&&(i=D.h,0===e&&(i=c?-((R[t.index]-1)*(D.h/2)-3):0===y.y?".71em":0)),k(i)&&y.y?i+y.y:i||".71em"});var M=C.select("line"),I=C.select("text");if(L.select("line").attr("".concat(g,"2"),x*h),L.select("text").attr(g,v*h),e.setTickLineTextPosition(M,I),a.tickTitle){var z=I.select("title");(z.empty()?I.append("title"):z).text(function(t){return a.tickTitle[t]})}if(_.bandwidth){var F=_,P=F.bandwidth()/2;_=p=function(t){return F(t)+P}}else p.bandwidth?p=_:u(O,_);u(L,p),u(n.transitionise(C).style("opacity","1"),_)}}),this.g=S}},{key:"getTickXY",value:function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e}},{key:"getTickSize",value:function(t){var e=this.helper.scale,i=this.config,n=i.innerTickSize,a=i.range,r=e(t)+(i.tickCentered?0:i.tickOffset);return a[0]<r&&r<a[1]?n:0}},{key:"setTickLineTextPosition",value:function(t,e){var i=this.getTickXY(),n=this.config,a=n.innerTickSize,r=n.orient,o=n.tickLength,s=n.tickOffset,c=this.params.tickTextRotate,l=function(t){var e=["start","end"];return"top"===r&&e.reverse(),t?t>0?e[0]:e[1]:"middle"},u=function(t){return t?"rotate(".concat(t,")"):null},d=function(t){return t?11.5-2.5*(t/("bottom"===r?15:23))*(t>0?1:-1):o};"bottom"===r?(t.attr("x1",i.x).attr("x2",i.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",d(c)).style("text-anchor",l(c)).attr("transform",u(c))):"top"===r?(t.attr("x2",0).attr("y2",-a),e.attr("x",0).attr("y",2*-d(c)).style("text-anchor",l(c)).attr("transform",u(c))):"left"===r?(t.attr("x2",-a).attr("y1",i.y).attr("y2",i.y),e.attr("x",-o).attr("y",s).style("text-anchor","end")):"right"===r&&(t.attr("x2",a).attr("y2",0),e.attr("x",o).attr("y",0).style("text-anchor","start"))}},{key:"splitTickText",value:function(t,e,i,n,a){var r=this.params,o=this.helper.textFormatted(t),s=w(o)&&o.indexOf("\n")>-1?o.split("\n"):[];if(s.length)return s;if(E(o))return o;var c=r.tickWidth;return(!c||c<=0)&&(c=n?95:r.isCategory?Math.ceil(e(i[1])-e(i[0]))-12:110),function t(e,i){for(var n,r,o,s=1;s<i.length;s++)if(" "===i.charAt(s)&&(r=s),n=i.substr(0,s+1),o=a*n.length,c<o)return t(e.concat(i.substr(0,r||s)),i.slice(r?r+1:s));return e.concat(i)}(s,o+"")}},{key:"scale",value:function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale}},{key:"orient",value:function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient}},{key:"tickFormat",value:function(t){return arguments.length?(this.config.tickFormat=t,this):this.config.tickFormat}},{key:"tickCentered",value:function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered}},{key:"tickOffset",value:function(){return this.config.tickOffset}},{key:"tickInterval",value:function(t){var e;this.params.isCategory?e=2*this.config.tickOffset:e=(this.g.select("path.domain").node().getTotalLength()-2*this.config.outerTickSize)/(t||this.g.selectAll("line").size());return e===1/0?0:e}},{key:"ticks",value:function(){for(var t=this.config,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.length?(t.tickArguments=Z(i),this):t.tickArguments}},{key:"tickCulling",value:function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling}},{key:"tickValues",value:function(t){var e=this,i=this.config;if(A(t))i.tickValues=function(){return t(e.helper.scale.domain())};else{if(!arguments.length)return i.tickValues;i.tickValues=t}return this}},{key:"setTransition",value:function(t){return this.config.transition=t,this}}]),t}(),ot=function(t,e){var i=t.config.axis_rotated;return e?i:!i},st=function(t){return"".concat(p.axis," ").concat(p["axis".concat(U(t))])},ct=function(){function t(e){a(this,t),this.owner=e,this.setOrient()}return l(t,[{key:"init",value:function(){var t=this,e=this.owner,i=e.config,n=i.axis_rotated,a=e.main,r=["x","y"];i.axis_y2_show&&r.push("y2"),e.axesList={},r.forEach(function(r){var o=st(r),s=p["axis".concat(r.toUpperCase(),"Label")];e.axes[r]=a.append("g").attr("class",o).attr("clip-path",function(){var t=null;return"x"===r?t=e.clipPathForXAxis:"y"===r&&i.axis_y_inner&&(t=e.clipPathForYAxis),t}).attr("transform",e.getTranslate(r)).style("visibility",i["axis_".concat(r,"_show")]?"visible":"hidden"),e.axes[r].append("text").attr("class",s).attr("transform",["rotate(-90)",null]["x"===r?+!n:+n]).style("text-anchor",function(){return t.textAnchorForAxisLabel(r)}),t.generateAxes(r)})}},{key:"setOrient",value:function(){var t=this.owner,e=t.config,i=e.axis_rotated,n=e.axis_y_inner,a=e.axis_y2_inner;t.xOrient=i?"left":"bottom",t.yOrient=i?n?"top":"bottom":n?"right":"left",t.y2Orient=i?a?"bottom":"top":a?"left":"right",t.subXOrient=i?"left":"bottom"}},{key:"generateAxes",value:function(t){var e,i=this.owner,n=i.config,a=[],r=n["axis_".concat(t,"_axes")],o=n.axis_rotated;"x"===t?e=o?h.axisLeft:h.axisBottom:"y"===t?e=o?h.axisBottom:h.axisLeft:"y2"===t&&(e=o?h.axisTop:h.axisRight),r.length&&r.forEach(function(n){var r=n.tick||{},o=i[t].copy();n.domain&&o.domain(n.domain),a.push(e(o).ticks(r.count).tickFormat(r.format||function(t){return t}).tickValues(r.values).tickSizeOuter(!1===r.outer?0:6))}),i.axesList[t]=a}},{key:"updateAxes",value:function(){var t=this.owner,e=t.config;Object.keys(t.axesList).forEach(function(i){var n=e["axis_".concat(i,"_axes")],a=t[i].copy(),r=a.range();t.axesList[i].forEach(function(o,s){var c=o.scale().range();r.every(function(t,e){return t===c[e]})||o.scale().range(r);var l="".concat(st(i),"-").concat(s+1),u=t.main.select(".".concat(l.replace(/\s/,".")));u.empty()?u=t.main.append("g").attr("class",l).style("visibility",e["axis_".concat(i,"_show")]?"visible":"hidden").call(o):(n[s].domain&&a.domain(n[s].domain),t.xAxis.helper.transitionise(u).call(o.scale(a))),u.attr("transform",t.getTranslate(i,s+1))})})}},{key:"getAxis",value:function(t,e,i,n,a){var r=this.owner,o=r.config,s=/^(x|subX)$/.test(t),c=s?"x":t,l=s&&r.isCategorized(),u=r["".concat(t,"Orient")],d=s?r.xAxisTickFormat:o["axis_".concat(t,"_tick_format")],g=a?0:r.getAxisTickRotate(c),h=s?r.xAxisTickValues:r["".concat(t,"AxisTickValues")],f=K({outerTick:i,noTransition:n,config:o,name:t,tickTextRotate:g},s&&{isCategory:l,tickMultiline:o.axis_x_tick_multiline,tickWidth:o.axis_x_tick_width,tickTitle:l&&o.axis_x_tick_tooltip&&r.api.categories(),orgXScale:r.x});s||(f.tickStepSize=o["axis_".concat(c,"_tick_stepSize")]);var p=new rt(f).scale(s&&r.zoomScale||e).orient(u);s&&r.isTimeSeries()&&h&&!A(h)?h=h.map(function(t){return r.parseDate(t)}):!s&&r.isTimeSeriesY()&&(p.ticks(o.axis_y_tick_time_value),h=null),h&&p.tickValues(h),p.tickFormat(d||!s&&r.isStackNormalized()&&function(t){return"".concat(t,"%")}),l&&(p.tickCentered(o.axis_x_tick_centered),M(o.axis_x_tick_culling)&&(o.axis_x_tick_culling=!1));var x=o["axis_".concat(c,"_tick_count")];return x&&p.ticks(x),p}},{key:"updateXAxisTickValues",value:function(t,e){var i,n=this.owner,a=n.config,r=a.axis_x_tick_fit,o=a.axis_x_tick_count;return(r||o&&r)&&(i=n.mapTargetsToUniqueXs(t),n.isCategorized()&&o>i.length&&(o=i.length),i=this.generateTickValues(i,o,n.isTimeSeries())),e?e.tickValues(i):n.xAxis&&(n.xAxis.tickValues(i),n.subXAxis.tickValues(i)),i}},{key:"getId",value:function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"}},{key:"getXAxisTickFormat",value:function(){var t,e=this.owner,i=e.config.axis_x_tick_format,n=e.isTimeSeries(),a=e.isCategorized();return i?A(i)?t=i:n&&(t=function(t){return t?e.axisTimeFormat(i)(t):""}):t=n?e.defaultAxisTimeFormat:a?e.categoryName:function(t){return t<0?t.toFixed(0):t},A(t)?function(i){return t.apply(e,a?[i,e.categoryName(i)]:[i])}:t}},{key:"getTickValues",value:function(t){var e=this.owner,i=e.config["axis_".concat(t,"_tick_values")],n=e["".concat(t,"Axis")];return(A(i)?i():i)||(n?n.tickValues():void 0)}},{key:"getLabelOptionByAxisId",value:function(t){return this.owner.config["axis_".concat(t,"_label")]}},{key:"getLabelText",value:function(t){var e=this.getLabelOptionByAxisId(t);return w(e)?e:e?e.text:null}},{key:"setLabelText",value:function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);w(n)?i["axis_".concat(t,"_label")]=e:n&&(n.text=e)}},{key:"getLabelPosition",value:function(t,e){var i=this.owner.config.axis_rotated,n=this.getLabelOptionByAxisId(t),a=X(n)&&n.position?n.position:e[+!i],r=function(t){return!!~a.indexOf(t)};return{isInner:r("inner"),isOuter:r("outer"),isLeft:r("left"),isCenter:r("center"),isRight:r("right"),isTop:r("top"),isMiddle:r("middle"),isBottom:r("bottom")}}},{key:"getAxisLabelPosition",value:function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])}},{key:"getLabelPositionById",value:function(t){return this.getAxisLabelPosition(t)}},{key:"xForAxisLabel",value:function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isMiddle?-e.height/2:0;return ot(e,"x"!==t)?n=i.isLeft?0:i.isCenter?e.width/2:e.width:i.isBottom&&(n=-e.height),n}},{key:"dxForAxisLabel",value:function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isBottom?"0.5em":"0";return ot(e,"x"!==t)?n=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(n="-0.5em"),n}},{key:"textAnchorForAxisLabel",value:function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isMiddle?"middle":"end";return ot(e,"x"!==t)?n=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(n="start"),n}},{key:"dyForAxisLabel",value:function(t){var e,i=this.owner,n=i.config,a=n.axis_rotated,r=this.getAxisLabelPosition(t).isInner,o=n["axis_".concat(t,"_tick_rotate")]?i.getHorizontalAxisHeight(t):0,s=this.getMaxTickWidth(t);if("x"===t){var c=n.axis_x_height;e=a?r?"1.2em":-25-s:r?"-0.5em":c?c-10:o?o-10:"3em"}else e={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],e=a?r?e[0]:o?o*("y2"===t?-1:1)-e[1]:e[2]:r?e[3]:(e[4]+(n["axis_".concat(t,"_inner")]?0:s+e[4]))*("y"===t?-1:1);return e}},{key:"getMaxTickWidth",value:function(t,e){var i=this.owner,n=i.config,a=i.currentMaxTickWidths[t],r=0;if(e||!n["axis_".concat(t,"_show")]||0===i.filterTargetsToShow().length)return a.size;if(i.svg){var o=/^y2?$/.test(t),s=i.filterTargetsToShow(i.data.targets),c=i[t].copy().domain(i["get".concat(o?"Y":"X","Domain")](s,t)),l=c.domain();if(l[0]===l[1]&&l.every(function(t){return t>0})||E(a.domain)&&a.domain[0]===a.domain[1])return a.size;a.domain=l;var u=this.getAxis(t,c,!1,!1,!0),d=n["axis_".concat(t,"_tick_count")];!n["axis_".concat(t,"_tick_values")]&&d&&u.tickValues(this.generateTickValues(l,d,o?i.isTimeSeriesY():i.isTimeSeries())),o||this.updateXAxisTickValues(s,u);var g=i.selectChart.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");u.create(g),g.selectAll("text").each(function(e,n){var a=this.getBoundingClientRect().width;r=Math.max(r,a),"x"===t&&(i.currentMaxTickWidths.x.ticks[n]=a)}),g.remove()}return r>0&&(a.size=r),a.size}},{key:"getXAxisTickTextY2Overflow",value:function(t){var e=this.owner,i=e.config,n=e.getAxisTickRotate("x");if((e.isCategorized()||e.isTimeSeries())&&i.axis_x_tick_fit&&!i.axis_x_tick_culling&&!i.axis_x_tick_multiline&&n>0&&n<90){var a=e.currentWidth-e.getCurrentPaddingLeft(),r=this.getXAxisTickMaxOverflow(n,a-t),o=Math.max(0,r)+t;return Math.min(o,a/2)}return 0}},{key:"getXAxisTickMaxOverflow",value:function(t,e){for(var i=this.owner,n=i.config,a=i.isTimeSeries(),r=i.currentMaxTickWidths.x.ticks,o=r.length,s=this.x.padding,c=s.left,l=s.right,u=0,d=o-(a&&n.axis_x_tick_fit?.5:0),g=0;g<o;g++){var h=g+1,p=Math.cos(Math.PI*t/180)*r[g],x=h-(a?1:.5)+c;if(!(x<=0)){var v=(e-p)/x;u=Math.max(u,p-v/2-((d-h)*v+l*v))}}var m=0;if(!a){var _=Object(f.scaleLinear)().domain([-1*c,i.getXDomainMax(i.data.targets)+1+l]).range([0,e-u]);m=Math.ceil((_(1)-_(0))/2)}return u+m}},{key:"getXAxisPadding",value:function(t){var e=this.owner,i=e.config.axis_x_padding;if(M(i)?i={left:0,right:0}:(i.left=i.left||0,i.right=i.right||0),e.isTimeSeries()){var n=+e.getXDomainMin(e.data.targets),a=+e.getXDomainMax(e.data.targets)-n,r=a+i.left+i.right,o=a/t/r;i={left:i.left/r/o||0,right:i.right/r/o||0}}return i}},{key:"updateLabels",value:function(t){var e=this,i=this.owner,n={x:i.main.select(".".concat(p.axisX," .").concat(p.axisXLabel)),y:i.main.select(".".concat(p.axisY," .").concat(p.axisYLabel)),y2:i.main.select(".".concat(p.axisY2," .").concat(p.axisY2Label))};Object.keys(n).filter(function(t){return!n[t].empty()}).forEach(function(i){var a=n[i];(t?a.transition():a).attr("x",function(){return e.xForAxisLabel(i)}).attr("dx",function(){return e.dxForAxisLabel(i)}).attr("dy",function(){return e.dyForAxisLabel(i)}).text(function(){return e.getLabelText(i)})})}},{key:"getPadding",value:function(t,e,i,n){var a=k(t)?t:t[e];return T(a)?this.convertPixelsToAxisPadding(a,n):i}},{key:"convertPixelsToAxisPadding",value:function(t,e){var i=this.owner;return e*(t/(i.config.axis_rotated?i.width:i.height))}},{key:"generateTickValues",value:function(t,e,i){var n=t;if(e){var a=A(e)?e():e;if(1===a)n=[t[0]];else if(2===a)n=[t[0],t[t.length-1]];else if(a>2){var r,o=this.owner.isCategorized(),s=a-2,c=t[0],l=t[t.length-1];n=[c];for(var u=0;u<s;u++)r=+c+(l-c)/(s+1)*(u+1),n.push(i?new Date(r):o?Math.round(r):r);n.push(l)}}return i||(n=n.sort(function(t,e){return t-e})),n}},{key:"generateTransitions",value:function(t){var e=this.owner.axes,i=s(["x","y","y2","subx"].map(function(i){var n=e[i];return n&&t&&(n=n.transition().duration(t)),n}),4);return{axisX:i[0],axisY:i[1],axisY2:i[2],axisSubX:i[3]}}},{key:"redraw",value:function(t,e,i){var n=this.owner,a=e?"0":"1";["x","y","y2","subX"].forEach(function(e){var r=n["".concat(e,"Axis")];r&&(!i&&(r.config.withoutTransition=!n.config.transition_duration),n.axes[e.toLowerCase()].style("opacity",a),r.create(t["axis".concat(U(e))]))}),this.updateAxes()}},{key:"redrawAxis",value:function(t,e,i,n,a){var r,o=this,s=this.owner,c=s.config,l=!!s.zoomScale;!l&&s.isCategorized()&&0===t.length&&s.x.domain([0,s.axes.x.selectAll(".tick").size()]),s.x&&t.length?(!l&&s.updateXDomain(t,e.UpdateXDomain,e.UpdateOrgXDomain,e.TrimXDomain),!c.axis_x_tick_values&&this.updateXAxisTickValues(t)):s.xAxis&&(s.xAxis.tickValues([]),s.subXAxis.tickValues([])),c.zoom_rescale&&!n&&(r=s.x.orgDomain()),["y","y2"].forEach(function(e){var i=s[e];if(i){var n=c["axis_".concat(e,"_tick_values")],a=c["axis_".concat(e,"_tick_count")];if(i.domain(s.getYDomain(t,e,r)),!n&&a){var l=i.domain();s["".concat(e,"Axis")].tickValues(o.generateTickValues(l,l.every(function(t){return 0===t})?1:a,s.isTimeSeriesY()))}}}),this.redraw(i,s.hasArcType(),a),this.updateLabels(e.Transition),(e.UpdateXDomain||e.UpdateXAxis||e.Y)&&t.length&&this.setCulling(),e.Y&&(s.subY&&s.subY.domain(s.getYDomain(t,"y")),s.subY2&&s.subY2.domain(s.getYDomain(t,"y2")))}},{key:"setCulling",value:function(){var t=this.owner,e=t.config;["subx","x","y","y2"].forEach(function(i){var n=t.axes[i],a="subx"===i?"x":i,r=e["axis_".concat(a,"_tick_culling")];if(n&&r){var o,s=n.selectAll(".tick text"),c=Q(s.data()),l=c.length,u=e["axis_".concat(a,"_tick_culling_max")];if(l){for(var d=1;d<l;d++)if(l/d<u){o=d;break}s.each(function(t){this.style.display=c.indexOf(t)%o?"none":"block"})}else s.style("display","block");if("x"===i){var g=t.clipXAxisTickMaxWidth?t.clipPathForXAxisTickTexts:null;t.svg.selectAll(".".concat(p.axisX," .tick text")).attr("clip-path",g)}}})}}]),t}(),lt=function(){function t(e){a(this,t);var i=this;i.api=e,i.config=i.getOptions(),i.data={},i.cache={},i.axes={},i.rendered=!1}return l(t,[{key:"beforeInit",value:function(){this.callPluginHook("$beforeInit"),P(this.config.onbeforeinit,this,this.api)}},{key:"afterInit",value:function(){this.callPluginHook("$afterInit"),P(this.config.onafterinit,this,this.api)}},{key:"init",value:function(){var t=this,e=t.config;t.initParams();var i={element:e.bindto,classname:"bb"};z(e.bindto)&&(i.element=e.bindto.element||"#chart",i.classname=e.bindto.classname||i.classname),t.selectChart=A(i.element.node)?e.bindto.element:Object(d.select)(i.element||[]),t.selectChart.empty()&&(t.selectChart=Object(d.select)(b.body.appendChild(b.createElement("div")))),t.selectChart.html("").classed(i.classname,!0),t.initToRender()}},{key:"initToRender",value:function(t){var e=this,i=e.config,n=e.selectChart,a=function(){return"none"===n.style("display")||"hidden"===n.style("visibility")},r=i.render.lazy||a(),o=y.MutationObserver;if(r&&o&&!1!==i.render.observe&&!t&&new o(function(t,i){a()||(i.disconnect(),!e.rendered&&e.initToRender(!0))}).observe(n.node(),{attributes:!0,attributeFilter:["class","style"]}),!r||t){var s=e.convertData(i,e.initWithData);s&&e.initWithData(s),e.afterInit()}}},{key:"initParams",value:function(){var t=this,e=this,i=e.config,n=i.axis_rotated;e.datetimeId="bb-".concat(+new Date),e.initClip(),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.point=e.generatePoint(),e.extraLineClasses=e.generateExtraLineClass(),e.dataTimeFormat=i.data_xLocaltime?u.timeParse:u.utcParse,e.axisTimeFormat=i.axis_x_localtime?u.timeFormat:u.utcFormat;var a=e.config.zoom_enabled&&"drag"===e.config.zoom_enabled.type;e.defaultAxisTimeFormat=function(i){var n=a?t.zoomScale:t.zoomScale&&e.x.orgDomain().toString()!==t.zoomScale.domain().toString(),r=(i.getMilliseconds()?".%L":i.getSeconds()&&".:%S")||i.getMinutes()&&"%I:%M"||i.getHours()&&"%I %p"||1!==i.getDate()&&"%b %d"||n&&1===i.getDate()&&"%b'%y"||i.getMonth()&&"%-m/%-d"||"%Y";return e.axisTimeFormat(r)(i)},e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.isLegendRight="right"===i.legend_position,e.isLegendInset="inset"===i.legend_position,e.isLegendTop="top-left"===i.legend_inset_anchor||"top-right"===i.legend_inset_anchor,e.isLegendLeft="top-left"===i.legend_inset_anchor||"bottom-left"===i.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:{size:0,ticks:[],domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},e.rotated_padding_left=30,e.rotated_padding_right=n&&!i.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.inputType=e.convertInputType(),e.axes.subx=Object(d.selectAll)([])}},{key:"initWithData",value:function(t){var e=this,i=e.config;if(e.axis=new ct(e),i.zoom_enabled&&e.initZoom(),e.data.xs={},e.data.targets=e.convertDataToTargets(t),i.data_filter&&(e.data.targets=e.data.targets.filter(i.data_filter)),i.data_hide&&e.addHiddenTargetIds(!0===i.data_hide?e.mapToIds(e.data.targets):i.data_hide),i.legend_hide&&e.addHiddenLegendIds(!0===i.legend_hide?e.mapToIds(e.data.targets):i.legend_hide),e.updateSizes(),e.updateScales(!0),e.x&&(e.x.domain(Q(e.getXDomain(e.data.targets))),e.subX.domain(e.x.domain()),e.orgXDomain=e.x.domain()),e.y&&(e.y.domain(e.getYDomain(e.data.targets,"y")),e.subY.domain(e.y.domain())),e.y2&&(e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subY2&&e.subY2.domain(e.y2.domain())),e.svg=e.selectChart.append("svg").style("overflow","hidden").style("display","block"),i.interaction_enabled&&e.inputType){var n="touch"===e.inputType;e.svg.on(n?"touchstart":"mouseenter",function(){return P(i.onover,e,e.api)}).on(n?"touchend":"mouseleave",function(){return P(i.onout,e,e.api)})}i.svg_classname&&e.svg.attr("class",i.svg_classname),e.defs=e.svg.append("defs"),e.clipChart=e.appendClip(e.defs,e.clipId),e.clipXAxis=e.appendClip(e.defs,e.clipIdForXAxis),e.clipYAxis=e.appendClip(e.defs,e.clipIdForYAxis),e.clipGrid=e.appendClip(e.defs,e.clipIdForGrid),A(i.color_tiles)&&e.patterns&&e.patterns.forEach(function(t){return e.defs.append(function(){return t.node})}),e.updateSvgSize(),e.bindResize();var a=e.svg.append("g").attr("transform",e.getTranslate("main"));if(e.main=a,i.subchart_show&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),e.initTitle&&e.initTitle(),i.data_empty_label_text&&a.append("text").attr("class","".concat(p.text," ").concat(p.empty)).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initRegion(),i.clipPath||e.axis.init(),a.append("g").attr("class",p.chart).attr("clip-path",e.clipPath),e.callPluginHook("$init"),e.initEventRect(),e.initChartElements(),e.initGrid(),a.insert("rect",i.zoom_privileged?null:"g.".concat(p.regions)).attr("class",p.zoomRect).attr("width",e.width).attr("height",e.height).style("opacity","0").on("dblclick.zoom",null),i.clipPath&&e.axis.init(),e.updateTargets(e.data.targets),e.updateDimension(),P(i.oninit,e,e.api),e.setBackground(),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),i.data_onmin||i.data_onmax){var r=e.getMinMaxData();P(i.data_onmin,e,r.min),P(i.data_onmax,e,r.max)}e.api.element=e.selectChart.node(),e.rendered=!0}},{key:"initChartElements",value:function(){var t=this;["Bar","Radar","Line","Bubble","Arc","Gauge","Pie"].forEach(function(e){t["init".concat(e)]()}),I(t.config.data_labels)&&t.initText()}},{key:"setChartElements",value:function(){var t=this;t.api.$={chart:t.selectChart,svg:t.svg,defs:t.defs,main:t.main,tooltip:t.tooltip,legend:t.legend,title:t.title,grid:t.grid,arc:t.arcs,bar:{bars:t.mainBar},line:{lines:t.mainLine,areas:t.mainArea,circles:t.mainCircle},text:{texts:t.mainText}}}},{key:"setBackground",value:function(){var t=this.config.background;if(I(t)){var e=this.svg.select(".".concat(p[this.hasArcType()?"chart":"regions"])).insert(t.imgUrl?"image":"rect",":first-child");t.imgUrl?e.attr("href",t.imgUrl):t.color&&e.style("fill",t.color),e.attr("class",t.class||null).attr("width","100%").attr("height","100%")}}},{key:"smoothLines",value:function(t,e){"grid"===e&&t.each(function(){var t=Object(d.select)(this);["x1","x2","y1","y2"].forEach(function(e){return t.attr(e,Math.ceil(t.attr(e)))})})}},{key:"updateSizes",value:function(t){var e=this;t||e.setContainerSize();var i=e.config,n=i.axis_rotated,a=e.hasArcType(),r={width:e.legend?e.getLegendWidth():0,height:e.legend?e.getLegendHeight():0},o=e.isLegendRight||e.isLegendInset?0:r.height,s=n||a?0:e.getHorizontalAxisHeight("x"),c=i.subchart_axis_x_show&&i.subchart_axis_x_tick_text_show?s:30,l=i.subchart_show&&!a?i.subchart_size_height+c:0;e.margin=n?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:a?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+o+e.getCurrentPaddingBottom(),left:l+(a?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:a?0:e.getCurrentPaddingRight(),bottom:s+l+o+e.getCurrentPaddingBottom(),left:a?0:e.getCurrentPaddingLeft()},e.margin2=n?{top:e.margin.top,right:NaN,bottom:20+o,left:e.rotated_padding_left}:{top:e.currentHeight-l-o,right:NaN,bottom:c+o,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(r),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=n?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=n?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?r.width+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&!i.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&a&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded),!a&&i.axis_x_show&&i.axis_x_tick_autorotate&&e.updateXAxisTickClip()}},{key:"updateTargets",value:function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType(t)&&(e.hasType("radar")?e.updateTargetsForRadar(t):e.updateTargetsForArc(t)),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()}},{key:"showTargets",value:function(){var t=this;t.svg.selectAll(".".concat(p.target)).filter(function(e){return t.isTargetToShow(e.id)}).transition().duration(t.config.transition_duration).style("opacity","1")}},{key:"getWithOption",value:function(t){var e={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(e).forEach(function(i){var n=e[i];w(n)&&(n=e[n]),e[i]=F(t,"with".concat(i),n)}),e}},{key:"redraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,i=this,n=i.main,a=i.config,r=i.filterTargetsToShow(i.data.targets),o=t.initializing,s=t.flow,c=i.getWithOption(t),l=c.Transition?a.transition_duration:0,u=c.TransitionForExit?l:0,d=c.TransitionForAxis?l:0,g=e||i.axis.generateTransitions(d);i.updateSizes(o),c.Legend&&a.legend_show?i.updateLegend(i.mapToIds(i.data.targets),t,g):c.Dimension&&i.updateDimension(!0),i.axis.redrawAxis(r,c,g,s,o),i.updateCircleY(),a.data_empty_label_text&&n.select("text.".concat(p.text,".").concat(p.empty)).attr("x",i.width/2).attr("y",i.height/2).text(a.data_empty_label_text).style("display",r.length?"none":null),i.updateGrid(l),i.updateRegion(l),i.updateBar(u),i.updateLine(u),i.updateArea(u),i.updateCircle(),i.hasDataLabel()&&i.updateText(u),i.redrawTitle&&i.redrawTitle(),i.arcs&&i.redrawArc(l,u,c.Transform),i.radars&&i.redrawRadar(u),i.mainText&&n.selectAll(".".concat(p.selectedCircles)).filter(i.isBarType.bind(i)).selectAll("circle").remove(),a.interaction_enabled&&!s&&c.EventRect&&i.bindZoomEvent(),o&&i.setChartElements(),i.generateRedrawList(r,s,l,c.Subchart),i.callPluginHook("$redraw",t,l)}},{key:"generateRedrawList",value:function(t,e,i,n){var a=this,r=a.config,o=a.getDrawShape();r.subchart_show&&a.redrawSubchart(n,i,o);var s=e&&a.generateFlow({targets:t,flow:e,duration:e.duration,shape:o,xv:a.xv.bind(a)}),c=(i||s)&&a.isTabVisible(),l=a.getRedrawList(o,e,s,c),u=e||r.onrendered?function(){s&&s(),P(r.onrendered,a,a.api)}:null;if(u)if(c&&l.length){var d=a.generateWait();Object(g.transition)().duration(i).each(function(){l.reduce(function(t,e){return t.concat(e)},[]).forEach(function(t){return d.add(t)})}).call(d,u)}else a.transiting||u();a.mapToIds(a.data.targets).forEach(function(t){a.withoutFadeIn[t]=!0})}},{key:"getDrawShape",value:function(){var t=this,e=t.config.axis_rotated,i=t.hasType("radar"),n={type:{},indices:{}};if(t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")){var a=t.getShapeIndices(t.isLineType);if(n.indices.line=a,n.type.line=t.generateDrawLine?t.generateDrawLine(a,!1):void 0,t.hasTypeOf("Area")){var r=t.getShapeIndices(t.isAreaType);n.indices.area=r,n.type.area=t.generateDrawArea?t.generateDrawArea(r,!1):void 0}}if(t.hasType("bar")){var o=t.getShapeIndices(t.isBarType);n.indices.bar=o,n.type.bar=t.generateDrawBar?t.generateDrawBar(o):void 0}return n.pos={xForText:t.generateXYForText(n.indices,!0),yForText:t.generateXYForText(n.indices,!1),cx:(i?t.radarCircleX:e?t.circleY:t.circleX).bind(t),cy:(i?t.radarCircleY:e?t.circleX:t.circleY).bind(t)},n}},{key:"getRedrawList",value:function(t,e,i,n){var a=this,r=a.config,o=a.hasArcType(),s=t.pos,c=s.cx,l=s.cy,u=s.xForText,d=s.yForText,g=[];if(!o){var h=t.type,f=h.area,p=h.bar,x=h.line;(r.grid_x_lines.length||r.grid_y_lines.length)&&g.push(a.redrawGrid(n)),r.regions.length&&g.push(a.redrawRegion(n)),a.hasTypeOf("Line")&&(g.push(a.redrawLine(x,n)),a.hasTypeOf("Area")&&g.push(a.redrawArea(f,n))),a.hasType("bar")&&g.push(a.redrawBar(p,n)),e||g.push(a.updateGridFocus())}return(!o||a.hasType("radar"))&&(I(r.data_labels)&&g.push(a.redrawText(u,d,e,n)),g.push(a.redrawCircle(c,l,n,i))),g}},{key:"updateAndRedraw",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this,n=i.config;e.withTransition=F(e,"withTransition",!0),e.withTransform=F(e,"withTransform",!1),e.withLegend=F(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=F(e,"withTransitionForTransform",e.withTransition),e.withLegend&&n.legend_show||(t=i.axis.generateTransitions(e.withTransitionForAxis?n.transition_duration:0),i.updateScales(),i.updateSvgSize(),i.transformAll(e.withTransitionForTransform,t)),i.redraw(e,t)}},{key:"redrawWithoutRescale",value:function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}},{key:"isTimeSeries",value:function(){return"timeseries"===this.config.axis_x_type}},{key:"isCategorized",value:function(){return this.config.axis_x_type.indexOf("category")>=0||this.hasType("radar")}},{key:"isCustomX",value:function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||I(t.data_xs))}},{key:"isTimeSeriesY",value:function(){return"timeseries"===this.config.axis_y_type}},{key:"getTranslate",value:function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this,r=a.config.axis_rotated,o=a.hasType("gauge"),c=0;if(n&&/^(x|y2?)$/.test(t)&&(c=a.getAxisSize(t)*n),"main"===t)e=D(a.margin.left),i=D(a.margin.top);else if("context"===t)e=D(a.margin2.left),i=D(a.margin2.top);else if("legend"===t)e=a.margin3.left,i=a.margin3.top+(o?10:0);else if("x"===t)e=r?-c:0,i=r?0:a.height+c;else if("y"===t)e=r?0:-c,i=r?a.height+c:0;else if("y2"===t)e=r?0:a.width+c,i=r?1-c:0;else if("subx"===t)e=0,i=r?0:a.height2;else if("arc"===t)e=a.arcWidth/2,i=a.arcHeight/2;else if("radar"===t){var l=s(a.getRadarSize(),1)[0];e=a.width/2-l,i=D(a.margin.top)}return"translate(".concat(e,", ").concat(i,")")}},{key:"initialOpacity",value:function(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?"1":"0"}},{key:"initialOpacityForCircle",value:function(t){return null!==this.getBaseValue(t)&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):"0"}},{key:"opacityForCircle",value:function(t){var e=this.config.point_show?"1":"0";return T(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":e:"0"}},{key:"opacityForText",value:function(){return this.hasDataLabel()?"1":"0"}},{key:"xx",value:function(t){var e=this.config.zoom_enabled&&this.zoomScale?this.zoomScale:this.x;return t?e(T(t.x)?t.x:t):null}},{key:"xv",value:function(t){var e=this,i=e.getBaseValue(t);return e.isTimeSeries()?i=e.parseDate(i):e.isCategorized()&&w(i)&&(i=e.config.axis_x_categories.indexOf(i)),Math.ceil(e.x(i))}},{key:"yv",value:function(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(this.getBaseValue(t)))}},{key:"subxx",value:function(t){return t?this.subX(t.x):null}},{key:"transformMain",value:function(t,e){var i,n,a,r=this;e&&e.axisX?i=e.axisX:(i=r.main.select(".".concat(p.axisX)),t&&(i=i.transition())),e&&e.axisY?n=e.axisY:(n=r.main.select(".".concat(p.axisY)),t&&(n=n.transition())),e&&e.axisY2?a=e.axisY2:(a=r.main.select(".".concat(p.axisY2)),t&&(a=a.transition())),(t?r.main.transition():r.main).attr("transform",r.getTranslate("main")),i.attr("transform",r.getTranslate("x")),n.attr("transform",r.getTranslate("y")),a.attr("transform",r.getTranslate("y2")),r.main.select(".".concat(p.chartArcs)).attr("transform",r.getTranslate("arc"))}},{key:"transformAll",value:function(t,e){var i=this;i.transformMain(t,e),i.config.subchart_show&&i.transformContext(t,e),i.legend&&i.transformLegend(t)}},{key:"updateSvgSize",value:function(){var t=this,e=t.svg.select(".".concat(p.brush," .overlay")),i={width:0,height:0};e.size()&&(i.width=+e.attr("width"),i.height=+e.attr("height")),t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#".concat(t.clipId),"#".concat(t.clipIdForGrid)]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#".concat(t.clipIdForXAxis)).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForYAxis)).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#".concat(t.clipIdForSubchart)).select("rect").attr("width",t.width).attr("height",i.height),t.svg.select(".".concat(p.zoomRect)).attr("width",t.width).attr("height",t.height)}},{key:"updateDimension",value:function(t){var e=this;t||(e.xAxis&&e.config.axis_rotated?(e.xAxis.create(e.axes.x),e.subXAxis.create(e.axes.subx)):(e.yAxis&&e.yAxis.create(e.axes.y),e.y2Axis&&e.y2Axis.create(e.axes.y2))),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)}},{key:"bindResize",value:function(){var t=this,e=t.config,i=t.generateResize(),n=[];n.push(function(){return P(e.onresize,t,t.api)}),e.resize_auto&&n.push(function(){return t.api.flush(!1,!0)}),n.push(function(){return P(e.onresized,t,t.api)}),n.forEach(function(t){return i.add(t)}),y.addEventListener("resize",t.resizeFunction=i)}},{key:"generateResize",value:function(){function t(){t.timeout&&(y.clearTimeout(t.timeout),t.timeout=null),t.timeout=y.setTimeout(function(){e.forEach(function(t){return t()})},200)}var e=[];return t.add=function(t){return e.push(t)},t.remove=function(t){return e.splice(e.indexOf(t),1)},t}},{key:"endall",value:function(t,e){var i=0;t.each(function(){return++i}).on("end",function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];--i||e.apply.apply(e,[this].concat(n))})}},{key:"generateWait",value:function(){var t=[],e=function(e,i){var n;!function e(){for(var a,r=0,o=0;a=t[o];o++)if(!0===a||a.empty&&a.empty())r++;else try{a.transition()}catch(t){r++}n&&clearTimeout(n),r===t.length?i&&i():n=setTimeout(e,50)}()};return e.add=function(e){E(e)?t=t.concat(e):t.push(e)},e}},{key:"parseDate",value:function(t){var e;return t instanceof Date?e=t:w(t)?e=this.dataTimeFormat(this.config.data_xFormat)(t):k(t)&&!isNaN(t)&&(e=new Date(+t)),(!e||isNaN(+e))&&console&&console.error&&console.error("Failed to parse x '".concat(t,"' to Date object")),e}},{key:"isTabVisible",value:function(){return!b.hidden}},{key:"convertInputType",value:function(){var t=this.config,e=!1;if(/Mobi/.test(y.navigator.userAgent)&&t.interaction_inputType_touch){var i=y.navigator&&"maxTouchPoints"in y.navigator&&y.navigator.maxTouchPoints>0,n="ontouchmove"in y||y.DocumentTouch&&b instanceof y.DocumentTouch;e=i||n}return(t.interaction_inputType_mouse&&!e&&"onmouseover"in y?"mouse":e&&"touch")||null}},{key:"callPluginHook",value:function(t){for(var e=this,i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];this.config.plugins.forEach(function(i){"$beforeInit"===t&&(i.$$=e,e.api.plugins.push(i)),i[t].apply(i,n)})}}]),t}(),ut=function t(e){a(this,t);var i=new lt(this);this.plugins=[],this.internal=i,i.loadConfig(e),i.beforeInit(e),i.init(),function t(e,i,n){Object.keys(e).forEach(function(a){i[a]=e[a].bind(n),Object.keys(e[a]).length&&t(e[a],i[a],n)})}(t.prototype,this,this)};W(lt.prototype,{getOptions:function(){return new function t(){return a(this,t),{bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:void 0,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{},onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_labels_colors:void 0,data_labels_position:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_stack_normalize:!1,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onselected:function(){},data_onunselected:function(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_text_show:!0,subchart_onbrush:function(){},color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0,legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1,axis_rotated:!1,axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[],axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[],axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[],grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle",line_connectNull:!1,line_step_type:"step",line_zerobased:!1,line_classes:void 0,line_point:!0,scatter_zerobased:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bubble_maxR:35,bubble_zerobased:!1,area_zerobased:!0,area_above:!1,area_linearGradient:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0,plugins:[],gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0,spline_interpolation_type:"cardinal",radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return t%1==0?t:t.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1,render:{},regions:[],tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null,title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"}}},loadConfig:function(t){var e,i,n,a=this.config,r=function(){var t=i.shift();return t&&e&&X(e)&&t in e?(e=e[t],r()):t?void 0:e};Object.keys(a).forEach(function(o){e=t,i=o.split("_"),n=r(),C(n)&&(a[o]=n)})}}),W(lt.prototype,{getScale:function(t,e,i){return(i?Object(f.scaleTime)():Object(f.scaleLinear)()).range([t,e])},getX:function(t,e,i,n){var a=this.zoomScale||this.getScale(t,e,this.isTimeSeries());return this.getCustomizedScale(i?a.domain(i):a,n)},getY:function(t,e,i){var n=this.getScale(t,e,this.isTimeSeriesY());return i&&n.domain(i),n},getCustomizedScale:function(t,e){var i=this,n=e||function(){return i.xAxis.tickOffset()},a=function(e,i){var a=t(e)+n();return i?a:Math.ceil(a)};for(var r in t)a[r]=t[r];return a.orgDomain=function(){return t.domain()},a.orgScale=function(){return t},i.isCategorized()&&(a.domain=function(e){var i=e;return arguments.length?(t.domain(i),a):[(i=this.orgDomain())[0],i[1]+1]}),a},getYScale:function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},getSubYScale:function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},updateScales:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,n=i.config,a=n.axis_rotated;i.xMin=a?1:0,i.xMax=a?i.height:i.width,i.yMin=a?0:i.height,i.yMax=a?i.width:1,i.subXMin=i.xMin,i.subXMax=i.xMax,i.subYMin=a?0:i.height2,i.subYMax=a?i.width2:1;var r=e&&i.x&&i.x.orgDomain(),o=e&&i.orgXDomain;i.x=i.getX(i.xMin,i.xMax,r,function(){return i.xAxis.tickOffset()}),i.subX=i.getX(i.xMin,i.xMax,o,function(t){return t%1?0:i.subXAxis.tickOffset()}),i.xAxisTickFormat=i.axis.getXAxisTickFormat(),i.xAxisTickValues=i.axis.getTickValues("x"),i.xAxis=i.axis.getAxis("x",i.x,n.axis_x_tick_outer,t),i.subXAxis=i.axis.getAxis("subX",i.subX,n.axis_x_tick_outer,t),i.y=i.getY(i.yMin,i.yMax,i.y?i.y.domain():n.axis_y_default),i.subY=i.getY(i.subYMin,i.subYMax,i.subY?i.subY.domain():n.axis_y_default),i.yAxisTickValues=i.axis.getTickValues("y"),i.yAxis=i.axis.getAxis("y",i.y,n.axis_y_tick_outer,t),n.axis_y2_show&&(i.y2=i.getY(i.yMin,i.yMax,i.y2?i.y2.domain():n.axis_y2_default),i.subY2=i.getY(i.subYMin,i.subYMax,i.subY2?i.subY2.domain():n.axis_y2_default),i.y2AxisTickValues=i.axis.getTickValues("y2"),i.y2Axis=i.axis.getAxis("y2",i.y2,n.axis_y2_tick_outer,t)),i.updateArc&&i.updateArc()}}),W(lt.prototype,{getYDomainMinMax:function(t,e){var i=this,n=i.config,a="min"===e,r=n.data_groups,o=i.mapToIds(t),s=i.getValuesAsIdKeyed(t);return r.length>0&&function(){for(var e,n=i["has".concat(a?"Negative":"Positive","ValueInTargets")](t),c=function(t,r){if(0===(r=r.filter(function(t){return o.indexOf(t)>=0})).length)return e=r,"continue";var c=r[0],l=i.axis.getId(c);n&&s[c]&&(s[c]=s[c].map(function(t){return(a?t<0:t>0)?t:0}));for(var u,d=function(t,e){if(!s[e])return"continue";var r=i.axis.getId(e);s[e].forEach(function(t,e){var i=+t;r!==l||n&&(a?i>0:i<0)||(s[c][e]+=i)})},g=1;u=r[g];g++)d(0,u);e=r},l=0;e=r[l];l++)c(0,e)}(),tt(e,Object.keys(s).map(function(t){return tt(e,s[t])}))},getYDomainMin:function(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function(t){return this.getYDomainMinMax(t,"max")},isHiddenTargetWithYDomain:function(t){var e=this;return e.hiddenTargetIds.some(function(i){return e.axis.getId(i)===t})},getYDomain:function(t,e,i){var n=this,a=n.config,r="axis_".concat(e);if(n.isStackNormalized())return[0,100];var o=t.filter(function(t){return n.axis.getId(t.id)===e}),s=i?n.filterByXDomain(o,i):o;if(0===s.length)return n.isHiddenTargetWithYDomain(e)?n[e].domain():"y2"===e?n.y.domain():n.getYDomain(t,"y2",i);var c=a["".concat(r,"_min")],l=a["".concat(r,"_max")],u=n.getYDomainMin(s),d=n.getYDomainMax(s),g=a["".concat(r,"_center")],h=["area","bar","bubble","line","scatter"].some(function(t){return n.hasType(t,s)&&a["".concat(t,"_zerobased")]}),f=a["".concat(r,"_inverted")],p=n.hasDataLabel()&&a.axis_rotated,x=n.hasDataLabel()&&!a.axis_rotated;u=T(c)?c:T(l)?u<l?u:l-10:u,d=T(l)?l:T(c)?c<d?d:c+10:d,isNaN(u)&&(u=0),isNaN(d)&&(d=u),u===d&&(u<0?d=0:u=0);var v=u>=0&&d>=0,m=u<=0&&d<=0;(T(c)&&v||T(l)&&m)&&(h=!1),h&&(v&&(u=0),m&&(d=0));var _=Math.abs(d-u),y={top:.1*_,bottom:.1*_};if(C(g)){var b=Math.max(Math.abs(u),Math.abs(d));d=g+b,u=g-b}if(p){var A=R(n.y.range()),w=n.getDataLabelLength(u,d,"width").map(function(t){return t/A});["bottom","top"].forEach(function(t,e){y[t]+=_*(w[e]/(1-w[0]-w[1]))})}else if(x){var k=n.getDataLabelLength(u,d,"height");["bottom","top"].forEach(function(t,e){y[t]+=n.axis.convertPixelsToAxisPadding(k[e],_)})}var S=a["".concat(r,"_padding")];I(S)&&["bottom","top"].forEach(function(t){y[t]=n.axis.getPadding(S,t,y[t],_)}),h&&(v&&(y.bottom=u),m&&(y.top=-d));var L=[u-y.bottom,d+y.top];return f?L.reverse():L},getXDomainMinMax:function(t,e){var i=this.config["axis_x_".concat(e)],n=tt(e,t.map(function(t){return tt(e,t.values.map(function(t){return t.x}))})),a=z(i)?i.value:i;return a=C(a)&&this.isTimeSeries()?this.parseDate(a):a,z(i)&&i.fit&&("min"===e&&a<n||"max"===e&&a>n)&&(a=void 0),C(a)?a:n},getXDomainMin:function(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function(t){var e,i,n=this.config,a=t[1]-t[0],r=n.axis_x_padding;this.isCategorized()?i=0:this.hasType("bar")?i=(e=this.getMaxDataCount())>1?a/(e-1)/2:.5:i=.01*a;var o=i,s=i;return z(r)&&I(r)?(o=T(r.left)?r.left:i,s=T(r.right)?r.right:i):k(n.axis_x_padding)&&(o=r,s=r),{left:o,right:s}},getXDomain:function(t){var e=this,i=[e.getXDomainMin(t),e.getXDomainMax(t)],n=s(i,2),a=n[0],r=n[1],o=e.getXDomainPadding(i),c=0,l=0;return a-r!=0||e.isCategorized()||(e.isTimeSeries()?(a=new Date(.5*a.getTime()),r=new Date(1.5*r.getTime())):(a=0===a?1:.5*a,r=0===r?-1:1.5*r)),(a||0===a)&&(c=e.isTimeSeries()?new Date(a.getTime()-o.left):a-o.left),(r||0===r)&&(l=e.isTimeSeries()?new Date(r.getTime()+o.right):r+o.right),[c,l]},updateXDomain:function(t,e,i,n,a){var r=this,o=r.config.zoom_enabled;if(i&&(r.x.domain(a||Q(r.getXDomain(t))),r.orgXDomain=r.x.domain(),o&&r.zoom.updateScaleExtent(),r.subX.domain(r.x.domain()),r.brush&&r.brush.scale(r.subX)),e){var s=a||!r.brush||H(r)?r.orgXDomain:N(r).map(r.subX.invert);r.x.domain(s),o&&r.zoom.updateScaleExtent()}return n&&r.x.domain(r.trimXDomain(r.x.orgDomain())),r.x.domain()},trimXDomain:function(t){var e=s(this.getZoomDomain(),2),i=e[0],n=e[1];return t[0]<=i&&(t[1]=+t[1]+(i-t[0]),t[0]=i),n<=t[1]&&(t[0]=+t[0]-(t[1]-n),t[1]=n),t}}),W(lt.prototype,{isX:function(t){var e,i,n,a=this.config,r=a.data_x&&t===a.data_x,o=I(a.data_xs)&&(e=a.data_xs,i=t,n=!1,Object.keys(e).forEach(function(t){return e[t]===i&&(n=!0)}),n);return r||o},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){return this.config.data_stack_normalize&&this.isGrouped()},isGrouped:function(t){var e=this.config.data_groups;return t?e.some(function(e){return e.indexOf(t)>=0&&e.length>1}):e.length>0},getXKey:function(t){var e=this.config;return e.data_x?e.data_x:I(e.data_xs)?e.data_xs[t]:null},getXValuesOfXKey:function(t,e){var i,n=this;return(e&&I(e)?n.mapToIds(e):[]).forEach(function(e){n.getXKey(e)===t&&(i=n.data.xs[e])}),i},getIndexByX:function(t,e){return e?e.indexOf(w(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){return t in this.data.xs&&this.data.xs[t]&&T(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this;Object.keys(t).forEach(function(i){e.config.data_xs[i]=t[i]})},isMultipleX:function(){return I(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e;return t&&(e=this.config.data_names[t.id],t.name=void 0===e?t.id:e),t},getAllValuesOnIndex:function(t){var e=this;return e.filterTargetsToShow(e.data.targets).map(function(i){return e.addName(e.getValueOnIndex(i.values,t))})},getValueOnIndex:function(t,e){var i=t.filter(function(t){return t.index===e});return i.length?i[0]:null},updateTargetX:function(t,e){var i=this;t.forEach(function(t){t.values.forEach(function(n,a){n.x=i.generateTargetX(e[a],t.id,a)}),i.data.xs[t.id]=e})},updateTargetXs:function(t,e){var i=this;t.forEach(function(t){e[t.id]&&i.updateTargetX([t],e[t.id])})},generateTargetX:function(t,e,i){var n=this,a=n.isCategorized()?i:t||i;return n.isTimeSeries()?a=t?n.parseDate(t):n.parseDate(n.getXValue(e,i)):n.isCustomX()&&!n.isCategorized()&&(a=T(t)?+t:n.getXValue(e,i)),a},cloneTarget:function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},updateXs:function(t){t.length&&(this.xs=t.map(function(t){return t.x}))},getPrevX:function(t){var e=this.xs[t-1];return C(e)?e:null},getNextX:function(t){var e=this.xs[t+1];return C(e)?e:null},getBaseValue:function(t){var e=t.value;return e&&(this.isAreaRangeType(t)?e=this.getAreaRangeData(t,"mid"):this.isBubbleZType(t)&&(e=this.getBubbleZData(e,"y"))),e},getMinMaxValue:function(t){var e,i,n=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return t.values})).forEach(function(t,a){var r=t.map(n).filter(k);e=Math.min.apply(Math,[a?e:1/0].concat(x(r))),i=Math.max.apply(Math,[a?i:-1/0].concat(x(r)))}),{min:e,max:i}},getMinMaxData:function(){var t=this,e=t.getCache("$minMaxData");if(!e){var i=t.data.targets.map(function(t){return t.values}),n=t.getMinMaxValue(i),a=[],r=[];i.forEach(function(e){var i=t.getFilteredDataByValue(e,n.min),o=t.getFilteredDataByValue(e,n.max);i.length&&(a=a.concat(i)),o.length&&(r=r.concat(o))}),t.addCache("$minMaxData",e={min:a,max:r})}return e},getTotalPerIndex:function(){var t=this.getCache("$totalPerIndex");return this.isStackNormalized()&&!t&&(t=[],this.data.targets.forEach(function(e){e.values.forEach(function(e,i){t[i]||(t[i]=0),t[i]+=k(e.value)?e.value:0})})),t},getTotalDataSum:function(t){var e=this.getCache("$totalDataSum");if(!k(e)){var i=J(this.data.targets.map(function(t){return t.values})).map(function(t){return t.value}).reduce(function(t,e){return t+e});this.addCache("$totalDataSum",e=i)}return t&&(e-=this.getHiddenTotalDataSum()),e},getHiddenTotalDataSum:function(){var t=this.api,e=this.hiddenTargetIds,i=0;return e.length&&(i=t.data.values.bind(t)(e).reduce(function(t,e){return t+e})),i},getFilteredDataByValue:function(t,e){var i=this;return t.filter(function(t){return i.getBaseValue(t)===e})},getMaxDataCount:function(){return Math.max.apply(Math,x(this.data.targets.map(function(t){return t.values.length})))},getMaxDataCountTarget:function(){var t=this.filterTargetsToShow()||[],e=t.length;return e>1?(t=t.map(function(t){return t.values}).reduce(function(t,e){return t.concat(e)}).map(function(t){return t.x}),t=Q(q(t)).map(function(t,e){return{x:t,index:e}})):e&&(t=t[0].values),t},mapToIds:function(t){return t.map(function(t){return t.id})},mapToTargetIds:function(t){return t?E(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var i,n=this.mapToIds(t),a=0;i=n[a];a++)if(i===e)return!0;return!1},isTargetToShow:function(t){return this.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return(t||e.data.targets).filter(function(t){return e.isTargetToShow(t.id)})},mapTargetsToUniqueXs:function(t){var e=[];return t&&t.length&&(e=q(J(t.map(function(t){return t.values.map(function(t){return+t.x})}))),e=this.isTimeSeries()?e.map(function(t){return new Date(+t)}):e.map(function(t){return+t})),Q(e)},addHiddenTargetIds:function(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0})},addHiddenLegendIds:function(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})},getValuesAsIdKeyed:function(t){var e=this,i={},n=e.isMultipleX(),a=n?e.mapTargetsToUniqueXs(t).map(function(t){return w(t)?t:+t}):null;return t.forEach(function(t){var r=[];t.values.forEach(function(t){var i=t.value;E(i)?r.push.apply(r,x(i)):z(i)&&"high"in i?r.push.apply(r,x(Object.values(i))):e.isBubbleZType(t)?r.push(e.getBubbleZData(i,"y")):n?r[e.getIndexByX(t.x,a)]=i:r.push(i)}),i[t.id]=r}),i},checkValueInTargets:function(t,e){for(var i,n=Object.keys(t),a=0;a<n.length;a++){i=t[n[a]].values;for(var r=0;r<i.length;r++)if(e(i[r].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return t<0})},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return t>0})},_checkOrder:function(t){var e=this.config.data_order;return w(e)&&e.toLowerCase()===t},isOrderDesc:function(){return this._checkOrder("desc")},isOrderAsc:function(){return this._checkOrder("asc")},orderTargets:function(t){var e=this.config,i=x(t),n=this.isOrderAsc(),a=this.isOrderDesc();return n||a?i.sort(function(t,e){var i=function(t,e){return t+Math.abs(e.value)},a=t.values.reduce(i,0),r=e.values.reduce(i,0);return n?r-a:a-r}):A(e.data_order)&&i.sort(e.data_order),i},filterByX:function(t,e){return J(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},filterRemoveNull:function(t){var e=this;return t.filter(function(t){return T(e.getBaseValue(t))})},filterByXDomain:function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},hasDataLabel:function(){var t=this.config.data_labels;return L(t)&&t||X(t)&&I(t)},getDataLabelLength:function(t,e,i){var n=this,a=[0,0];return n.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return n.dataLabelFormat(t.id)(t)}).each(function(t,e){a[e]=1.3*this.getBoundingClientRect()[i]}).remove(),a},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var i,n=t[e].x,a=[];for(i=e-1;i>=0&&n===t[i].x;i--)a.push(t[i]);for(i=e;i<t.length&&n===t[i].x;i++)a.push(t[i]);return a},findClosestFromTargets:function(t,e){var i=this,n=t.map(function(t){return i.findClosest(t.values,e)});return i.findClosest(n,e)},findClosest:function(t,e){var i,n=this,a=t.filter(function(t){return t&&T(t.value)}),r=n.config.point_sensitivity;return a.filter(function(t){return n.isBarType(t.id)}).forEach(function(t){var e=n.main.select(".".concat(p.bars).concat(n.getTargetSelectorSuffix(t.id)," .").concat(p.bar,"-").concat(t.index)).node();!i&&n.isWithinBar(e)&&(i=t)}),a.filter(function(t){return!n.isBarType(t.id)}).forEach(function(t){var a=n.dist(t,e);a<r&&(r=a,i=t)}),i},dist:function(t,e){var i=this.config.axis_rotated,n=i?1:0,a=i?0:1,r=this.circleY(t,t.index),o=(this.zoomScale||this.x)(t.x);return Math.sqrt(Math.pow(o-e[n],2)+Math.pow(r-e[a],2))},convertValuesToStep:function(t){var e=this.config,i=e.axis_rotated,n=e.line_step_type,a=this.isCategorized(),r=E(t)?t.concat():[t];if(!i&&!a)return t;var o=r[0].id,s=r[0].x-1,c=r[0].value;return a&&r.unshift({x:s,value:c,id:o}),"step-after"===n&&r.unshift({x:s-1,value:c,id:o}),c=r[s=r.length-1].value,a&&r.push({x:s,value:c,id:o}),"step-before"===n&&r.push({x:s+1,value:c,id:o}),r},convertValuesToRange:function(t){var e=[];return(E(t)?t.concat():[t]).forEach(function(t){var i=t.x,n=t.id;e.push({x:i,id:n,value:t.value[0]}),e.push({x:i,id:n,value:t.value[2]})}),e},updateDataAttributes:function(t,e){var i=this.config["data_".concat(t)];return S(e)?i:(Object.keys(e).forEach(function(t){i[t]=e[t]}),this.redraw({withLegend:!0}),i)},getAreaRangeData:function(t,e){var i=t.value;if(E(i)){var n=["high","mid","low"].indexOf(e);return-1===n?null:i[n]}return i[e]},getRatio:function(t,e,i){var n=this,a=n.config,r=n.api,o=0;if(e&&r.data.shown.call(r).length)if(o=e.ratio||e.value,"arc"===t)o=n.pie.padAngle()()?e.value/n.getTotalDataSum(!0):(e.endAngle-e.startAngle)/(Math.PI*(n.hasType("gauge")&&!a.gauge_fullCircle?1:2));else if("index"===t){var s=r.data.values.bind(r),c=this.getTotalPerIndex();if(n.hiddenTargetIds.length){var l=s(n.hiddenTargetIds,!1);l.length&&(l=l.reduce(function(t,e){return t.map(function(t,i){return(k(t)?t:0)+e[i]})}),c=c.map(function(t,e){return t-l[e]}))}e.ratio=k(e.value)&&c&&c[e.index]>0?e.value/c[e.index]:0,o=e.ratio}else"radar"===t&&(o=parseFloat(Math.max(e.value,0))/n.maxValue*a.radar_size_ratio);return i&&o?100*o:o},updateDataIndexByX:function(t){var e=t.reduce(function(t,e,i){return t[+e.x]=i,t},{});this.data.targets.forEach(function(t){t.values.forEach(function(t,i){var n=e[+t.x];void 0===n&&(n=i),t.index=n})})}});var dt=n(8),gt=function(t,e){var i,n=t.rows(e);return 1===n.length?(i=[{}],n[0].forEach(function(t){i[0][t]=null})):i=t.parse(e),i};W(lt.prototype,{convertData:function(t,e){var i;if(t.bindto?(i={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(e){var n="data_".concat(e);n in t&&(i[e]=t[n])})):i=t,i.url&&e)this.convertUrlToData(i.url,i.mimeType,i.headers,i.keys,e);else if(i.json)i=this.convertJsonToData(i.json,i.keys);else if(i.rows)i=this.convertRowsToData(i.rows);else if(i.columns)i=this.convertColumnsToData(i.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.");return E(i)&&i},convertUrlToData:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,o=new XMLHttpRequest;o.open("GET",t),n&&Object.keys(n).forEach(function(t){o.setRequestHeader(t,n[t])}),o.onreadystatechange=function(){if(4===o.readyState){if(200!==o.status)throw new Error("".concat(t,": Something went wrong loading!"));var n=o.responseText;n&&r.call(e,e["convert".concat(U(i),"ToData")]("json"===i?JSON.parse(n):n,a))}},o.send()},convertCsvToData:function(t){return gt({rows:dt.csvParseRows,parse:dt.csvParse},t)},convertTsvToData:function(t){return gt({rows:dt.tsvParseRows,parse:dt.tsvParse},t)},convertJsonToData:function(t,e){var i,n,a=this,r=this.config,o=[];if(E(t)){var s=e||r.data_keys;s.x?(i=s.value.concat(s.x),r.data_x=s.x):i=s.value,o.push(i),t.forEach(function(t){var e=i.map(function(e){var i=a.findValueInJson(t,e);return S(i)&&(i=null),i});o.push(e)}),n=this.convertRowsToData(o)}else Object.keys(t).forEach(function(e){var i=t[e].concat();i.unshift(e),o.push(i)}),n=this.convertColumnsToData(o);return n},findValueInJson:function(t,e){if(void 0!==t[e])return t[e];var i=t;return e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".").some(function(t){return!(i=i&&t in i?i[t]:void 0)}),i},convertRowsToData:function(t){var e=t[0],i=[];return t.forEach(function(t,n){if(n>0){var a={};t.forEach(function(t,i){if(S(t))throw new Error("Source data is missing a component at (".concat(n,", ").concat(i,")!"));a[e[i]]=t}),i.push(a)}}),i},convertColumnsToData:function(t){var e=[];return t.forEach(function(t,i){var n=t[0];t.forEach(function(t,a){if(a>0){if(S(e[a-1])&&(e[a-1]={}),S(t))throw new Error("Source data is missing a component at (".concat(i,", ").concat(a,")!"));e[a-1][n]=t}})}),e},convertDataToTargets:function(t,e){var i,n=this,a=this,r=a.config,o=a.isTimeSeries(),s=Object.keys(t[0]||{}),c=s.length?s.filter(a.isNotX,a):[],l=s.length?s.filter(a.isX,a):[];c.forEach(function(s){var c=n.getXKey(s);n.isCustomX()||o?l.indexOf(c)>=0?i=(e&&a.data.xs[s]||[]).concat(t.map(function(t){return t[c]}).filter(T).map(function(t,e){return a.generateTargetX(t,s,e)})):r.data_x?i=n.getOtherTargetXs():I(r.data_xs)&&(i=a.getXValuesOfXKey(c,a.data.targets)):i=t.map(function(t,e){return e}),i&&(n.data.xs[s]=i)}),c.forEach(function(t){if(!n.data.xs[t])throw new Error('x is not defined for id = "'.concat(t,'".'))});var u=c.map(function(e,i){var n=r.data_idConverter(e),o=a.getXKey(e),s=a.isCustomX()&&a.isCategorized(),c=s&&t.map(function(t){return t.x}).every(function(t){return r.axis_x_categories.indexOf(t)>-1});return{id:n,id_org:e,values:t.map(function(t,l){var u,d=t[o],g=t[e];return g=null===g||isNaN(g)||z(g)?E(g)||z(g)?g:null:+g,s&&0===i&&!S(d)?(!c&&0===i&&0===l&&(r.axis_x_categories=[]),-1===(u=r.axis_x_categories.indexOf(d))&&(u=r.axis_x_categories.length,r.axis_x_categories.push(d))):u=a.generateTargetX(d,e,l),(S(g)||a.data.xs[e].length<=l)&&(u=void 0),{x:u,value:g,id:n}}).filter(function(t){return C(t.x)})}});return u.forEach(function(t){r.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),t.values.forEach(function(t,e){return t.index=e}),a.data.xs[t.id].sort(function(t,e){return t-e})}),a.hasNegativeValue=a.hasNegativeValueInTargets(u),a.hasPositiveValue=a.hasPositiveValueInTargets(u),r.data_type&&a.setTargetType(a.mapToIds(u).filter(function(t){return!(t in r.data_types)}),r.data_type),u.forEach(function(t){return a.addCache(t.id_org,t,!0)}),u}}),W(lt.prototype,{load:function(t,e){var i=this,n=t;n&&(e.filter&&(n=n.filter(e.filter)),(e.type||e.types)&&n.forEach(function(t){var n=e.types&&e.types[t.id]||e.type;i.setTargetType(t.id,n)}),i.data.targets.forEach(function(t){for(var e=0;e<n.length;e++)if(t.id===n[e].id){t.values=n[e].values,n.splice(e,1);break}}),i.data.targets=i.data.targets.concat(n)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},loadFromArgs:function(t){var e=this;if(e.config){e.resetCache();var i=t.data||e.convertData(t,function(i){return e.load(e.convertDataToTargets(i),t)});i&&e.load(e.convertDataToTargets(i),t)}},unload:function(t,e){var i=this,n=e,a=t;return i.resetCache(),n||(n=function(){}),(a=a.filter(function(t){return i.hasTarget(i.data.targets,t)}))&&0!==a.length?(i.svg.selectAll(a.map(function(t){return i.selectorTarget(t)})).transition().style("opacity","0").remove().call(i.endall,n),void a.forEach(function(t){i.withoutFadeIn[t]=!1,i.legend&&i.legend.selectAll(".".concat(p.legendItem).concat(i.getTargetSelectorSuffix(t))).remove(),i.data.targets=i.data.targets.filter(function(e){return e.id!==t})})):void n()}}),W(lt.prototype,{categoryName:function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t}});var ht=n(9);W(lt.prototype,{initEventRect:function(){this.main.select(".".concat(p.chart)).append("g").attr("class",p.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t,e=this,i=e.config,n=e.isMultipleX(),a=i.zoom_enabled,r=e.main.select(".".concat(p.eventRects)).style("cursor",a&&"drag"!==a.type?i.axis_rotated?"ns-resize":"ew-resize":null).classed(p.eventRectsMultiple,n).classed(p.eventRectsSingle,!n);if(r.selectAll(".".concat(p.eventRect)).remove(),e.eventRect=r.selectAll(".".concat(p.eventRect)),n)t=e.eventRect.data([0]),t=e.generateEventRectsForMultipleXs(t.enter()).merge(t);else{var o=e.getMaxDataCountTarget();e.updateDataIndexByX(o),e.updateXs(o),e.updatePointClass(!0),r.datum(o),e.eventRect=r.selectAll(".".concat(p.eventRect)),(t=e.eventRect.data(function(t){return t})).exit().remove(),t=e.generateEventRectsForSingleX(t.enter()).merge(t)}e.eventRect=t,e.updateEventRect(t),"touch"!==e.inputType||e.svg.on("touchstart.eventRect")||e.hasArcType()||e.bindTouchOnEventRect(n)},bindTouchOnEventRect:function(t){var e,i=this,n=i.config,a=function(){var t=d.event.changedTouches[0];return Object(d.select)(b.elementFromPoint(t.clientX,t.clientY))},r=function(e){if(t)i.selectRectForMultipleXs(e);else{var n=a(),r=function(t){var e=t&&t.attr("class")&&1*t.attr("class").replace(new RegExp("(".concat(p.eventRect,"-?|s)"),"g"),"");return(isNaN(e)||null===e)&&(e=-1),e}(n);i.callOverOutForTouch(r),-1===r?i.unselectRect():i.selectRectForSingle(e,n,r)}},o=n.interaction_inputType_touch.preventDefault,s=L(o)&&o||!1,c=!isNaN(o)&&o||null;i.svg.on("touchstart.eventRect touchmove.eventRect",function(){var t=a(),o=d.event;if(!t.empty()&&t.classed(p.eventRect)){if(i.dragging||i.flowing||i.hasArcType()||o.touches.length>1)return;(function(t){var i=t.type,a=t.changedTouches[0]["client".concat(n.axis_rotated?"Y":"X")];"touchstart"===i?s?t.preventDefault():null!==c&&(e=a):"touchmove"===i&&(s||!0===e||null!==c&&Math.abs(e-a)>=c)&&(e=!0,t.preventDefault())})(o),r(this)}else i.unselectRect(),i.callOverOutForTouch()},!0).on("touchend.eventRect",function(){var t=a();!t.empty()&&t.classed(p.eventRect)&&(i.hasArcType()||!i.toggleShape||i.cancelClick)&&i.cancelClick&&(i.cancelClick=!1)},!0)},updateEventRect:function(t){var e,i,n,a,r=this,o=r.config,s=r.zoomScale||r.x,c=t||r.eventRect.data(),l=o.axis_rotated;if(r.isMultipleX())e=0,i=0,n=r.width,a=r.height;else{var u,d;if(r.isCategorized())u=r.getEventRectWidth(),d=function(t){return s(t.x)-u/2};else{var g=function(t){var e=t.index;return{prev:r.getPrevX(e),next:r.getNextX(e)}};u=function(t){var e=g(t);return null===e.prev&&null===e.next?l?r.height:r.width:(null===e.prev&&(e.prev=s.domain()[0]),null===e.next&&(e.next=s.domain()[1]),Math.max(0,(s(e.next)-s(e.prev))/2))},d=function(t){var e=g(t),i=t.x;return null===e.prev&&null===e.next?0:(null===e.prev&&(e.prev=s.domain()[0]),(s(i)+s(e.prev))/2)}}e=l?0:d,i=l?d:0,n=l?r.width:u,a=l?u:r.height}c.attr("class",r.classEvent.bind(r)).attr("x",e).attr("y",i).attr("width",n).attr("height",a)},selectRectForSingle:function(t,e,i){var n=this,a=n.config,r=a.data_selection_enabled,o=a.data_selection_grouped,s=a.tooltip_grouped,c=n.getAllValuesOnIndex(i);s&&(n.showTooltip(c,t),n.showGridFocus(c),!r||o)||n.main.selectAll(".".concat(p.shape,"-").concat(i)).each(function(){Object(d.select)(this).classed(p.EXPANDED,!0),r&&e.style("cursor",o?"pointer":null),s||(n.hideGridFocus(),n.hideTooltip(),!o&&n.expandCirclesBars(i))}).filter(function(t){return n.isWithinShape(this,t)}).call(function(c){var l=c.data();r&&(o||a.data_selection_isselectable(l))&&e.style("cursor","pointer"),s||(n.showTooltip(l,t),n.showGridFocus(l),n.unexpandCircles(),c.each(function(t){return n.expandCirclesBars(i,t.id)}))})},expandCirclesBars:function(t,e,i){this.config.point_focus_expand_enabled&&this.expandCircles(t,e,i),this.expandBars(t,e,i)},selectRectForMultipleXs:function(t){var e=this,i=e.config,n=e.filterTargetsToShow(e.data.targets);if(!e.dragging&&!e.hasArcType(n)){var a=Object(d.mouse)(t),r=e.findClosestFromTargets(n,a);if(e.mouseover&&(!r||r.id!==e.mouseover.id)&&(i.data_onout.call(e.api,e.mouseover),e.mouseover=void 0),!r)return void e.unselectRect();var o=(e.isBubbleType(r)||e.isScatterType(r)||!i.tooltip_grouped?[r]:e.filterByX(n,r.x)).map(function(t){return e.addName(t)});e.showTooltip(o,t),e.expandCirclesBars(r.index,r.id,!0),e.showGridFocus(o),(e.isBarType(r.id)||e.dist(r,a)<i.point_sensitivity)&&(e.svg.select(".".concat(p.eventRect)).style("cursor","pointer"),!e.mouseover&&(i.data_onover.call(e.api,r),e.mouseover=r))}},unselectRect:function(){var t=this;t.svg.select(".".concat(p.eventRect)).style("cursor",null),t.hideGridFocus(),t.hideTooltip(),t._handleLinkedCharts(!1),t.unexpandCircles(),t.unexpandBars()},setOverOut:function(t,e){var i=this,n=i.config,a=z(e);if(a||-1!==e){var r=n[t?"data_onover":"data_onout"].bind(i.api);if(n.color_onover&&i.setOverColor(t,e,a),a)r(e,i.main.select(".".concat(p.arc).concat(i.getTargetSelectorSuffix(e.id))).node());else if(n.tooltip_grouped)t&&i.expandCirclesBars(e,null,!0),i.isMultipleX()||i.main.selectAll(".".concat(p.shape,"-").concat(e)).each(function(t){r(t,this)});else{var o=i.setOverOut,s=o.last||[],c=i.main.selectAll(".".concat(p.shape,"-").concat(e)).filter(function(t){return i.isWithinShape(this,t)});c.each(function(t){var e=this;(0===s.length||s.every(function(t){return t!==e}))&&(r(t,this),s.push(this))}),s.length>0&&c.empty()&&(r=n.data_onout.bind(i.api),s.forEach(function(t){return r(Object(d.select)(t).datum(),t)}),s=[]),o.last=s}}},callOverOutForTouch:function(t){var e=this.callOverOutForTouch,i=e.last;(z(t)&&i?t.id!==i.id:t!==i)&&((i||k(i))&&this.setOverOut(!1,i),(t||k(t))&&this.setOverOut(!0,t),e.last=t)},getDraggableSelection:function(){var t=this,e=t.config;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?Object(ht.drag)().on("drag",function(){t.drag(Object(d.mouse)(this))}).on("start",function(){t.dragstart(Object(d.mouse)(this))}).on("end",function(){t.dragend()}):function(){}},generateEventRectsForSingleX:function(t){var e=this,i=e.config,n=t.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",i.data_selection_enabled&&i.data_selection_grouped?"pointer":null).on("click",function(t){e.clickHandlerForSingleX.bind(this)(t,e)}).call(e.getDraggableSelection());return"mouse"===e.inputType&&n.on("mouseover",function(t){e.dragging||e.flowing||e.hasArcType()||e.config.tooltip_grouped&&e.setOverOut(!0,t.index)}).on("mousemove",function(t){if(!(e.dragging||e.flowing||e.hasArcType())){var i=t.index,n=e.svg.select(".".concat(p.eventRect,"-").concat(i));e.isStepType(t)&&"step-after"===e.config.line_step_type&&Object(d.mouse)(this)[0]<e.x(e.getXValue(t.id,i))&&(i-=1),-1===i?e.unselectRect():e.selectRectForSingle(this,n,i),e.config.tooltip_grouped||e.setOverOut(-1!==i,t.index)}}).on("mouseout",function(t){!e.config||e.hasArcType()||(e.unselectRect(),e.setOverOut(!1,t.index))}),n},clickHandlerForSingleX:function(t,e){var i=e,n=i.config;if(i.hasArcType()||!i.toggleShape||i.cancelClick)i.cancelClick&&(i.cancelClick=!1);else{var a=t.index;i.main.selectAll(".".concat(p.shape,"-").concat(a)).each(function(t){(n.data_selection_grouped||i.isWithinShape(this,t))&&(i.toggleShape(this,t,a),n.data_onclick.call(i.api,t,this))})}},generateEventRectsForMultipleXs:function(t){var e=this,i=t.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class",p.eventRect).on("click",function(){e.clickHandlerForMultipleXS.bind(this)(e)}).call(e.getDraggableSelection());return"mouse"===e.inputType&&i.on("mouseover mousemove",function(){e.selectRectForMultipleXs(this)}).on("mouseout",function(){!e.config||e.hasArcType()||e.unselectRect()}),i},clickHandlerForMultipleXS:function(t){var e=t,i=e.config,n=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(n)){var a=Object(d.mouse)(this),r=e.findClosestFromTargets(n,a);!r||(e.isBarType(r.id)||e.dist(r,a)<i.point_sensitivity)&&e.main.selectAll(".".concat(p.shapes).concat(e.getTargetSelectorSuffix(r.id))).selectAll(".".concat(p.shape,"-").concat(r.index)).each(function(){(i.data_selection_grouped||e.isWithinShape(this,r))&&(e.toggleShape(this,r,r.index),i.data_onclick.call(e.api,r,this))})}},dispatchEvent:function(t,e,i){var n=this.isMultipleX(),a=".".concat(n?p.eventRect:"".concat(p.eventRect,"-").concat(e)),r=this.main.select(a).node(),o=r.getBoundingClientRect(),s=o.width,c=o.left,l=o.top,u=c+(i?i[0]:0)+(n||this.config.axis_rotated?0:s/2),d=l+(i?i[1]:0);it[/^(mouse|click)/.test(t)?"mouse":"touch"](r,t,{screenX:u,screenY:d,clientX:u,clientY:d})}}),W(lt.prototype,{setContainerSize:function(){this.currentWidth=this.getCurrentWidth(),this.currentHeight=this.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this.config,e=t.size_height||this.getParentHeight();return e>0?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getAxisSize:function(t){var e=this.config.axis_rotated;return e&&"x"===t||!e&&/y2?/.test(t)?this.getAxisWidthByAxisId(t,!0):this.getHorizontalAxisHeight(t)},getCurrentPaddingTop:function(){var t=this,e=t.config,i=e.axis_y2_axes.length,n=T(e.padding_top)?e.padding_top:0;return t.title&&t.title.node()&&(n+=t.getTitlePadding()),i&&e.axis_rotated&&(n+=t.getHorizontalAxisHeight("y2")*i),n},getCurrentPaddingBottom:function(){var t=this.config,e=t.axis_rotated?"y":"x",i=t["axis_".concat(e,"_axes")].length;return(T(t.padding_bottom)?t.padding_bottom:0)+(i?this.getHorizontalAxisHeight(e)*i:0)},getCurrentPaddingLeft:function(t){var e=this.config,i=e.axis_rotated,n=i?"x":"y",a=e["axis_".concat(n,"_axes")].length,r=this.getAxisWidthByAxisId(n,t);return(T(e.padding_left)?e.padding_left:i?e.axis_x_show?Math.max(O(r),40):1:!e.axis_y_show||e.axis_y_inner?this.axis.getAxisLabelPosition("y").isOuter?30:1:O(r))+r*a},getCurrentPaddingRight:function(){var t=!!(arguments.length>0&&void 0!==arguments[0])&&arguments[0],e=this,i=e.config,n=e.isLegendRight?e.getLegendWidth()+20:0,a=i.axis_y2_axes.length,r=e.getAxisWidthByAxisId("y2"),o=t?0:e.axis.getXAxisTickTextY2Overflow(10);return(T(i.padding_right)?i.padding_right+1:i.axis_rotated?10+n:!i.axis_y2_show||i.axis_y2_inner?Math.max(2+n+(e.axis.getAxisLabelPosition("y2").isOuter?20:0),o):Math.max(O(r)+n,o))+r*a},getParentRectValue:function(t){for(var e,i="offset".concat(U(t)),n=this.selectChart.node();!e&&n&&"BODY"!==n.tagName;){try{e=n.getBoundingClientRect()[t]}catch(t){i in n&&(e=n[i])}n=n.parentNode}if("width"===t){var a=b.body.offsetWidth;e>a&&(e=a)}return e},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?parseInt(t,10):0},getSvgLeft:function(t){var e=this,i=e.config,n=i.axis_rotated||!i.axis_rotated&&!i.axis_y_inner,a=i.axis_rotated?p.axisX:p.axisY,r=e.main.select(".".concat(a)).node(),o=r&&n?r.getBoundingClientRect():{right:0},s=e.selectChart.node().getBoundingClientRect(),c=e.hasArcType(),l=o.right-s.left-(c?0:e.getCurrentPaddingLeft(t));return l>0?l:0},getAxisWidthByAxisId:function(t,e){var i=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(i.isInner?20:40)},getHorizontalAxisHeight:function(t){var e=this,i=e.config,n=i.axis_rotated,a=30;if("x"===t&&!i.axis_x_show)return 8;if("x"===t&&i.axis_x_height)return i.axis_x_height;if("y"===t&&!i.axis_y_show)return!i.legend_show||e.isLegendRight||e.isLegendInset?1:10;if("y2"===t&&!i.axis_y2_show)return e.rotated_padding_top;var r=e.getAxisTickRotate(t);return("x"===t&&!n||/y2?/.test(t)&&n)&&r&&(a=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-r)/180),!i.axis_x_tick_multiline&&e.currentHeight&&a>e.currentHeight/2&&(a=e.currentHeight/2)),a+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||n?0:-10)},getEventRectWidth:function(){return Math.max(0,this.xAxis.tickInterval())},getAxisTickRotate:function(t){var e=this,i=e.config,n=i["axis_".concat(t,"_tick_rotate")];if("x"===t){var a=e.isCategorized(),r=e.isTimeSeries(),o=a||r,s=0;i.axis_x_tick_fit&&o&&(e.axis.x={padding:{left:0,right:0},tickCount:0},(s=e.currentMaxTickWidths.x.ticks.length+(r?-1:1))!==e.axis.x.tickCount&&(e.axis.x.padding=e.axis.getXAxisPadding(s)),e.axis.x.tickCount=s),e.svg&&i.axis_x_tick_fit&&!i.axis_x_tick_multiline&&!i.axis_x_tick_culling&&i.axis_x_tick_autorotate&&o&&(n=e.needToRotateXAxisTickTexts()?i.axis_x_tick_rotate:0)}return n},needToRotateXAxisTickTexts:function(){var t=this,e=t.currentWidth-t.getCurrentPaddingLeft(!1)-t.getCurrentPaddingRight(!0),i=t.axis.x.tickCount+t.axis.x.padding.left+t.axis.x.padding.right;return t.axis.getMaxTickWidth("x")>(e/i||0)}});var ft=n(10);W(lt.prototype,{getShapeIndices:function(t){var e=this.config,i=e.data_xs,n=I(i),a={},r=n?{}:0;return n&&q(Object.keys(i).map(function(t){return i[t]})).forEach(function(t){r[t]=0,a[t]={}}),this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(var n,o=(t.id in i?i[t.id]:""),s=o?a[o]:a,c=0;n=e.data_groups[c];c++)if(!(n.indexOf(t.id)<0))for(var l,u=0;l=n[u];u++)if(l in s){s[t.id]=s[l];break}S(s[t.id])&&(s[t.id]=o?r[o]++:r++,s.__max__=(o?r[o]:r)-1)}),a},getIndices:function(t,e){var i=this.config.data_xs;return I(i)?t[i[e]]:t},getIndicesMax:function(t){return I(this.config.data_xs)?Object.keys(t).map(function(e){return t[e].__max__||0}).reduce(function(t,e){return t+e}):t.__max__},getShapeX:function(t,e,i){var n=this,a=i?n.subX:n.zoomScale||n.x,r=n.config.bar_padding,o=function(t,e){return t+e},s=X(t)&&t.total.length?t.total.reduce(o)/2:0;return function(i){var c=n.getIndices(e,i.id),l=i.id in c?c[i.id]:0,u=(c.__max__||0)+1,d=0;if(I(i.x)){var g=a(i.x);d=s?g-(t[i.id]||t.width)+t.total.slice(0,l+1).reduce(o)-s:g-(k(t)?t:t.width)*(u/2-l)}return t&&d&&u>1&&r&&(l&&(d+=r*l),u>2?d-=(u-1)*r/2:2===u&&(d-=r/2)),d}},getShapeY:function(t){var e=this,i=e.isStackNormalized();return function(n){var a=i?e.getRatio("index",n,!0):e.isBubbleZType(n)?e.getBubbleZData(n.value,"y"):n.value;return(t?e.getSubYScale(n.id):e.getYScale(n.id))(a)}},getShapeYMin:function(t){var e=s(this[this.axis.getId(t)].domain(),1)[0];return!this.isGrouped(t)&&e>0?e:0},getShapeOffsetData:function(t){var e=this,i=e.orderTargets(e.filterTargetsToShow(e.data.targets.filter(t,e))),n=e.isStackNormalized(),a=i.map(function(t){var i=t.values,a={};e.isStepType(t)&&(i=e.convertValuesToStep(i));var r=i.reduce(function(t,i){var r=+i.x;return t[r]=i,a[r]=n?e.getRatio("index",i,!0):i.value,t},{});return{id:t.id,rowValues:i,rowValueMapByXValue:r,values:a}});return{indexMapByTargetId:i.reduce(function(t,e,i){return t[e.id]=i,t},{}),shapeOffsetTargets:a}},getShapeOffset:function(t,e,i){var n=this,a=n.getShapeOffsetData(t),r=a.shapeOffsetTargets,o=a.indexMapByTargetId;return function(t,a){var s=n.getIndices(e,t.id),c=i?n.getSubYScale(t.id):n.getYScale(t.id),l=c(n.getShapeYMin(t.id)),u=+t.x,d=l;return r.filter(function(e){return e.id!==t.id}).forEach(function(e){if(s[e.id]===s[t.id]&&o[e.id]<o[t.id]){var i=e.rowValues[a];i&&+i.x===u||(i=e.rowValueMapByXValue[u]),i&&i.value*t.value>=0&&(d+=c(e.values[u])-l)}}),d}},isWithinShape:function(t,e){var i,n=this,a=Object(d.select)(t);return n.isTargetToShow(e.id)?n.hasValidPointType(t.nodeName)?i=n.isStepType(e)?n.isWithinStep(t,n.getYScale(e.id)(e.value)):n.isWithinCircle(t,n.isBubbleType(e)?1.5*n.pointSelectR(e):0):"path"===t.nodeName&&(i=!a.classed(p.bar)||n.isWithinBar(t)):i=!1,i},getInterpolate:function(t){var e=this.getInterpolateType(t);return{basis:ft.curveBasis,"basis-closed":ft.curveBasisClosed,"basis-open":ft.curveBasisOpen,bundle:ft.curveBundle,cardinal:ft.curveCardinal,"cardinal-closed":ft.curveCardinalClosed,"cardinal-open":ft.curveCardinalOpen,"catmull-rom":ft.curveCatmullRom,"catmull-rom-closed":ft.curveCatmullRomClosed,"catmull-rom-open":ft.curveCatmullRomOpen,"monotone-x":ft.curveMonotoneX,"monotone-y":ft.curveMonotoneY,natural:ft.curveNatural,"linear-closed":ft.curveLinearClosed,linear:ft.curveLinear,step:ft.curveStep,"step-after":ft.curveStepAfter,"step-before":ft.curveStepBefore}[e]},getInterpolateType:function(t){var e=this,i=e.config.spline_interpolation_type,n=e.isInterpolationType(i)?i:"cardinal";return e.isSplineType(t)?n:e.isStepType(t)?e.config.line_step_type:"linear"}});var pt=n(11);W(lt.prototype,{initPie:function(){var t=this,e=t.config,i=e.data_type,n=e.pie_padding,a=e["".concat(i,"_startingAngle")]||0,r=(t.hasType("pie")&&n?.01*n:e["".concat(i,"_padAngle")])||0;t.pie=Object(ft.pie)().startAngle(a).endAngle(a+2*Math.PI).padAngle(r).sortValues(t.isOrderAsc()||t.isOrderDesc()?function(e,i){return t.isOrderAsc()?e-i:i-e}:null).value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)})},updateRadius:function(){var t=this,e=t.config,i=e.pie_innerRadius,n=e.pie_padding,a=e.gauge_width||e.donut_width,r=t.filterTargetsToShow(t.data.targets).length*e.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasMultiArcGauge()?.85:1),t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=a?(t.radius-a)/t.radius:.6,t.gaugeArcWidth=a||(r<=t.radius-t.innerRadius?t.radius-t.innerRadius:r<=t.radius?r:t.radius);var o=i||(n?n*(t.innerRadiusRatio+.1):0);t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:o},getInnerRadius:function(t){var e=this.innerRadius;return!k(e)&&t&&(e=e[t.data.id]||0),e},updateArc:function(){this.svgArc=this.getSvgArc(),this.svgArcExpanded=this.getSvgArcExpanded()},updateAngle:function(t){var e=this,i=e.config,n=e.pie,a=t,r=!1;if(!i)return null;var o=Math.PI*(i.gauge_fullCircle?2:1),s=i.gauge_startingAngle;if(a.data&&e.isGaugeType(a.data)&&!e.hasMultiArcGauge()){var c=e.getTotalDataSum(e.rendered);c>i.gauge_max&&(i.gauge_max=c);var l=o*(c/(i.gauge_max-i.gauge_min));n=n.startAngle(s).endAngle(l+s)}if(n(e.filterTargetsToShow()).forEach(function(t,e){r||t.data.id!==a.data.id||(r=!0,(a=t).index=e)}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),a.data&&e.hasMultiArcGauge()){var u=e.getMinMaxData().max[0].value;u>i.gauge_max&&(i.gauge_max=u);var d=i.gauge_min,g=i.gauge_max,h=a.value<d?0:a.value<g?a.value-d:g-d;a.startAngle=s,a.endAngle=s+o/(g-d)*h}return r?a:null},getSvgArc:function(){var t=this,e=t.getInnerRadius(),i=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,n=t.hasMultiArcGauge(),a=Object(ft.arc)().outerRadius(function(e){return n?t.radius-i*e.index:t.radius}).innerRadius(function(a){return n?t.radius-i*(a.index+1):k(e)?e:0}),r=function(i,n){var r="M 0 0";if(i.value||i.data){k(e)||(a=a.innerRadius(t.getInnerRadius(i)));var o=!n&&t.updateAngle(i);n?r=a(i):o&&(r=a(o))}return r};return r.centroid=a.centroid,r},getSvgArcExpanded:function(t){var e=this,i=t||1,n=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,a=e.hasMultiArcGauge(),r=Math.min(e.radiusExpanded*i-e.radius,.8*n-100*(1-i)),o=Object(ft.arc)().outerRadius(function(t){return a?e.radius-n*t.index+r:e.radiusExpanded*i}).innerRadius(function(t){return a?e.radius-n*(t.index+1):e.innerRadius});return function(t){var i=e.updateAngle(t);return i?(a?o:o.innerRadius(e.getInnerRadius(t)))(i):"M 0 0"}},getArc:function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e=this,i=e.config,n=e.updateAngle(t),a="";if(n)if(e.hasMultiArcGauge()){var r=Math.sin(n.endAngle-Math.PI/2),o=Math.cos(n.endAngle-Math.PI/2)*(e.radiusExpanded+25),s=r*(e.radiusExpanded+15-Math.abs(10*r))+3;a="translate(".concat(o,",").concat(s,")")}else if(!e.hasType("gauge")||e.data.targets.length>1){var c=this.svgArc.centroid(n),l=(o=isNaN(c[0])?0:c[0],s=isNaN(c[1])?0:c[1],Math.sqrt(o*o+s*s)),u=e.hasType("donut")&&i.donut_label_ratio||e.hasType("pie")&&i.pie_label_ratio;u=u?A(u)?u(t,e.radius,l):u:e.radius&&(l?(36/e.radius>.375?1.175-36/e.radius:.8)*e.radius/l:0),a="translate(".concat(o*u,",").concat(s*u,")")}return a},convertToArcData:function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){var e=this,i=e.hasType("gauge");e.shouldShowArcLabel()&&t.each(function(t){var n=Object(d.select)(this),a=e.updateAngle(t),r=e.getRatio("arc",a);if(i||e.meetsArcLabelThreshold(r)){var o=(a||t).value,s=(e.getArcLabelFormat()||e.defaultArcValueFormat)(o,r,t.data.id).toString();Y(n,s,[-1,1],i)}else n.text("")})},textForGaugeMinMax:function(t,e){var i=this.getGaugeLabelExtents();return i?i(t,e):t},expandArc:function(t){var e=this;if(e.transiting)var i=setInterval(function(){e.transiting||(clearInterval(i),e.legend.selectAll(".".concat(p.legendItemFocused)).size()>0&&e.expandArc(t))},10);else{var n=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(n,".".concat(p.chartArc))).each(function(t){if(e.shouldExpand(t.data.id)){var i=e.getExpandConfig(t.data.id,"duration"),n=e.getSvgArcExpanded(e.getExpandConfig(t.data.id,"rate"));Object(d.select)(this).selectAll("path").transition().duration(i).attr("d",e.svgArcExpanded).transition().duration(2*i).attr("d",n)}})}},unexpandArc:function(t){var e=this;if(!e.transiting){var i=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(i,".".concat(p.chartArc))).selectAll("path").transition().duration(function(t){return e.getExpandConfig(t.data.id,"duration")}).attr("d",e.svgArc),e.svg.selectAll("".concat(p.arc)).style("opacity","1")}},getExpandConfig:function(t,e){var i,n=this.config;return this.isDonutType(t)?i="donut":this.isGaugeType(t)?i="gauge":this.isPieType(t)&&(i="pie"),i?n["".concat(i,"_expand_").concat(e)]:{duration:50,rate:.98}[e]},shouldExpand:function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},shouldShowArcLabel:function(){var t=this,e=t.config;return["pie","donut","gauge"].some(function(i){return t.hasType(i)&&e["".concat(i,"_label_show")]})},meetsArcLabelThreshold:function(t){var e=this.config;return t>=(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)},getArcLabelFormat:function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},getGaugeLabelExtents:function(){return this.config.gauge_label_extents},getArcTitle:function(){var t=this.hasType("donut")?"donut":this.hasType("gauge")&&"gauge";return t?this.config["".concat(t,"_title")]:""},updateTargetsForArc:function(t){var e=this,i=e.main,n=e.hasType("gauge"),a=e.classChartArc.bind(e),r=e.classArcs.bind(e),o=e.classFocus.bind(e),s=i.select(".".concat(p.chartArcs)).selectAll(".".concat(p.chartArc)).data(e.pie(t)).attr("class",function(t){return a(t)+o(t.data)}),c=s.enter().append("g").attr("class",a);c.append("g").attr("class",r).merge(s),c.append("text").attr("dy",n&&!e.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none")},initArc:function(){this.arcs=this.main.select(".".concat(p.chart)).append("g").attr("class",p.chartArcs).attr("transform",this.getTranslate("arc")),this.setArcTitle()},setArcTitle:function(){var t=this.getArcTitle(),e=this.hasType("gauge");if(t){var i=this.arcs.append("text").attr("class",p[e?"chartArcsGaugeTitle":"chartArcsTitle"]).style("text-anchor","middle");e&&i.attr("dy","-0.3em").style("font-size","27px"),Y(i,t,e?void 0:[-.6,1.35],!0)}},redrawArc:function(t,e,i){var n=this,a=n.config,r=n.main,o=a.interaction_enabled,s=r.selectAll(".".concat(p.arcs)).selectAll(".".concat(p.arc)).data(n.arcData.bind(n));s.exit().transition().duration(e).style("opacity","0").remove(),s=s.enter().append("path").attr("class",n.classArc.bind(n)).style("fill",function(t){return n.color(t.data)}).style("cursor",function(t){return o&&a.data_selection_isselectable(t)?"pointer":null}).style("opacity","0").each(function(t){n.isGaugeType(t.data)&&(t.startAngle=a.gauge_startingAngle,t.endAngle=a.gauge_startingAngle),this._current=t}).merge(s),n.hasMultiArcGauge()&&n.redrawMultiArcGauge(),s.attr("transform",function(t){return!n.isGaugeType(t.data)&&i?"scale(0)":""}).style("opacity",function(t){return t===this._current?"0":"1"}).each(function(){n.transiting=!0}).transition().duration(t).attrTween("d",function(t){var e=n.updateAngle(t);if(!e)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var i=Object(pt.interpolate)(this._current,e);return this._current=i(0),function(e){var a=i(e);return a.data=t.data,n.getArc(a,!0)}}).attr("transform",i?"scale(1)":"").style("fill",function(t){var e;return n.levelColor?(e=n.levelColor(t.data.values[0].value),a.data_colors[t.data.id]=e):e=n.color(t.data.id),e}).style("opacity","1").call(n.endall,function(){if(n.levelColor){var t=Object(d.select)(this),e=t.datum();n.updateLegendItemColor(e.data.id,t.style("fill"))}n.transiting=!1,P(a.onrendered,n,n.api)}),o&&n.bindArcEvent(s),n.redrawArcText(t)},redrawMultiArcGauge:function(){var t=this,e=t.config,i=t.main.selectAll(".".concat(p.arcs)).selectAll(".".concat(p.arcLabelLine)).data(t.arcData.bind(t));i.enter().append("rect").attr("class",function(t){return"".concat(p.arcLabelLine," ").concat(p.target," ").concat(p.target,"-").concat(t.data.id)}).merge(i).style("fill",function(e){return t.levelColor?t.levelColor(e.data.values[0].value):t.color(e.data)}).style("display",e.gauge_label_show?"":"none").each(function(e){var i=0,n=0,a=0,r="";if(t.hiddenTargetIds.indexOf(e.data.id)<0){var o=t.updateAngle(e),s=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length*(o.index+1),c=o.endAngle-Math.PI/2,l=t.radius-s,u=c-(0===l?0:1/l);i=t.radiusExpanded-t.radius+s,n=Math.cos(u)*l,a=Math.sin(u)*l,r="rotate(".concat(180*c/Math.PI,", ").concat(n,", ").concat(a,")")}Object(d.select)(this).attr("x",n).attr("y",a).attr("width",i).attr("height",2).attr("transform",r).style("stroke-dasharray","0, ".concat(i+2,", 0"))})},bindArcEvent:function(t){function e(t,e,i){n.expandArc(i),n.api.focus(i),n.toggleFocusLegend(i,!0),n.showTooltip([e],t)}function i(t){var e=t&&t.id||void 0;n.unexpandArc(e),n.api.revert(),n.revertLegend(),n.hideTooltip()}var n=this,a="touch"===n.inputType,r="mouse"===n.inputType;if(t.on("click",function(t,e){var i,a=n.updateAngle(t);a&&(i=n.convertToArcData(a),n.toggleShape&&n.toggleShape(this,i,e),n.config.data_onclick.call(n.api,i,this))}),r&&t.on("mouseover",function(t){if(!n.transiting){var i=n.updateAngle(t),a=i?n.convertToArcData(i):null;e(this,a,a&&a.id||void 0),n.setOverOut(!0,a)}}).on("mouseout",function(t){if(!n.transiting){var e=n.updateAngle(t),a=e?n.convertToArcData(e):null;i(),n.setOverOut(!1,a)}}).on("mousemove",function(t){var e=n.updateAngle(t),i=e?n.convertToArcData(e):null;n.showTooltip([i],this)}),a&&n.hasArcType()&&!n.radars){var o=function(){if(!n.transiting){var t=(s=d.event.changedTouches[0],Object(d.select)(b.elementFromPoint(s.clientX,s.clientY))).datum(),a=t&&t.data&&t.data.id?n.updateAngle(t):null,r=a?n.convertToArcData(a):null,o=r&&r.id||void 0;n.callOverOutForTouch(r),S(o)?i():e(this,r,o)}var s};n.svg.on("touchstart",o).on("touchmove",o)}},redrawArcText:function(t){var e,i=this,n=i.config,a=i.main,r=i.hasType("gauge"),o=i.hasMultiArcGauge();if(r&&1===i.data.targets.length&&n.gauge_title||(e=a.selectAll(".".concat(p.chartArc)).select("text").style("opacity","0").attr("class",function(t){return i.isGaugeType(t.data)?p.gaugeValue:null}).call(i.textForArcLabel.bind(i)).attr("transform",i.transformForArcLabel.bind(i)).style("font-size",function(t){return i.isGaugeType(t.data)&&1===i.data.targets.length&&!o?"".concat(Math.round(i.radius/5),"px"):null}).transition().duration(t).style("opacity",function(t){return i.isTargetToShow(t.data.id)&&i.isArcType(t.data)?"1":"0"}),o&&e.attr("dy","-.1em")),a.select(".".concat(p.chartArcsTitle)).style("opacity",i.hasType("donut")||r?"1":"0"),r){var s=n.gauge_fullCircle,c=-1*Math.PI/2,l=(s?-4:-1)*c;s&&e&&e.attr("dy","".concat(Math.round(i.radius/14)));var u=i.arcs.select("".concat(o?"g":"",".").concat(p.chartArcsBackground));if(o){var d=0;(u=u.selectAll("path.".concat(p.chartArcsBackground)).data(i.data.targets)).enter().append("path").attr("class",function(t,e){return"".concat(p.chartArcsBackground," ").concat(p.chartArcsBackground,"-").concat(e)}).merge(u).attr("d",function(t){if(i.hiddenTargetIds.indexOf(t.id)>=0)return"M 0 0";var e={data:[{value:n.gauge_max}],startAngle:c,endAngle:l,index:d++};return i.getArc(e,!0,!0)}),u.exit().remove()}else u.attr("d",function(){var t={data:[{value:n.gauge_max}],startAngle:c,endAngle:l};return i.getArc(t,!0,!0)});i.arcs.select(".".concat(p.chartArcsGaugeUnit)).attr("dy",".75em").text(n.gauge_label_show?n.gauge_units:""),n.gauge_label_show&&(i.arcs.select(".".concat(p.chartArcsGaugeMin)).attr("dx","".concat(-1*(i.innerRadius+(i.radius-i.innerRadius)/(s?1:2)),"px")).attr("dy","1.2em").text(i.textForGaugeMinMax(n.gauge_min,!1)),!s&&i.arcs.select(".".concat(p.chartArcsGaugeMax)).attr("dx","".concat(i.innerRadius+(i.radius-i.innerRadius)/2,"px")).attr("dy","1.2em").text(i.textForGaugeMinMax(n.gauge_max,!0)))}},initGauge:function(){var t=this.config,e=this.arcs,i=function(t){e.append("text").attr("class",t).style("text-anchor","middle").style("pointer-events","none")};this.hasType("gauge")&&(e.append(this.hasMultiArcGauge()?"g":"path").attr("class",p.chartArcsBackground),t.gauge_units&&i(p.chartArcsGaugeUnit),t.gauge_label_show&&(i(p.chartArcsGaugeMin),!t.gauge_fullCircle&&i(p.chartArcsGaugeMax)))},getGaugeLabelHeight:function(){return this.config.gauge_label_show?20:0}}),W(lt.prototype,{initBar:function(){this.main.select(".".concat(p.chart)).append("g").attr("class",p.chartBars)},updateTargetsForBar:function(t){var e=this,i=e.config,n=e.classChartBar.bind(e),a=e.classBars.bind(e),r=e.classFocus.bind(e);e.main.select(".".concat(p.chartBars)).selectAll(".".concat(p.chartBar)).data(t).attr("class",function(t){return n(t)+r(t)}).enter().append("g").attr("class",n).style("opacity","0").style("pointer-events","none").append("g").attr("class",a).style("cursor",function(t){return i.data_selection_isselectable(t)?"pointer":null})},updateBar:function(t){var e=this,i=e.barData.bind(e),n=e.classBar.bind(e),a=e.initialOpacity.bind(e);e.mainBar=e.main.selectAll(".".concat(p.bars)).selectAll(".".concat(p.bar)).data(i),e.mainBar.exit().transition().duration(t).style("opacity","0").remove(),e.mainBar=e.mainBar.enter().append("path").attr("class",n).style("fill",e.color).merge(e.mainBar).style("opacity",a)},redrawBar:function(t,e){return[(e?this.mainBar.transition(G()):this.mainBar).attr("d",t).style("fill",this.color).style("opacity","1")]},getBarW:function(t,e){var i,n=this,a=n.config,r=n.getMaxDataCount(),o=n.isGrouped(),s=!n.zoomScale&&!n||n.isCategorized()?t.tickInterval(r):n.xx(n.subX.domain()[1])/r,c=function(t){var i=t?a.bar_width[t]:a.bar_width,n=t?i.ratio:a.bar_width_ratio,r=t?i.max:a.bar_width_max,o=k(i)?i:e?s*n/e:0;return r&&o>r?r:o};return i=c(),!o&&X(a.bar_width)&&(i={width:i,total:[]},n.filterTargetsToShow(n.data.targets).forEach(function(t){a.bar_width[t.id]&&(i[t.id]=c(t.id),i.total.push(i[t.id]||i.width))})),i},getBars:function(t,e){var i=T(t)?"-".concat(t):"";return(e?this.main.selectAll(".".concat(p.bars).concat(this.getTargetSelectorSuffix(e))):this.main).selectAll(".".concat(p.bar).concat(i))},expandBars:function(t,e,i){i&&this.unexpandBars(),this.getBars(t,e).classed(p.EXPANDED,!0)},unexpandBars:function(t){this.getBars(t).classed(p.EXPANDED,!1)},generateDrawBar:function(t,e){var i=this.config,n=this.generateGetBarPoints(t,e),a=i.axis_rotated,r=this.isGrouped(),o=i.bar_radius,s=i.bar_radius_ratio,c=k(o)&&o>0?function(){return o}:k(s)?function(t){return t*s}:null;return function(t,e){var i=n(t,e),o=+a,s=+!o,l=t.value<0,u=["",""],d=0;if(c&&!r){var g=a?s:o,h=i[2][g]-i[0][g];d=c(h);var f="a".concat(d,",").concat(d," ").concat(l?"1 0 0":"0 0 1"," ");u[+!a]="".concat(f).concat(d,",").concat(d),u[+a]="".concat(f).concat([-d,d][a?"sort":"reverse"]()),l&&u.reverse()}var p=a?"H".concat(i[1][o]-d," ").concat(u[0],"V").concat(i[2][s]-d," ").concat(u[1],"H").concat(i[3][o]):"V".concat(i[1][s]+(l?-d:d)," ").concat(u[0],"H").concat(i[2][o]-d," ").concat(u[1],"V").concat(i[3][s]);return"M".concat(i[0][o],",").concat(i[0][s]).concat(p,"z")}},generateGetBarPoints:function(t,e){var i=this,n=e?i.subXAxis:i.xAxis,a=i.getIndicesMax(t)+1,r=i.getBarW(n,a),o=i.getShapeX(r,t,!!e),s=i.getShapeY(!!e),c=i.getShapeOffset(i.isBarType,t,!!e),l=e?i.getSubYScale:i.getYScale;return function(t,e){var n=l.call(i,t.id)(i.getShapeYMin(t.id)),a=c(t,e)||n,u=k(r)?r:r[t.id]||r.width,d=o(t),g=s(t);return i.config.axis_rotated&&(t.value>0&&g<n||t.value<0&&n<g)&&(g=n),[[d,a],[d,g-=n-a],[d+u,g],[d+u,a]]}},isWithinBar:function(t){var e=Object(d.mouse)(t),i=s(j(t),2),n=i[0],a=i[1],r=Math.min(n.x,a.x),o=Math.min(n.y,a.y),c=this.config.bar_sensitivity,l=t.getBBox(),u=l.width,g=l.height;return r-c<e[0]&&e[0]<r+u+c&&o-c<e[1]&&e[1]<o+g+c}}),W(lt.prototype,{initBubble:function(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function(){var t=this.getCache("$baseLength");return t||this.addCache("$baseLength",t=tt("min",[this.axes.x.select("path").node().getTotalLength(),this.axes.y.select("path").node().getTotalLength()])),t},getBubbleR:function(t){var e=this,i=e.config.bubble_maxR;A(i)?i=i(t):!k(i)&&(i=e.getBaseLength()/(2*e.getMaxDataCount())+12);var n=tt("max",e.getMinMaxData().max.map(function(t){return e.isBubbleZType(t)?e.getBubbleZData(t.value,"y"):z(t.value)?t.value.mid:t.value})),a=i*i*Math.PI,r=(e.isBubbleZType(t)?e.getBubbleZData(t.value,"z"):t.value)*(a/n);return Math.sqrt(r/Math.PI)},getBubbleZData:function(t,e){return z(t)?t[e]:t["y"===e?0:1]},isBubbleZType:function(t){return this.isBubbleType(t)&&(z(t.value)&&("z"in t.value||"y"in t.value)||E(t.value)&&2===t.value.length)}}),W(lt.prototype,{initLine:function(){this.main.select(".".concat(p.chart)).append("g").attr("class",p.chartLines)},updateTargetsForLine:function(t){var e=this,i=e.config,n=e.classChartLine.bind(e),a=e.classLines.bind(e),r=e.classAreas.bind(e),o=e.classCircles.bind(e),s=e.classFocus.bind(e),c=e.main.select(".".concat(p.chartLines)).selectAll(".".concat(p.chartLine)).data(t).attr("class",function(t){return n(t)+s(t)}).enter().append("g").attr("class",n).style("opacity","0").style("pointer-events","none");c.append("g").attr("class",a),c.append("g").attr("class",r),i.point_show&&(i.data_selection_enabled&&c.append("g").attr("class",function(t){return e.generateClass(p.selectedCircles,t.id)}),c.append("g").attr("class",o).style("cursor",function(t){return i.data_selection_isselectable(t)?"pointer":null})),t.forEach(function(t){e.main.selectAll(".".concat(p.selectedCircles).concat(e.getTargetSelectorSuffix(t.id))).selectAll("".concat(p.selectedCircle)).each(function(e){e.value=t.values[e.index].value})})},updateLine:function(t){var e=this;e.mainLine=e.main.selectAll(".".concat(p.lines)).selectAll(".".concat(p.line)).data(e.lineData.bind(e)),e.mainLine.exit().transition().duration(t).style("opacity","0").remove(),e.mainLine=e.mainLine.enter().append("path").attr("class",function(t){return"".concat(e.classLine.bind(e)(t)," ").concat(e.extraLineClasses(t)||"")}).style("stroke",e.color).merge(e.mainLine).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null)},redrawLine:function(t,e){return[(e?this.mainLine.transition(G()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity","1")]},getCurve:function(t){var e=this;return e.config.axis_rotated&&e.isStepType(t)?function(i){var n=e.getInterpolate(t)(i);return n.orgPoint=n.point,n.pointRotated=function(t,e){1===this._point&&(this._point=2);var i=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,i),this._context.lineTo(t,i),this._x=t,this._y=e},n.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},n}:e.getInterpolate(t)},generateDrawLine:function(t,e){var i=this,n=i.config,a=n.line_connectNull,r=n.axis_rotated,o=i.generateGetLinePoints(t,e),s=e?i.getSubYScale:i.getYScale,c=function(t){return(e?i.subxx:i.xx).call(i,t)},l=function(t,e){return i.isGrouped(t.id)?o(t,e)[0][1]:s.call(i,t.id)(i.getBaseValue(t))},u=Object(ft.line)();u=r?u.x(l).y(c):u.x(c).y(l),a||(u=u.defined(function(t){return null!==i.getBaseValue(t)}));var d=e?i.subX:i.x;return function(t){var e,o=s.call(i,t.id),c=a?i.filterRemoveNull(t.values):t.values,l=0,g=0;if(i.isLineType(t)){var h=n.data_regions[t.id];h?e=i.lineWithRegions(c,d,o,h):(i.isStepType(t)&&(c=i.convertValuesToStep(c)),e=u.curve(i.getCurve(t))(c))}else c[0]&&(l=d(c[0].x),g=o(c[0].value)),e=r?"M ".concat(g," ").concat(l):"M ".concat(l," ").concat(g);return e||"M 0 0"}},generateGetLinePoints:function(t,e){var i=this,n=i.config,a=!!e,r=i.getShapeX(0,t,a),o=i.getShapeY(a),s=i.getShapeOffset(i.isLineType,t,a),c=a?i.getSubYScale:i.getYScale;return function(t,e){var a=c.call(i,t.id)(i.getShapeYMin(t.id)),l=s(t,e)||a,u=r(t),d=o(t);n.axis_rotated&&(t.value>0&&d<a||t.value<0&&a<d)&&(d=a);var g=[u,d-(a-l)];return[g,g,g,g]}},lineWithRegions:function(t,e,i,n){var a,r,o,s,c=this,l=c.config.axis_rotated,u=c.isTimeSeries(),d=c.isCategorized()?.5:0,g=[],h=function(t,e){for(var i,n=0;i=e[n];n++)if(i.start<t&&t<=i.end)return i.style;return!1};if(C(n))for(var f,p=function(t,e){return S(t)?e:u?c.parseDate(t):t},x=0;f=n[x];x++){var v=p(f.start,t[0].x),m=p(f.end,t[t.length-1].x),_=f.style||{dasharray:"2 2"};g[x]={start:v,end:m,style:_}}for(var y,b=l?function(t){return i(t.value)}:function(t){return e(t.x)},A=l?function(t){return e(t.x)}:function(t){return i(t.value)},w=function(t){return"M".concat(t[0][0],",").concat(t[0][1],"L").concat(t[1][0],",").concat(t[1][1])},k=u?function(t,n,a,s){var c=t.x.getTime(),u=n.x-t.x,d=new Date(c+u*a),g=new Date(c+u*(a+s)),h=l?[[i(r(a)),e(d)],[i(r(a+o)),e(g)]]:[[e(d),i(r(a))],[e(g),i(r(a+o))]];return w(h)}:function(t,n,o,s){var c=l?[[i(r(o),!0),e(a(o))],[i(r(o+s),!0),e(a(o+s))]]:[[e(a(o),!0),i(r(o))],[e(a(o+s),!0),i(r(o+s))]];return w(c)},L="",O=0;y=t[O];O++){var D=t[O-1],R=D&&T(D.value);_=h(y.x,g);if(T(y.value))if(!S(g)&&_&&R){if(R){try{_=_.dasharray.split(" ")}catch(t){_="2 2".split(" ")}a=c.getScale(D.x+d,y.x+d,u),r=c.getScale(D.value,y.value);var X=e(y.x)-e(D.x),M=i(y.value)-i(D.value),I=Math.sqrt(Math.pow(X,2)+Math.pow(M,2));s=(o=_[0]/I)*_[1];for(var E=o;E<=1;E+=s)L+=k(D,y,E,o),E+s>=1&&(L+=k(D,y,1,0))}}else L+="".concat(O&&R?"L":"M").concat(b(y),",").concat(A(y))}return L},updateAreaGradient:function(){var t=this;t.data.targets.forEach(function(e){var i="".concat(t.datetimeId,"-areaGradient").concat(t.getTargetSelectorSuffix(e.id));if(t.isAreaType(e)&&t.defs.select("#".concat(i)).empty()){var n=t.color(e),a=t.config.area_linearGradient,r=a.x,o=void 0===r?[0,0]:r,s=a.y,c=void 0===s?[0,1]:s,l=a.stops,u=void 0===l?[[0,n,1],[1,n,0]]:l,d=t.defs.append("linearGradient").attr("id","".concat(i)).attr("x1",o[0]).attr("x2",o[1]).attr("y1",c[0]).attr("y2",c[1]);u.forEach(function(t){var i=A(t[1])?t[1](e.id):t[1];d.append("stop").attr("offset",t[0]).attr("stop-color",i||n).attr("stop-opacity",t[2])})}})},updateAreaColor:function(t){return this.config.area_linearGradient?"url(#".concat(this.datetimeId,"-areaGradient").concat(this.getTargetSelectorSuffix(t.id),")"):this.color(t)},updateArea:function(t){var e=this;e.config.area_linearGradient&&e.updateAreaGradient(),e.mainArea=e.main.selectAll(".".concat(p.areas)).selectAll(".".concat(p.area)).data(e.lineData.bind(e)),e.mainArea.exit().transition().duration(t).style("opacity","0").remove(),e.mainArea=e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.updateAreaColor.bind(e)).style("opacity",function(){return e.orgAreaOpacity=Object(d.select)(this).style("opacity"),"0"}).merge(e.mainArea),e.mainArea.style("opacity",e.orgAreaOpacity)},redrawArea:function(t,e){var i=this;return[(e?i.mainArea.transition(G()):i.mainArea).attr("d",t).style("fill",i.updateAreaColor.bind(i)).style("opacity",function(t){return(i.isAreaRangeType(t)?i.orgAreaOpacity/1.75:i.orgAreaOpacity)+""})]},generateDrawArea:function(t,e){var i=this,n=i.config,a=n.line_connectNull,r=n.axis_rotated,o=i.generateGetAreaPoints(t,e),s=e?i.getSubYScale:i.getYScale,c=function(t){return(e?i.subxx:i.xx).call(i,t)},l=function(t,e){return i.isGrouped(t.id)?o(t,e)[0][1]:s.call(i,t.id)(i.isAreaRangeType(t)?i.getAreaRangeData(t,"high"):i.getShapeYMin(t.id))},u=function(t,e){return i.isGrouped(t.id)?o(t,e)[1][1]:s.call(i,t.id)(i.isAreaRangeType(t)?i.getAreaRangeData(t,"low"):t.value)};return function(t){var e,o=a?i.filterRemoveNull(t.values):t.values,s=0,d=0;if(i.isAreaType(t)){var g=Object(ft.area)();g=r?g.y(c).x0(l).x1(u):g.x(c).y0(n.area_above?0:l).y1(u),a||(g=g.defined(function(t){return null!==i.getBaseValue(t)})),i.isStepType(t)&&(o=i.convertValuesToStep(o)),e=g.curve(i.getCurve(t))(o)}else o[0]&&(s=i.x(o[0].x),d=i.getYScale(t.id)(o[0].value)),e=r?"M ".concat(d," ").concat(s):"M ".concat(s," ").concat(d);return e||"M 0 0"}},generateGetAreaPoints:function(t,e){var i=this,n=i.config,a=i.getShapeX(0,t,!!e),r=i.getShapeY(!!e),o=i.getShapeOffset(i.isAreaType,t,!!e),s=e?i.getSubYScale:i.getYScale;return function(t,e){var c=s.call(i,t.id)(i.getShapeYMin(t.id)),l=o(t,e)||c,u=a(t),d=r(t);return n.axis_rotated&&(t.value>0&&d<c||t.value<0&&c<d)&&(d=c),[[u,l],[u,d-(c-l)],[u,d-(c-l)],[u,l]]}},updateCircle:function(){var t=this;if(t.config.point_show){t.mainCircle=t.main.selectAll(".".concat(p.circles)).selectAll(".".concat(p.circle)).data(function(e){return!t.isBarType(e)&&(!t.isLineType(e)||t.shouldDrawPointsForLine(e))&&t.labelishData(e)}),t.mainCircle.exit().remove();var e=t.point("create",this,t.pointR.bind(t),t.color);t.mainCircle=t.mainCircle.enter().append(e).merge(t.mainCircle).style("stroke",t.color).style("opacity",t.initialOpacityForCircle.bind(t))}},redrawCircle:function(t,e,i,n){var a=this,r=a.main.selectAll(".".concat(p.selectedCircle));if(!a.config.point_show)return[];var o=[];a.mainCircle.each(function(s){var c=a.point("update",a,t,e,a.opacityForCircle.bind(a),a.color,i,n,r).bind(this)(s);o.push(c)});var s=a.isCirclePoint()?"c":"";return[o,r.attr("".concat(s,"x"),t).attr("".concat(s,"y"),e)]},circleX:function(t){var e=T(t.x);return this.config.zoom_enabled&&this.zoomScale?e?this.zoomScale(t.x):null:e?this.x(t.x):null},updateCircleY:function(){var t=this,e=t.generateGetLinePoints(t.getShapeIndices(t.isLineType),!1);t.circleY=function(i,n){var a=i.id;return t.isGrouped(a)?e(i,n)[0][1]:t.getYScale(a)(t.getBaseValue(i))}},getCircles:function(t,e){var i=T(t)?"-".concat(t):"";return(e?this.main.selectAll(".".concat(p.circles).concat(this.getTargetSelectorSuffix(e))):this.main).selectAll(".".concat(p.circle).concat(i))},expandCircles:function(t,e,i){var n=this,a=n.pointExpandedR.bind(n);i&&n.unexpandCircles();var r=n.getCircles(t,e).classed(p.EXPANDED,!0),o=a(r)/n.config.point_r,s=1-o;n.isCirclePoint()?r.attr("r",a):r.each(function(){var t=Object(d.select)(this);if("circle"===this.tagName)t.attr("r",a);else{var e=this.getBBox(),i=e.width,n=e.height,r=s*(+t.attr("x")+i/2),c=s*(+t.attr("y")+n/2);t.attr("transform","translate(".concat(r," ").concat(c,") scale(").concat(o,")"))}})},unexpandCircles:function(t){var e=this,i=e.pointR.bind(e),n=e.getCircles(t).filter(function(){return Object(d.select)(this).classed(p.EXPANDED)}).classed(p.EXPANDED,!1);n.attr("r",i),e.isCirclePoint()||n.attr("transform","scale(".concat(i(n)/e.config.point_r,")"))},pointR:function(t){var e=this.config.point_r,i=e;return this.isStepType(t)?i=0:this.isBubbleType(t)?i=this.getBubbleR(t):A(e)&&(i=e(t)),i},pointExpandedR:function(t){var e=this.config,i=this.isBubbleType(t)?1.15:1.75;return e.point_focus_expand_enabled?e.point_focus_expand_r||this.pointR(t)*i:this.pointR(t)},pointSelectR:function(t){var e=this.config.point_select_r;return A(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function(t,e){var i=Object(d.mouse)(t),n=Object(d.select)(t),a=this.isCirclePoint()?"c":"",r=+n.attr("".concat(a,"x")),o=+n.attr("".concat(a,"y"));if(!r&&!o&&1===t.nodeType){var s=t.getBBox?t.getBBox():t.getBoundingClientRect();r=s.x,o=s.y}return Math.sqrt(Math.pow(r-i[0],2)+Math.pow(o-i[1],2))<(e||this.config.point_sensitivity)},isWithinStep:function(t,e){return Math.abs(e-Object(d.mouse)(t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return!0===e||E(e)&&-1!==e.indexOf(t.id)}}),W(lt.prototype,{hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){var e=t||this.config.point_type;return X(e)&&A(e.create)&&A(e.update)},insertPointInfoDefs:function(t,e){var i=function(t,e){for(var i,n=t.attributes,a=0;i=n[a];a++)i=i.name,e.setAttribute(i,t.getAttribute(i))},n=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,a=b.createElementNS(d.namespaces.svg,n.nodeName.toLowerCase());if(a.id=e,a.style.fill="inherit",a.style.stroke="inherit",i(n,a),n.childNodes&&n.childNodes.length){var r=Object(d.select)(a);"innerHTML"in a?r.html(n.innerHTML):Z(n.childNodes).forEach(function(t){i(t,r.append(t.tagName).node())})}this.defs.node().appendChild(a)},pointFromDefs:function(t){return this.defs.select("#".concat(t))},updatePointClass:function(t){var e=this,i=!1;return(z(t)||e.mainCircle)&&(i=!0===t?e.mainCircle.each(function(t){var i=e.classCircle.bind(e)(t);this.getAttribute("class").indexOf(p.EXPANDED)>-1&&(i+=" ".concat(p.EXPANDED)),this.setAttribute("class",i)}):e.classCircle(t)),i},generatePoint:function(){var t=this,e=t.config,i=[],n=I(e.point_pattern)?e.point_pattern:[e.point_type];return function(e,a){for(var r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return function(r){var s=r.id||r.data&&r.data.id||r,c=Object(d.select)(this);i.indexOf(s)<0&&i.push(s);var l=n[i.indexOf(s)%n.length];if(t.hasValidPointType(l))l=t[l];else if(!t.hasValidPointDrawMethods(l)){var u="".concat(t.datetimeId,"-point-").concat(s);if(t.pointFromDefs(u).size()<1&&t.insertPointInfoDefs(l,u),"create"===e)return t.custom.create.bind(a).apply(void 0,[c,u].concat(o));if("update"===e)return t.custom.update.bind(a).apply(void 0,[c].concat(o))}return l[e].bind(a).apply(void 0,[c].concat(o))}}},getTransitionName:function(){return G()},custom:{create:function(t,e,i,n){return t.append("use").attr("xlink:href","#".concat(e)).attr("class",this.updatePointClass.bind(this)).style("fill",n).node()},update:function(t,e,i,n,a,r,o,s){var c=t.node().getBBox(),l=c.width,u=c.height,d=function(t){return e(t)-l/2},g=t;if(r){var h=this.getTransitionName();o&&g.attr("x",d),g=g.transition(h),s.transition(this.getTransitionName())}return g.attr("x",d).attr("y",function(t){return i(t)-u/2}).style("opacity",n).style("fill",a)}},circle:{create:function(t,e,i){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",i).node()},update:function(t,e,i,n,a,r,o,s){var c=this,l=t;if(c.hasType("bubble")&&l.attr("r",c.pointR.bind(c)),r){var u=c.getTransitionName();o&&l.attr("cx",e),l.attr("cx")&&(l=l.transition(u)),s.transition(c.getTransitionName())}return l.attr("cx",e).attr("cy",i).style("opacity",n).style("fill",a)}},rectangle:{create:function(t,e,i){var n=function(t){return 2*e(t)};return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",n).attr("height",n).style("fill",i).node()},update:function(t,e,i,n,a,r,o,s){var c=this.config.point_r,l=function(t){return e(t)-c},u=t;if(r){var d=this.getTransitionName();o&&u.attr("x",l),u=u.transition(d),s.transition(this.getTransitionName())}return u.attr("x",l).attr("y",function(t){return i(t)-c}).style("opacity",n).style("fill",a)}}});W(lt.prototype,{initRadar:function(){var t=this,e=t.config;t.hasType("radar")&&(t.radars=t.main.select(".".concat(p.chart)).append("g").attr("class",p.chartRadars),t.radars.levels=t.radars.append("g").attr("class",p.levels),t.radars.axes=t.radars.append("g").attr("class",p.axis),t.radars.shapes=t.radars.append("g").attr("class",p.shapes),t.maxValue=e.radar_axis_max||t.getMinMaxData().max[0].value)},getRadarSize:function(){var t=this.config.axis_x_categories.length<4?-20:10,e=(Math.min(this.arcWidth,this.arcHeight)-t)/2;return[e,e]},updateTargetsForRadar:function(t){var e=this.config;M(e.axis_x_categories)&&(e.axis_x_categories=et(0,tt("max",t.map(function(t){return t.values.length})))),this.generateRadarPoints()},getRadarPosition:function(t,e,i,n){var a=this.config,r=s(this.getRadarSize(),2),o=r[0],c=r[1],l=a.axis_x_categories.length,u=a.radar_direction_clockwise,d=Z(t).map(function(r){return function(t,e,i,n,a,r){var o=t&&n>0?i-n:n,s=2*Math.PI;return a*(1-r*("x"===e?Math.sin:Math.cos)(o*s/i))}(u,r,l,e,C(i)?i:"x"===t?o:c,k(n)?n:a.radar_size_ratio)});return 1===d.length?d[0]:d},generateRadarPoints:function(){var t=this,e=t.data.targets,i=s(t.getRadarSize(),2),n=i[0],a=i[1],r=t.getCache("$radarPoints")||{},o=r._size;o&&(o.width===n||o.height===a)||(e.forEach(function(e){r[e.id]=e.values.map(function(e,i){return t.getRadarPosition(["x","y"],i,void 0,t.getRatio("radar",e))})}),r._size={width:n,height:a},t.addCache("$radarPoints",r))},redrawRadar:function(t){var e=this,i=e.getTranslate("radar");i&&(e.radars.attr("transform",i),e.main.selectAll(".".concat(p.circles)).attr("transform",i),e.main.select(".".concat(p.chartTexts)).attr("transform",i),e.generateRadarPoints(),e.updateRadarLevel(),e.updateRadarAxes(),e.updateRadarShape(t))},generateGetRadarPoints:function(){var t=this.getCache("$radarPoints");return function(e,i){var n=t[e.id][i];return[n,n,n,n]}},updateRadarLevel:function(){var t=this,e=t.config,i=s(t.getRadarSize(),2),n=i[0],a=i[1],r=e.radar_level_depth,o=e.axis_x_categories.length,c=e.radar_level_text_show,l=t.radars.levels,u=et(0,r),d=e.radar_size_ratio*Math.min(n,a),g=u.map(function(t){return d*((t+1)/r)}),h=e.radar_level_text_format,f=u.map(function(e){var i=g[e];return et(0,o).map(function(e){return t.getRadarPosition(["x","y"],e,i,1).join(",")}).join(" ")}),x=l.selectAll(".".concat(p.level)).data(u);x.exit().remove();var v=x.enter().append("g").attr("class",function(t,e){return"".concat(p.level," ").concat(p.level,"-").concat(e)});v.append("polygon").style("visibility",e.radar_level_show?null:"hidden"),c&&(l.select("text").empty()&&l.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return h(0)}),v.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(e){return h(t.maxValue/u.length*(e+1))})),v.merge(x).attr("transform",function(t){return"translate(".concat(n-g[t],", ").concat(a-g[t],")")}).selectAll("polygon").attr("points",function(t){return f[t]}),c&&l.selectAll("text").attr("x",function(t){return S(t)?n:f[t].split(",")[0]}).attr("y",function(t){return S(t)?a:0})},updateRadarAxes:function(){var t=this,e=t.config,i=s(t.getRadarSize(),2),n=i[0],a=i[1],r=e.axis_x_categories,o=t.radars.axes.selectAll("g").data(r);o.exit().remove();var c=o.enter().append("g").attr("class",function(t,e){return"".concat(p.axis,"-").concat(e)});if(e.radar_axis_line_show&&c.append("line"),e.radar_axis_text_show&&c.append("text"),o=c.merge(o),e.radar_axis_line_show&&o.select("line").attr("x1",n).attr("y1",a).attr("x2",function(e,i){return t.getRadarPosition("x",i)}).attr("y2",function(e,i){return t.getRadarPosition("y",i)}),e.radar_axis_text_show){var l=e.radar_axis_text_position,u=l.x,g=void 0===u?0:u,h=l.y,f=void 0===h?0:h;o.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(t){t.each(function(t){Y(Object(d.select)(this),t+"",[-.6,1.2])})}).datum(function(t,e){return{index:e}}).attr("transform",function(e){S(this.width)&&(this.width=this.getBoundingClientRect().width/2);var i=t.getRadarPosition("x",e.index,void 0,1),r=Math.round(t.getRadarPosition("y",e.index,void 0,1));return i>n?i+=this.width+g:Math.round(i)<n&&(i-=this.width+g),r>a?(r/2===a&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),r+=f):r<a&&(r-=f),"translate(".concat(i," ").concat(r,")")})}t.bindEvent()},bindEvent:function(){var t=this,e=this;if(e.config.interaction_enabled){var i="mouse"===e.inputType,n=function(){var t=d.event.target;/tspan/i.test(t.tagName)&&(t=t.parentNode);var e=Object(d.select)(t).datum();return e&&1===Object.keys(e).length?e.index:void 0},a=function(){var a=n(),r=S(a);(i||r)&&(t.hideTooltip(),t.unexpandCircles(),i?e.setOverOut(!1,a):r&&e.callOverOutForTouch())};e.radars.select(".".concat(p.axis)).on(i?"mouseover ":"touchstart",function(){if(!e.transiting){var t=n();e.selectRectForSingle(e.svg.node(),null,t),i?e.setOverOut(!0,t):e.callOverOutForTouch(t)}}).on("mouseout",i?a:null),i||e.svg.on("touchstart",a)}},updateRadarShape:function(t){var e=this,i=e.data.targets,n=e.getCache("$radarPoints"),a=e.radars.shapes.selectAll("polygon").data(i),r=a.enter().append("g").attr("class",e.classChartRadar.bind(e));a.exit().transition().duration(t).remove(),r.append("polygon").merge(a).style("fill",e.color).style("stroke",e.color).attr("points",function(t){return n[t.id].join(" ")})},radarCircleX:function(t){return this.getCache("$radarPoints")[t.id][t.index][0]},radarCircleY:function(t){return this.getCache("$radarPoints")[t.id][t.index][1]}}),W(lt.prototype,{initText:function(){this.main.select(".".concat(p.chart)).append("g").attr("class",p.chartTexts),this.mainText=Object(d.selectAll)([])},updateTargetsForText:function(t){var e=this,i=e.classChartText.bind(e),n=e.classTexts.bind(e),a=e.classFocus.bind(e);e.main.select(".".concat(p.chartTexts)).selectAll(".".concat(p.chartText)).data(t).attr("class",function(t){return i(t)+a(t)}).enter().append("g").attr("class",i).style("opacity","0").style("pointer-events","none").append("g").attr("class",n)},updateText:function(t){var e=this,i=this,n=i.config,a=i.labelishData.bind(i),r=i.classText.bind(i);i.mainText=i.main.selectAll(".".concat(p.texts)).selectAll(".".concat(p.text)).data(function(t){return e.isRadarType(t)?t.values:a(t)}),i.mainText.exit().transition().duration(t).style("fill-opacity","0").remove(),i.mainText=i.mainText.enter().append("text").merge(i.mainText).attr("class",r).attr("text-anchor",function(t){return n.axis_rotated?t.value<0?"end":"start":"middle"}).style("fill",i.updateTextColor.bind(i)).style("fill-opacity","0").text(function(t,e,n){var a=i.isBubbleZType(t)?i.getBubbleZData(t.value,"z"):t.value;return i.dataLabelFormat(t.id)(a,t.id,e,n)})},updateTextColor:function(t){var e,i=this.config.data_labels_colors;return w(i)?e=i:z(i)&&(e=i[t.id]),e||this.color(t)},redrawText:function(t,e,i,n){var a=this,r=G(),o=i?0:a.opacityForText.bind(a);return a.mainText.each(function(i,s){var c=Object(d.select)(this);(n&&c.attr("x")?c.transition(r):c).attr("x",t.bind(this)(i,s)).attr("y",e.bind(this)(i,s)).style("fill",a.updateTextColor.bind(a)).style("fill-opacity",o)}),!0},getTextRect:function(t,e){var i=t.node?t.node():t;/text/i.test(i.tagName)||(i=i.querySelector("text"));var n=i.textContent,a="$".concat(n.replace(/\W/g,"_")),r=this.getCache(a);return r||(this.svg.append("text").style("visibility","hidden").style("font",Object(d.select)(i).style("font")).classed(e,!0).text(n).call(function(t){r=V(t.node())}).remove(),this.addCache(a,r)),r},generateXYForText:function(t,e){var i=this,n=Object.keys(t),a={},r=e?i.getXForText:i.getYForText;return i.hasType("radar")&&n.push("radar"),n.forEach(function(e){a[e]=i["generateGet".concat(U(e),"Points")](t[e],!1)}),function(t,e){var n=(i.isAreaType(t)?"area":i.isBarType(t)&&"bar")||i.isRadarType(t)&&"radar"||"line";return r.call(i,a[n](t,e),t,this)}},getCenteredTextPos:function(t,e,i){var n=this.config,a=n.axis_rotated;if(n.data_labels.centered&&this.isBarType(t)){var r=V(i),o=t.value>=0;if(a){var s=(o?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+r.width/2;return o?-s-3:s+2}var c=(o?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+r.height/2;return o?c:-c-2}return 0},getTextPos:function(t,e){var i=this.config.data_labels_position;return(t in i?i[t]:i)[e]||0},getXForText:function(t,e,i){var n,a,r=this,o=r.config.axis_rotated;if(o?(a=r.isBarType(e)?4:6,n=t[2][1]+a*(e.value<0?-1:1)):n=r.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value)if(n>r.width){var s=V(i).width;n=r.width-s}else n<0&&(n=4);return o&&(n+=r.getCenteredTextPos(e,t,i)),n+r.getTextPos(e.id,"x")},getYForText:function(t,e,i){var n,a=this,r=a.config,o=r.axis_rotated,s=r.point_r,c=V(i),l=3;if(o)n=(t[0][0]+t[2][0]+.6*c.height)/2;else if(n=t[2][1],k(s)&&s>5&&(a.isLineType(e)||a.isScatterType(e))&&(l+=r.point_r/2.3),e.value<0||0===e.value&&!a.hasPositiveValue&&a.hasNegativeValue)n+=c.height+(a.isBarType(e)?-l:l);else{var u=2*-l;a.isBarType(e)?u=-l:a.isBubbleType(e)&&(u=l),n+=u}if(null===e.value&&!o){var d=c.height;n<d?n=d:n>this.height&&(n=this.height-4)}return o||(n+=a.getCenteredTextPos(e,t,i)),n+a.getTextPos(e.id,"y")},markOverlapped:function(t,e,i){var n=e.arcs.selectAll(i),a=n.filter(function(e){return e.data.id!==t}),r=n.filter(function(e){return e.data.id===t}),o=$(r.node()),s=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))};r.node()&&a.each(function(){var t=$(this),e=Object(d.select)(this),i=s(o.e,o.f)>s(t.e,t.f)?r:e,n=Math.ceil(Math.abs(o.e-t.e))<Math.ceil(i.node().getComputedTextLength()),a=Math.ceil(Math.abs(o.f-t.f))<parseInt(r.style("font-size"),10);e.classed(p.TextOverlapping,n&&a)})},undoMarkOverlapped:function(t,e){t.arcs.selectAll(e).each(function(){Object(d.selectAll)([this,this.previousSibling]).classed(p.TextOverlapping,!1)})}});var xt={Area:["area","area-spline","area-spline-range","area-line-range","area-step"],AreaRange:["area-spline-range","area-line-range"],Arc:["pie","donut","gauge","radar"],Line:["line","spline","area","area-spline","area-spline-range","area-line-range","step","area-step"],Step:["step","area-step"],Spline:["spline","area-spline","area-spline-range"]};W(lt.prototype,{setTargetType:function(t,e){var i=this,n=i.config;i.mapToTargetIds(t).forEach(function(t){i.withoutFadeIn[t]=e===n.data_types[t],n.data_types[t]=e}),t||(n.data_type=e)},hasType:function(t,e){var i=this.config.data_types,n=e||this.data.targets,a=!1;return n&&n.length?n.forEach(function(e){var n=i[e.id];(n&&n.indexOf(t)>=0||!n&&"line"===t)&&(a=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(e){i[e]===t&&(a=!0)}):a=this.config.data_type===t,a},hasTypeOf:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return!xt[t].filter(function(t){return-1===n.indexOf(t)}).every(function(t){return!i.hasType(t,e)})},isTypeOf:function(t,e){var i=w(t)?t:t.id,n=this.config.data_types[i];return E(e)?e.indexOf(n)>=0:n===e},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){var e=w(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,xt.Line)},isStepType:function(t){return this.isTypeOf(t,xt.Step)},isSplineType:function(t){return this.isTypeOf(t,xt.Spline)},isAreaType:function(t){return this.isTypeOf(t,xt.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,xt.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function(){var t=this.config,e=t.point_pattern;return"circle"===t.point_type&&(!e||E(e)&&0===e.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},barData:function(t){return this.isBarType(t)?t.values:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isRadarType(t)?t.values:[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}});var vt=function(t){return T(t.position)||"end"},mt=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},_t=function(t,e,i){return function(n){var a=t?0:e;return"start"===n.position?a=t?-i:0:"middle"===n.position&&(a=(t?-i:e)/2),a}};W(lt.prototype,{initGrid:function(){this.xgrid=Object(d.selectAll)([]),this.initGridLines(),this.initFocusGrid()},initGridLines:function(){var t=this,e=t.config;(e.grid_x_lines.length||e.grid_y_lines.length)&&(t.gridLines=t.main.insert("g",".".concat(p.chart).concat(e.grid_lines_front?" + *":"")).attr("clip-path",t.clipPathForGrid).attr("class","".concat(p.grid," ").concat(p.gridLines)),t.gridLines.append("g").attr("class",p.xgridLines),t.gridLines.append("g").attr("class",p.ygridLines),t.xgridLines=Object(d.selectAll)([]))},updateXGrid:function(t){var e=this,i=e.config,n=i.axis_rotated,a=e.generateGridData(i.grid_x_type,e.x),r=e.isCategorized()?e.xAxis.tickOffset():0,o=function(t){return(e.zoomScale||e.x)(t)+r*(n?-1:1)};e.xgridAttr=n?{x1:0,x2:e.width,y1:o,y2:o}:{x1:o,x2:o,y1:0,y2:e.height},e.xgrid=e.main.select(".".concat(p.xgrids)).selectAll(".".concat(p.xgrid)).data(a),e.xgrid.exit().remove(),e.xgrid=e.xgrid.enter().append("line").attr("class",p.xgrid).merge(e.xgrid),t||e.xgrid.each(function(){var t=Object(d.select)(this);Object.keys(e.xgridAttr).forEach(function(i){t.attr(i,e.xgridAttr[i]).style("opacity",function(){return t.attr(n?"y1":"x1")===(n?e.height:0)?"0":"1"})})})},updateYGrid:function(){var t=this,e=t.config,i=e.axis_rotated,n=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks),a=function(e){return Math.ceil(t.y(e))};t.ygrid=t.main.select(".".concat(p.ygrids)).selectAll(".".concat(p.ygrid)).data(n),t.ygrid.exit().remove(),t.ygrid=t.ygrid.enter().append("line").attr("class",p.ygrid).merge(t.ygrid),t.ygrid.attr("x1",i?a:0).attr("x2",i?a:t.width).attr("y1",i?0:a).attr("y2",i?t.height:a),t.smoothLines(t.ygrid,"grid")},updateGrid:function(t){var e=this;e.gridLines||e.initGridLines(),e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),e.hideGridFocus(),e.updateXGridLines(t),e.updateYGridLines(t)},updateXGridLines:function(t){var e=this,i=e.main,n=e.config,a=n.axis_rotated;n.grid_x_show&&e.updateXGrid(),e.xgridLines=i.select(".".concat(p.xgridLines)).selectAll(".".concat(p.xgridLine)).data(n.grid_x_lines),e.xgridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.xgridLines.enter().append("g");r.append("line").style("opacity","0"),r.append("text").attr("transform",a?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),e.xgridLines=r.merge(e.xgridLines),e.xgridLines.attr("class",function(t){return"".concat(p.xgridLine," ").concat(t.class||"").trim()}).select("text").attr("text-anchor",vt).attr("dx",mt).transition().duration(t).text(function(t){return t.text}).transition().style("opacity","1")},updateYGridLines:function(t){var e=this,i=e.main,n=e.config,a=n.axis_rotated;n.grid_y_show&&e.updateYGrid(),e.ygridLines=i.select(".".concat(p.ygridLines)).selectAll(".".concat(p.ygridLine)).data(n.grid_y_lines),e.ygridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.ygridLines.enter().append("g");r.append("line").style("opacity","0"),r.append("text").attr("transform",a?"rotate(-90)":"").style("opacity","0"),e.ygridLines=r.merge(e.ygridLines);var o=e.yv.bind(e);e.ygridLines.attr("class",function(t){return"".concat(p.ygridLine," ").concat(t.class||"").trim()}).select("line").transition().duration(t).attr("x1",a?o:0).attr("x2",a?o:e.width).attr("y1",a?0:o).attr("y2",a?e.height:o).transition().style("opacity","1"),e.ygridLines.select("text").attr("text-anchor",vt).attr("dx",mt).transition().duration(t).attr("dy",-5).attr("x",_t(a,e.width,e.height)).attr("y",o).text(function(t){return t.text}).transition().style("opacity","1")},redrawGrid:function(t){var e=this,i=e.config.axis_rotated,n=e.xv.bind(e),a=e.xgridLines.select("line"),r=e.xgridLines.select("text");return a=(t?a.transition():a).attr("x1",i?0:n).attr("x2",i?e.width:n).attr("y1",i?n:0).attr("y2",i?n:e.height),r=(t?r.transition():r).attr("x",_t(!i,e.width,e.height)).attr("y",n).text(function(t){return t.text}),[(t?a.transition():a).style("opacity","1"),(t?r.transition():r).style("opacity","1")]},initFocusGrid:function(){var t=this,e=t.config,i=e.grid_front,n=".".concat(p[i&&t.gridLines?"gridLines":"chart"]).concat(i?" + *":"");t.grid=t.main.insert("g",n).attr("clip-path",t.clipPathForGrid).attr("class",p.grid),e.grid_x_show&&t.grid.append("g").attr("class",p.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",p.ygrids),e.grid_focus_show&&(t.grid.append("g").attr("class",p.xgridFocus).append("line").attr("class",p.xgridFocus),e.grid_focus_y&&!e.tooltip_grouped&&t.grid.append("g").attr("class",p.ygridFocus).append("line").attr("class",p.ygridFocus))},showGridFocus:function(t){var e=this,i=e.config,n=i.axis_rotated,a=t.filter(function(t){return t&&T(e.getBaseValue(t))});if(i.tooltip_show&&0!==a.length&&!e.hasType("bubble")&&!e.hasArcType()){var r=e.main.selectAll("line.".concat(p.xgridFocus,", line.").concat(p.ygridFocus)),o=i.grid_focus_edge&&!i.tooltip_grouped,s=e.xx.bind(e);r.style("visibility","visible").data(a.concat(a)).each(function(t){var i,a=Object(d.select)(this),r={x:s(t),y:e.getYScale(t.id)(t.value)};if(a.classed(p.xgridFocus))i=n?[null,r.x,o?r.y:e.width,r.x]:[r.x,o?r.y:null,r.x,e.height];else{var c="y2"===e.axis.getId(t.id);i=n?[r.y,o&&!c?r.x:null,r.y,o&&c?r.x:e.height]:[o&&c?r.x:null,r.y,o&&!c?r.x:e.width,r.y]}["x1","y1","x2","y2"].forEach(function(t,e){return a.attr(t,i[e])})}),e.smoothLines(r,"grid")}},hideGridFocus:function(){"mouse"===this.inputType&&this.main.selectAll("line.".concat(p.xgridFocus,", line.").concat(p.ygridFocus)).style("visibility","hidden")},updateGridFocus:function(){var t=this,e=t.grid.select("line.".concat(p.xgridFocus));if("touch"!==t.inputType){var i=t.config.axis_rotated;e.attr("x1",i?0:-10).attr("x2",i?t.width:-10).attr("y1",i?-10:0).attr("y2",i?-10:t.height)}else if(!e.empty()){var n=e.datum();n&&t.showGridFocus([n])}return!0},generateGridData:function(t,e){var i=this.main.select(".".concat(p.axisX)).selectAll(".tick").size(),n=[];if("year"===t)for(var a=this.getXDomain(),r=a[0].getFullYear(),o=a[1].getFullYear(),s=r;s<=o;s++)n.push(new Date("".concat(s,"-01-01 00:00:00")));else(n=e.ticks(10)).length>i&&(n=n.filter(function(t){return(t+"").indexOf(".")<0}));return n},getGridFilterToRemove:function(t){return t?function(e){var i=!1;return(E(t)?t.concat():[t]).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(i=!0)}),i}:function(){return!0}},removeGridLines:function(t,e){var i=this.config,n=this.getGridFilterToRemove(t),a=e?p.xgridLines:p.ygridLines,r=e?p.xgridLine:p.ygridLine;this.main.select(".".concat(a)).selectAll(".".concat(r)).filter(n).transition().duration(i.transition_duration).style("opacity","0").remove();var o="grid_".concat(e?"x":"y","_lines");i[o]=i[o].filter(function(t){return!n(t)})}}),W(lt.prototype,{initTooltip:function(){var t=this,e=t.config,i=e.tooltip_contents.bindto;if(t.tooltip=Object(d.select)(i),t.tooltip.empty()&&(t.tooltip=t.selectChart.style("position","relative").append("div").attr("class",p.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),e.tooltip_init_show){if(t.isTimeSeries()&&w(e.tooltip_init_x)){var n,a,r=t.data.targets[0];for(e.tooltip_init_x=t.parseDate(e.tooltip_init_x),n=0;(a=r.values[n])&&a.x-e.tooltip_init_x!=0;n++);e.tooltip_init_x=n}t.tooltip.html(t.getTooltipHTML(t.data.targets.map(function(i){return t.addName(i.values[e.tooltip_init_x])}),t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType(null,["radar"])),t.color)),i||t.tooltip.style("top",e.tooltip_init_position.top).style("left",e.tooltip_init_position.left).style("display","block")}t.bindTooltipResizePos()},getTooltipHTML:function(){for(var t,e,i=this,n=i.config,a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];return A(n.tooltip_contents)?(t=n.tooltip_contents).call.apply(t,[i].concat(r)):(e=i).getTooltipContent.apply(e,r)},getTooltipContent:function(t,e,i,n){var a=this,r=a.config,o=r.tooltip_format_title||e,c=r.tooltip_format_name||function(t){return t},l=r.tooltip_format_value||(a.isStackNormalized()?function(t,e){return"".concat((100*e).toFixed(2),"%")}:i),u=r.tooltip_order,d=function(t){return a.isBubbleZType(t)?a.getBubbleZData(t.value,"z"):a.getBaseValue(t)},g=a.levelColor?function(t){return a.levelColor(t.value)}:function(t){return n(t)},h=r.tooltip_contents,f=h.template,v=a.mapToTargetIds();if(null===u&&a.isGrouped()){var m=a.orderTargets(a.data.targets).map(function(t){return t.id}).reverse();t.sort(function(t,e){var i=t?t.value:null,n=e?e.value:null;return i>0&&n>0&&(i=t.id?m.indexOf(t.id):null,n=e.id?m.indexOf(e.id):null),i-n})}else/^(asc|desc)$/.test(u)?t.sort(function(t,e){var i=t?d(t):null,n=e?d(e):null;return"asc"===u?i-n:n-i}):A(u)&&t.sort(u);var _,y,b,w,k,C=a.getTooltipContentTemplate(f),L=t.length;for(k=0;k<L;k++)if((y=t[k])&&(d(y)||0===d(y))){if(S(_)){var O=B(o?o(y.x):y.x);_=nt(C[0],{CLASS_TOOLTIP:p.tooltip,TITLE:T(O)?f?O:'<tr><th colspan="2">'.concat(O,"</th></tr>"):""})}if(b=[y.ratio,y.id,y.index,t],w=B(l.apply(void 0,[d(y)].concat(x(b)))),a.isAreaRangeType(y)){var D=s(["high","low"].map(function(t){return B(l.apply(void 0,[a.getAreaRangeData(y,t)].concat(x(b))))}),2),R=D[0],X=D[1];w="<b>Mid:</b> ".concat(w," <b>High:</b> ").concat(R," <b>Low:</b> ").concat(X)}if(void 0!==w)if("continue"===function(){if(null===y.name)return"continue";var t=B(c.apply(void 0,[y.name].concat(x(b)))),e=g(y),i={CLASS_TOOLTIP_NAME:p.tooltipName+a.getTargetSelectorSuffix(y.id),COLOR:f||!a.patterns?e:'<svg><rect style="fill:'.concat(e,'" width="10" height="10"></rect></svg>'),NAME:t,VALUE:w};if(f&&z(h.text)){var n=v.indexOf(y.id);Object.keys(h.text).forEach(function(t){i[t]=h.text[t][n]})}_+=nt(C[1],i)}())continue}return"".concat(_,"</table>")},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'.concat(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>','{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>')).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(t,e,i,n){var a=this,r=a.config,o=a.hasType("gauge")&&!r.gauge_fullCircle,c=a.getSvgLeft(!0),l=s(Object(d.mouse)(n),2),u=l[0],g=l[1],h=c+a.currentWidth-a.getCurrentPaddingRight(!0),f=a.getCurrentPaddingLeft(!0);if(g+=20,a.hasArcType()){"touch"===a.inputType||a.hasType("radar")||(g+=o?a.height:a.height/2,u+=(a.width-(a.isLegendRight?a.getLegendWidth():0))/2)}else{var p=a.x(t[0].x);r.axis_rotated?(g=p+20,u+=c+100,h-=c):(g-=5,u=c+f+20+(a.zoomScale?u:p))}u+e+15>h&&(u-=e+f),g+i>a.currentHeight&&(g-=o?3*i:i+30);var x={top:g,left:u};return Object.keys(x).forEach(function(t){x[t]<0&&(x[t]=0)}),x},showTooltip:function(t,e){var i=this,n=i.config,a=n.tooltip_contents.bindto,r=i.hasArcType(null,["radar"]),o=t.filter(function(t){return t&&T(i.getBaseValue(t))});if(0!==o.length&&n.tooltip_show){var s=i.tooltip.datum(),c=s||{},l=c.width,u=void 0===l?0:l,d=c.height,g=void 0===d?0:d,h=JSON.stringify(t);if(!s||s.current!==h){var f=t.concat().sort()[0].index;P(n.tooltip_onshow,i,i.api,t),i.tooltip.html(i.getTooltipHTML(t,i.axis.getXAxisTickFormat(),i.getYFormat(r),i.color)).style("display",null).style("visibility",null).datum(s={index:f,current:h,width:u=i.tooltip.property("offsetWidth"),height:g=i.tooltip.property("offsetHeight")}),P(n.tooltip_onshown,i,i.api,t),i._handleLinkedCharts(!0,f)}if(!a){var p=(n.tooltip_position||i.tooltipPosition).call(this,o,u,g,e);["top","left"].forEach(function(t){var e=p[t];i.tooltip.style(t,"".concat(e,"px")),"left"!==t||s.xPosInPercent||(s.xPosInPercent=e/i.currentWidth*100)})}}},bindTooltipResizePos:function(){var t=this,e=t.resizeFunction,i=t.tooltip;e.add(function(){if("block"===i.style("display")){var e=t.currentWidth,n=i.datum(),a=n.width,r=e/100*n.xPosInPercent,o=e-(r+a);o<0&&(r+=o),i.style("left","".concat(r,"px"))}})},hideTooltip:function(t){var e=this,i=e.api,n=e.config,a=e.tooltip;if("none"!==a.style("display")&&(!n.tooltip_doNotHide||t)){var r=JSON.parse(this.tooltip.datum().current);P(n.tooltip_onhide,e,i,r),a.style("display","none").style("visibility","hidden").datum(null),P(n.tooltip_onhidden,e,i,r)}},_handleLinkedCharts:function(t,e){var i=this;if(i.config.tooltip_linked){var n=i.config.tooltip_linked_name;(i.api.internal.charts||[]).forEach(function(a){if(a!==i.api){var r=a.internal.config,o=r.tooltip_linked,s=r.tooltip_linked_name,c=b.body.contains(a.element);if(o&&n===s&&c){var l=a.internal.tooltip.data()[0],u=e!==(l&&l.index);try{t&&u?a.tooltip.show({index:e}):!t&&a.tooltip.hide()}catch(t){}}}})}}}),W(lt.prototype,{initLegend:function(){var t=this,e=t.config;t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g"),e.legend_show?(t.legend.attr("transform",t.getTranslate("legend")),t.updateLegend()):(t.legend.style("visibility","hidden"),t.hiddenLegendIds=t.mapToIds(t.data.targets))},updateLegend:function(t,e,i){var n=this,a=n.config,r=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};r.withTransition=F(r,"withTransition",!0),r.withTransitionForTransform=F(r,"withTransitionForTransform",!0),a.legend_contents_bindto&&a.legend_contents_template?n.updateLegendTemplate():n.updateLegendElement(t||n.mapToIds(n.data.targets),r,i),n.legend.selectAll(".".concat(p.legendItem)).classed(p.legendItemHidden,function(t){return!n.isTargetToShow(t)}),n.updateScales(!1,!n.zoomScale),n.updateSvgSize(),n.transformAll(r.withTransitionForTransform,i),n.legendHasRendered=!0},updateLegendTemplate:function(){var t=this,e=t.config,i=Object(d.select)(e.legend_contents_bindto),n=e.legend_contents_template;if(!i.empty()){var a=[],r="";t.mapToIds(t.data.targets).forEach(function(e){var i=A(n)?n.call(t,e,t.color(e),t.api.data(e)[0].values):nt(n,{COLOR:t.color(e),TITLE:e});i&&(a.push(e),r+=i)});var o=i.html(r).selectAll(function(){return this.childNodes}).data(a);t.setLegendItem(o),t.legend=i}},updateSizeForLegend:function(t){var e=this,i=e.config,n=t.width,a=t.height,r={top:e.isLegendTop?e.getCurrentPaddingTop()+i.legend_inset_y+5.5:e.currentHeight-a-e.getCurrentPaddingBottom()-i.legend_inset_y,left:e.isLegendLeft?e.getCurrentPaddingLeft()+i.legend_inset_x+.5:e.currentWidth-n-e.getCurrentPaddingRight()-i.legend_inset_x+.5};e.margin3={top:e.isLegendRight?0:e.isLegendInset?r.top:e.currentHeight-a,right:NaN,bottom:0,left:e.isLegendRight?e.currentWidth-n:e.isLegendInset?r.left:0}},transformLegend:function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},updateLegendStep:function(t){this.legendStep=t},updateLegendItemWidth:function(t){this.legendItemWidth=t},updateLegendItemHeight:function(t){this.legendItemHeight=t},updateLegendItemColor:function(t,e){this.legend.select(".".concat(p.legendItem,"-").concat(t," line")).style("stroke",e)},getLegendWidth:function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},getLegendHeight:function(){var t=this;return t.config.legend_show?t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1):0},opacityForLegend:function(t){return t.classed(p.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function(t){return t.classed(p.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var i=this,n=i.mapToTargetIds(t);i.legend.selectAll(".".concat(p.legendItem)).filter(function(t){return n.indexOf(t)>=0}).classed(p.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?i.opacityForLegend:i.opacityForUnfocusedLegend).call(i,Object(d.select)(this))})},revertLegend:function(){var t=this;t.legend.selectAll(".".concat(p.legendItem)).classed(p.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(Object(d.select)(this))})},showLegend:function(t){var e=this,i=e.config;i.legend_show||(i.legend_show=!0,e.legend.style("visibility","visible"),!e.legendHasRendered&&e.updateLegend()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(Object(d.select)(this))})},hideLegend:function(t){var e=this,i=e.config;i.legend_show&&M(t)&&(i.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},clearLegendItemTextBoxCache:function(){this.legendItemTextBox={}},setLegendItem:function(t){var e=this,i=e.config,n="touch"===e.inputType,a=e.hasType("gauge");t.attr("class",function(t){var i=Object(d.select)(this);return(!i.empty()&&i.attr("class")||"")+e.generateClass(p.legendItem,t)}).style("visibility",function(t){return e.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){P(i.legend_item_onclick,e,t)||(d.event.altKey?(e.api.hide(),e.api.show(t)):(e.api.toggle(t),!n&&e.isTargetToShow(t)?e.api.focus(t):e.api.revert())),n&&e.hideTooltip()}),n||t.on("mouseout",function(t){P(i.legend_item_onout,e,t)||(Object(d.select)(this).classed(p.legendItemFocused,!1),a&&e.undoMarkOverlapped(e,".".concat(p.gaugeValue)),e.api.revert())}).on("mouseover",function(t){P(i.legend_item_onover,e,t)||(Object(d.select)(this).classed(p.legendItemFocused,!0),a&&e.markOverlapped(t,e,".".concat(p.gaugeValue)),!e.transiting&&e.isTargetToShow(t)&&e.api.focus(t))})},updateLegendElement:function(t,e){var i,n,a,r=this,o=r.config,s=o.legend_item_tile_width+5,c=0,l=0,u=0,g={},h={},f={},x=[0],v={},m=0,_=r.isLegendRight||r.isLegendInset,y=t.filter(function(t){return!C(o.data_names[t])||null!==o.data_names[t]}),T=e.withTransition,A=function(t,e,i){var n,a=i===y.length-1,d=function(t,e){return r.legendItemTextBox[e]||(r.legendItemTextBox[e]=r.getTextRect(t,p.legendItem)),r.legendItemTextBox[e]}(t,e),b=d.width+s+(a&&!_?0:10)+o.legend_padding,T=d.height+4,A=_?T:b,w=_?r.getLegendHeight():r.getLegendWidth(),k=function(t,e){e||(n=(w-u-A)/2)<10&&(n=(w-A)/2,u=0,m++),v[t]=m,x[m]=r.isLegendInset?10:n,g[t]=u,u+=A};if(0===i&&(u=0,m=0,c=0,l=0),o.legend_show&&!r.isLegendToShow(e))return h[e]=0,f[e]=0,v[e]=0,void(g[e]=0);h[e]=b,f[e]=T,(!c||b>=c)&&(c=b),(!l||T>=l)&&(l=T);var S=_?l:c;o.legend_equally?(Object.keys(h).forEach(function(t){return h[t]=c}),Object.keys(f).forEach(function(t){return f[t]=l}),(n=(w-S*y.length)/2)<10?(u=0,m=0,y.forEach(function(t){return k(t)})):k(e,!0)):k(e)};r.isLegendInset&&(m=o.legend_inset_step?o.legend_inset_step:y.length,r.updateLegendStep(m)),r.isLegendRight?(i=function(t){return c*v[t]},n=function(t){return x[v[t]]+g[t]}):r.isLegendInset?(i=function(t){return c*v[t]+10},n=function(t){return x[v[t]]+g[t]}):(i=function(t){return x[v[t]]+g[t]},n=function(t){return l*v[t]});var w=function(t,e){return i(t,e)+4+o.legend_item_tile_width},k=function(t,e){return i(t,e)},S=function(t,e){return i(t,e)-2},L=function(t,e){return i(t,e)-2+o.legend_item_tile_width},O=function(t,e){return n(t,e)+9},D=function(t,e){return n(t,e)-5},R=function(t,e){return n(t,e)+4},X=r.legend.selectAll(".".concat(p.legendItem)).data(y).enter().append("g");r.setLegendItem(X),X.append("text").text(function(t){return C(o.data_names[t])?o.data_names[t]:t}).each(function(t,e){A(this,t,e)}).style("pointer-events","none").attr("x",_?w:-200).attr("y",_?-200:O),X.append("rect").attr("class",p.legendItemEvent).style("fill-opacity","0").attr("x",_?k:-200).attr("y",_?-200:D);var M=r.config.legend_usePoint;if(M){var E=[];X.append(function(t){var e=I(o.point_pattern)?o.point_pattern:[o.point_type];-1===E.indexOf(t)&&E.push(t);var i=e[E.indexOf(t)%e.length];return"rectangle"===i&&(i="rect"),b.createElementNS(d.namespaces.svg,r.hasValidPointType(i)?i:"use")}).attr("class",p.legendItemPoint).style("fill",function(t){return r.color(t)}).style("pointer-events","none").attr("href",function(t,e,i){return"use"===i[e].nodeName.toLowerCase()?"#".concat(r.datetimeId,"-point-").concat(t):void 0})}else X.append("line").attr("class",p.legendItemTile).style("stroke",r.color).style("pointer-events","none").attr("x1",_?S:-200).attr("y1",_?-200:R).attr("x2",_?L:-200).attr("y2",_?-200:R).attr("stroke-width",o.legend_item_tile_height);a=r.legend.select(".".concat(p.legendBackground," rect")),r.isLegendInset&&c>0&&0===a.size()&&(a=r.legend.insert("g",".".concat(p.legendItem)).attr("class",p.legendBackground).append("rect"));var z=r.legend.selectAll("text").data(y).text(function(t){return C(o.data_names[t])?o.data_names[t]:t}).each(function(t,e){A(this,t,e)});(T?z.transition():z).attr("x",w).attr("y",O);var F=r.legend.selectAll("rect.".concat(p.legendItemEvent)).data(y);if((T?F.transition():F).attr("width",function(t){return h[t]}).attr("height",function(t){return f[t]}).attr("x",k).attr("y",D),M){var P=r.legend.selectAll(".".concat(p.legendItemPoint)).data(y);(T?P.transition():P).each(function(){var t,e,i,n=this.nodeName.toLowerCase(),a=r.config.point_r,o="x",s="y",c=2,l=2.5;if("circle"===n){var u=.2*a;o="cx",s="cy",t=a+u,c=2*a,l=-u}else if("rect"===n){var g=2.5*a;e=g,i=g,l=3}Object(d.select)(this).attr(o,function(t){return S(t)+c}).attr(s,function(t){return R(t)-l}).attr("r",t).attr("width",e).attr("height",i)})}else{var B=r.legend.selectAll("line.".concat(p.legendItemTile)).data(y);(T?B.transition():B).style("stroke",r.levelColor?function(t){return r.levelColor(r.cache[t].values[0].value)}:r.color).attr("x1",S).attr("y1",R).attr("x2",L).attr("y2",R)}a&&(T?a.transition():a).attr("height",r.getLegendHeight()-12).attr("width",c*(m+1)+10),r.updateLegendItemWidth(c),r.updateLegendItemHeight(l),r.updateLegendStep(m)}});var yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left",e=arguments.length>1?arguments[1]:void 0,i=k(e);return t.indexOf("center")>-1?i?e/2:"middle":t.indexOf("right")>-1?i?e:"end":i?0:"start"};W(lt.prototype,{initTitle:function(){var t=this;if(t.config.title_text){t.title=t.svg.append("g");var e=t.title.append("text").style("text-anchor",yt(t.config.title_position)).attr("class",p.title);Y(e,t.config.title_text,[.3,1.5])}},redrawTitle:function(){var t=this;if(t.title){var e=t.yForTitle.call(t);/g/i.test(t.title.node().tagName)?t.title.attr("transform","translate(".concat(yt(t.config.title_position,t.currentWidth),", ").concat(e,")")):t.title.attr("x",t.xForTitle.call(t)).attr("y",e)}},xForTitle:function(){var t,e=this,i=e.config,n=i.title_position||"left",a=e.getTextRect(e.title,p.title).width;return/(right|center)/.test(n)?(t=e.currentWidth-a,n.indexOf("right")>=0?t=e.currentWidth-a-i.title_padding.right:n.indexOf("center")>=0&&(t=(e.currentWidth-a)/2)):t=i.title_padding.left||0,t},yForTitle:function(){return(this.config.title_padding.top||0)+this.getTextRect(this.title,p.title).height},getTitlePadding:function(){return this.yForTitle()+(this.config.title_padding.bottom||0)}}),W(lt.prototype,{initClip:function(){var t=this;t.clipId="".concat(t.datetimeId,"-clip"),t.clipIdForXAxis="".concat(t.clipId,"-xaxis"),t.clipIdForYAxis="".concat(t.clipId,"-yaxis"),t.clipIdForGrid="".concat(t.clipId,"-grid"),t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid)},getClipPath:function(t){var e=this.config;if(!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t))return null;var i=!!y.navigator&&y.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url(".concat(i?"":b.URL.split("#")[0],"#").concat(t,")")},appendClip:function(t,e){return t.append("clipPath").attr("id",e).append("rect")},getAxisClipX:function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},getAxisClipY:function(t){return t?-20:-this.margin.top},getXAxisClipX:function(){return this.getAxisClipX(!this.config.axis_rotated)},getXAxisClipY:function(){return this.getAxisClipY(!this.config.axis_rotated)},getYAxisClipX:function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},getYAxisClipY:function(){return this.getAxisClipY(this.config.axis_rotated)},getAxisClipWidth:function(t){var e=Math.max(30,this.margin.left),i=Math.max(30,this.margin.right);return t?this.width+2+e+i:this.margin.left+20},getAxisClipHeight:function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},getXAxisClipWidth:function(){return this.getAxisClipWidth(!this.config.axis_rotated)},getXAxisClipHeight:function(){return this.getAxisClipHeight(!this.config.axis_rotated)},getYAxisClipWidth:function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},getYAxisClipHeight:function(){return this.getAxisClipHeight(this.config.axis_rotated)},updateXAxisTickClip:function(){var t=this,e=t.getHorizontalAxisHeight("x");if(t.defs&&!t.clipXAxisTickTexts){var i="".concat(t.clipId,"-xaxisticktexts");t.clipXAxisTickTexts=t.appendClip(t.defs,i),t.clipPathForXAxisTickTexts=t.getClipPath(i),t.clipIdForXAxisTickTexts=i}!t.config.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&e!==t.xAxisHeight&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.xAxisHeight=e},setXAxisTickClipWidth:function(){var t=this,e=t.config,i=t.getAxisTickRotate("x");if(!e.axis_x_tick_multiline&&i){var n=Math.sin(Math.PI/180*Math.abs(i));t.xAxisTickClipPathMaxWidth=(t.getHorizontalAxisHeight("x")-20)/n}else t.xAxisTickClipPathMaxWidth=null},setXAxisTickTextClipPathWidth:function(){this.svg&&this.svg.select("#".concat(this.clipIdForXAxisTickTexts," rect")).attr("width",this.xAxisTickClipPathMaxWidth).attr("height",30)}}),W(lt.prototype,{initRegion:function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",p.regions)},updateRegion:function(t){var e=this,i=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select(".".concat(p.regions)).selectAll(".".concat(p.region)).data(i.regions),e.mainRegion.exit().transition().duration(t).style("opacity","0").remove(),e.mainRegion=e.mainRegion.enter().append("g").merge(e.mainRegion).attr("class",e.classRegion.bind(e)),e.mainRegion.append("rect").style("fill-opacity","0")},redrawRegion:function(t){var e=this,i=e.mainRegion.select("rect");return i=(t?i.transition():i).attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)),[(t?i.transition():i).style("fill-opacity",function(t){return T(t.opacity)?t.opacity:"0.1"}).on("end",function(){Object(d.select)(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(t,e){var i=this,n=i.config.axis_rotated,a="x"===t,r="start",o=0;return"y"===e.axis||"y2"===e.axis?(!a&&(r="end"),(a?n:!n)&&r in e&&(o=(0,i[e.axis])(e[r]))):(a?!n:n)&&r in e&&(o=(i.zoomScale||i.x)(i.isTimeSeries()?i.parseDate(e[r]):e[r])),o},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var i=this,n=i.config.axis_rotated,a="width"===t,r=i[a?"regionX":"regionY"](e),o="end",s=i[t];return"y"===e.axis||"y2"===e.axis?(!a&&(o="start"),(a?n:!n)&&o in e&&(s=(0,i[e.axis])(e[o]))):(a?!n:n)&&o in e&&(s=(i.zoomScale||i.x)(i.isTimeSeries()?i.parseDate(e[o]):e[o])),s<r?0:s-r},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}}),W(lt.prototype,{drag:function(t){var e=this,i=e.config,n=e.main;if(!e.hasArcType()&&i.data_selection_enabled&&(!i.zoom_enabled||e.zoom.altDomain)&&i.data_selection_multiple){var a=s(e.dragStart,2),r=a[0],o=a[1],c=s(t,2),l=c[0],u=c[1],g=Math.min(r,l),h=Math.max(r,l),f=i.data_selection_grouped?e.margin.top:Math.min(o,u),x=i.data_selection_grouped?e.height:Math.max(o,u);n.select(".".concat(p.dragarea)).attr("x",g).attr("y",f).attr("width",h-g).attr("height",x-f),n.selectAll(".".concat(p.shapes)).selectAll(".".concat(p.shape)).filter(function(t){return i.data_selection_isselectable(t)}).each(function(t,i){var n,a=Object(d.select)(this),r=a.classed(p.SELECTED),o=a.classed(p.INCLUDED),s=!1;if(a.classed(p.circle)){var c=1*a.attr("cx"),l=1*a.attr("cy");n=e.togglePoint,s=g<c&&c<h&&f<l&&l<x}else{if(!a.classed(p.bar))return;var u=function(t){var e=t.getBoundingClientRect(),i=e.width,n=e.height,a=j(t);return{x:a[0].x,y:Math.min(a[0].y,a[1].y),width:i,height:n}}(this),v=u.x,m=(l=u.y,u.width),_=u.height;n=e.togglePath,s=!(h<v||v+m<g||x<l||l+_<f)}s^o&&(a.classed(p.INCLUDED,!o),a.classed(p.SELECTED,!r),n.call(e,!r,a,t,i))})}},dragstart:function(t){var e=this,i=e.config;e.hasArcType()||!i.data_selection_enabled||(e.dragStart=t,e.main.select(".".concat(p.chart)).append("rect").attr("class",p.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function(){var t=this,e=t.config;t.hasArcType()||!e.data_selection_enabled||(t.main.select(".".concat(p.dragarea)).transition().duration(100).style("opacity","0").remove(),t.main.selectAll(".".concat(p.shape)).classed(p.INCLUDED,!1),t.setDragStatus(!1))},setDragStatus:function(t){this.dragging=t}});var bt=n(12);W(lt.prototype,{selectPoint:function(t,e,i){var n=this,a=n.config,r=a.axis_rotated,o=(r?n.circleY:n.circleX).bind(n),s=(r?n.circleX:n.circleY).bind(n),c=n.pointSelectR.bind(n);P(a.data_onselected,n.api,e,t.node()),n.main.select(".".concat(p.selectedCircles).concat(n.getTargetSelectorSuffix(e.id))).selectAll(".".concat(p.selectedCircle,"-").concat(i)).data([e]).enter().append("circle").attr("class",function(){return n.generateClass(p.selectedCircle,i)}).attr("cx",o).attr("cy",s).attr("stroke",n.color).attr("r",function(t){return 1.4*n.pointSelectR(t)}).transition().duration(100).attr("r",c)},unselectPoint:function(t,e,i){P(this.config.data_onunselected,this.api,e,t.node()),this.main.select(".".concat(p.selectedCircles).concat(this.getTargetSelectorSuffix(e.id))).selectAll(".".concat(p.selectedCircle,"-").concat(i)).transition().duration(100).attr("r",0).remove()},togglePoint:function(t,e,i,n){this["".concat(t?"":"un","selectPoint")](e,i,n)},selectPath:function(t,e){var i=this,n=i.config;P(n.data_onselected,i,e,t.node()),n.interaction_brighten&&t.transition().duration(100).style("fill",function(){return Object(bt.rgb)(i.color(e)).brighter(.75)})},unselectPath:function(t,e){var i=this,n=i.config;P(n.data_onunselected,i,e,t.node()),n.interaction_brighten&&t.transition().duration(100).style("fill",function(){return i.color(e)})},togglePath:function(t,e,i,n){this["".concat(t?"":"un","selectPath")](e,i,n)},getToggle:function(t,e){return"path"===t.nodeName?this.togglePath:this.isStepType(e)?function(){}:this.togglePoint},toggleShape:function(t,e,i){var n,a=this,r=a.config,o=Object(d.select)(t),s=o.classed(p.SELECTED),c=a.getToggle(t,e).bind(a);if(r.data_selection_enabled&&r.data_selection_isselectable(e)){if(!r.data_selection_multiple){var l=".".concat(p.shapes);r.data_selection_grouped&&(l+=a.getTargetSelectorSuffix(e.id)),a.main.selectAll(l).selectAll(".".concat(p.shape)).each(function(t,e){var i=Object(d.select)(this);i.classed(p.SELECTED)&&(n=i,c(!1,i.classed(p.SELECTED,!1),t,e))})}n&&n.node()===o.node()||(o.classed(p.SELECTED,!s),c(!s,o,e,i))}}}),W(lt.prototype,{initBrush:function(){var t=this,e=t.config,i=e.axis_rotated;t.brush=i?Object(_.brushY)():Object(_.brushX)();var n,a,r=function(){t.redrawForBrush()};t.brush.on("start",function(){"touch"===t.inputType&&t.hideTooltip(),r()}).on("brush",r).on("end",function(){n=t.x.orgDomain()}),t.brush.updateResize=function(){var e=this;a&&clearTimeout(a),a=setTimeout(function(){var i=e.getSelection();n&&Object(_.brushSelection)(i.node())&&e.move(i,n.map(t.subX.orgScale()))},0)},t.brush.update=function(){return 0===this.extent()()[1].filter(function(t){return isNaN(t)}).length&&t.context&&t.context.select(".".concat(p.brush)).call(this),this},t.brush.scale=function(n){var a,r,o=e.subchart_size_height||(a=t.svg.select(".".concat(p.brush," .overlay")),r={width:0,height:0},a.size()&&(r.width=+a.attr("width"),r.height=+a.attr("height")),r[i?"width":"height"]),s=t.getExtent();!s&&n.range?s=[[0,0],[n.range()[1],o]]:E(s)&&(s=s.map(function(t,e){return[t,e>0?o:e]})),i&&s[1].reverse(),this.extent(s),this.update()},t.brush.getSelection=function(){return t.context?t.context.select(".".concat(p.brush)):Object(d.select)([])}},initSubchart:function(){var t=this,e=t.config,i=e.subchart_show?"visible":"hidden",n="".concat(t.clipId,"-subchart"),a=t.getClipPath(n);t.clipIdForSubchart=n,t.appendClip(t.defs,n),t.initBrush(),t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));var r=t.context;r.style("visibility",i),r.append("g").attr("clip-path",a).attr("class",p.chart),t.hasType("bar")&&r.select(".".concat(p.chart)).append("g").attr("class",p.chartBars),r.select(".".concat(p.chart)).append("g").attr("class",p.chartLines),r.append("g").attr("clip-path",a).attr("class",p.brush).call(t.brush),t.axes.subx=r.append("g").attr("class",p.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?i:"hidden")},updateTargetsForSubchart:function(t){var e=this,i=e.context,n=e.config,a=e.classChartBar.bind(e),r=e.classBars.bind(e),o=e.classChartLine.bind(e),s=e.classLines.bind(e),c=e.classAreas.bind(e);if(n.subchart_show){var l=i.select(".".concat(p.chartBars)).selectAll(".".concat(p.chartBar)).data(t).attr("class",a);l.enter().append("g").style("opacity","0").attr("class",a).merge(l).append("g").attr("class",r);var u=i.select(".".concat(p.chartLines)).selectAll(".".concat(p.chartLine)).data(t).attr("class",o),d=u.enter().append("g").style("opacity","0").attr("class",o).merge(u);d.append("g").attr("class",s),e.hasType("area")&&d.append("g").attr("class",c),i.selectAll(".".concat(p.brush," rect")).attr(n.axis_rotated?"width":"height",n.axis_rotated?e.width2:e.height2)}},updateBarForSubchart:function(t){var e=this;e.contextBar=e.context.selectAll(".".concat(p.bars)).selectAll(".".concat(p.bar)).data(e.barData.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity","0").remove(),e.contextBar=e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color).merge(e.contextBar).style("opacity",e.initialOpacity.bind(e))},redrawBarForSubchart:function(t,e,i){(e?this.contextBar.transition(G()).duration(i):this.contextBar).attr("d",t).style("opacity","1")},updateLineForSubchart:function(t){var e=this;e.contextLine=e.context.selectAll(".".concat(p.lines)).selectAll(".".concat(p.line)).data(e.lineData.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity","0").remove(),e.contextLine=e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color).merge(e.contextLine).style("opacity",e.initialOpacity.bind(e))},redrawLineForSubchart:function(t,e,i){(e?this.contextLine.transition(G()).duration(i):this.contextLine).attr("d",t).style("opacity","1")},updateAreaForSubchart:function(t){var e=this;e.contextArea=e.context.selectAll(".".concat(p.areas)).selectAll(".".concat(p.area)).data(e.lineData.bind(e)),e.contextArea.exit().transition().duration(t).style("opacity","0").remove(),e.contextArea=e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=Object(d.select)(this).style("opacity"),"0"}).merge(e.contextArea).style("opacity","0")},redrawAreaForSubchart:function(t,e,i){(e?this.contextArea.transition(G()).duration(i):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},redrawSubchart:function(t,e,i){var n=this,a=n.config;n.context.style("visibility",a.subchart_show?"visible":"hidden"),a.subchart_show&&(d.event&&"zoom"===d.event.type&&n.brush.update(),t&&(!H(n)&&n.brush.update(),Object.keys(i.type).forEach(function(t){var a=U(t),r=n["generateDraw".concat(a)](i.indices[t],!0);n["update".concat(a,"ForSubchart")](e),n["redraw".concat(a,"ForSubchart")](r,e,e)})))},redrawForBrush:function(){var t=this;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,t.x.orgDomain())},transformContext:function(t,e){var i;e&&e.axisSubX?i=e.axisSubX:(i=this.context.select(".".concat(p.axisX)),t&&(i=i.transition())),this.context.attr("transform",this.getTranslate("context")),i.attr("transform",this.getTranslate("subx"))},getExtent:function(){var t=this,e=t.config.axis_x_extent;return e&&(A(e)?e=e(t.getXDomain(t.data.targets),t.subX):t.isTimeSeries()&&e.every(isNaN)&&(e=e.map(function(e){return t.subX(t.parseDate(e))}))),e}});var Tt=n(13);W(lt.prototype,{initZoom:function(){this.zoomScale=null,this.generateZoom(),this.initZoomBehaviour()},bindZoomEvent:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this,i=e.config.zoom_enabled;e.redrawEventRect();var n=e.main.select(".".concat(p.eventRects));i&&t?!e.config.subchart_show&&e.bindZoomOnEventRect(n,i.type):!1===t&&(e.api.unzoom(),n.on(".zoom",null).on(".drag",null))},generateZoom:function(){var t=this,e=t.config,i=Object(Tt.zoom)().duration(0).on("start",t.onZoomStart.bind(t)).on("zoom",t.onZoom.bind(t)).on("end",t.onZoomEnd.bind(t));i.orgScaleExtent=function(){var i=e.zoom_extent||[1,10];return[i[0],Math.max(t.getMaxDataCount()/i[1],i[1])]},i.updateScaleExtent=function(){var e=R(t.x.orgDomain())/R(t.getZoomDomain()),i=this.orgScaleExtent();return this.scaleExtent([i[0]*e,i[1]*e]),this},i.updateTransformScale=function(i){t.orgXScale&&t.orgXScale.range(t.x.range());var n=i[e.axis_rotated?"rescaleY":"rescaleX"](t.orgXScale||t.x),a=t.trimXDomain(n.domain()),r=e.zoom_rescale;n.domain(a,t.orgXDomain),t.zoomScale=t.getCustomizedScale(n),t.xAxis.scale(t.zoomScale),r&&(!t.orgXScale&&(t.orgXScale=t.x.copy()),t.x.domain(a))},t.zoom=i},onZoomStart:function(){var t=d.event.sourceEvent;t&&(this.zoom.startEvent=t,P(this.config.zoom_onzoomstart,this.api,t))},onZoom:function(){var t=this,e=t.config,i=d.event,n=i.sourceEvent;if(e.zoom_enabled&&i.sourceEvent&&0!==t.filterTargetsToShow(t.data.targets).length&&(t.zoomScale||!(n.type.indexOf("touch")>-1)||1!==n.touches.length)){var a="mousemove"===n.type,r=n.wheelDelta<0,o=i.transform;!a&&r&&t.x.domain().every(function(e,i){return e!==t.orgXDomain[i]})&&t.x.domain(t.orgXDomain),t.zoom.updateTransformScale(o),t.isCategorized()&&t.x.orgDomain()[0]===t.orgXDomain[0]&&t.x.domain([t.orgXDomain[0]-1e-10,t.x.orgDomain()[1]]),t.redraw({withTransition:!1,withY:e.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),t.cancelClick=a,P(e.zoom_onzoom,t.api,t.zoomScale.domain())}},onZoomEnd:function(){var t=this,e=t.zoom.startEvent,i=d.event&&d.event.sourceEvent;e&&e.type.indexOf("touch")>-1&&(e=e.changedTouches[0],i=i.changedTouches[0]),!e||i&&e.clientX===i.clientX&&e.clientY===i.clientY||(t.redrawEventRect(),t.updateZoom(),P(t.config.zoom_onzoomend,t.api,t[t.zoomScale?"zoomScale":"subX"].domain()))},getZoomDomain:function(){var t=this.config,e=s(this.orgXDomain,2),i=e[0],n=e[1];return C(t.zoom_x_min)&&(i=tt("min",[i,t.zoom_x_min])),C(t.zoom_x_max)&&(n=tt("max",[n,t.zoom_x_max])),[i,n]},updateZoom:function(t){var e=this;if(e.zoomScale){var i=e.zoomScale.domain(),n=e.subX.domain(),a=(i[0]<=n[0]||i[0]-.015<=n[0])&&(n[1]<=i[1]||n[1]<=i[1]-.015);(t||a)&&(e.xAxis.scale(e.subX),e.x.domain(e.subX.orgDomain()),e.zoomScale=null)}},bindZoomOnEventRect:function(t,e){var i="drag"===e?this.zoomBehaviour:this.zoom;t.call(i).on("dblclick.zoom",null)},initZoomBehaviour:function(){var t=this,e=t.config.axis_rotated,i=0,n=0,a=null,r={axis:e?"y":"x",attr:e?"height":"width",index:e?1:0};t.zoomBehaviour=Object(ht.drag)().clickDistance(4).on("start",function(){t.setDragStatus(!0),a||(a=t.main.append("rect").attr("clip-path",t.clipPath).attr("class",p.zoomBrush).attr("width",e?t.width:0).attr("height",e?0:t.height)),i=Object(d.mouse)(this)[r.index],n=i,a.attr(r.axis,i).attr(r.attr,0),t.onZoomStart()}).on("drag",function(){n=Object(d.mouse)(this)[r.index],a.attr(r.axis,Math.min(i,n)).attr(r.attr,Math.abs(n-i))}).on("end",function(){var e,o=t.zoomScale||t.x;if(t.setDragStatus(!1),a.attr(r.axis,0).attr(r.attr,0),i>n&&(i=(e=[n,i])[0],n=e[1]),i<0&&(n+=Math.abs(i),i=0),i!==n)t.api.zoom([i,n].map(function(t){return o.invert(t)})),t.onZoomEnd();else if(t.isMultipleX())t.clickHandlerForMultipleXS.bind(this)(t);else{var c=d.event.sourceEvent||d.event,l=s("clientX"in c?[c.clientX,c.clientY]:[c.x,c.y],2),u=l[0],g=l[1],h=b.elementFromPoint(u,g);t.clickHandlerForSingleX.bind(h)(Object(d.select)(h).datum(),t)}})},setZoomResetButton:function(){var t=this,e=t.config,i=e.zoom_resetButton;i&&"drag"===e.zoom_enabled.type&&(t.zoom.resetBtn?t.zoom.resetBtn.style("display",null):t.zoom.resetBtn=t.selectChart.append("div").classed(p.button,!0).append("span").on("click",function(){A(i.onclick)&&i.onclick(this),t.api.unzoom.call(t)}).classed(p.buttonZoomReset,!0).text(i.text||"Reset Zoom"))}});var At=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];W(lt.prototype,{getColorFromCss:function(){var t=b.body,e=t.__colorPattern__;if(!e){var i=b.createElement("span");i.className=p.colorPattern,i.style.display="none",t.appendChild(i);var n=y.getComputedStyle(i).backgroundImage;i.parentNode.removeChild(i),n.indexOf(";")>-1&&(e=n.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return t.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),t.__colorPattern__=e)}return e},generateColor:function(){var t=this,e=t.config,i=e.data_colors,n=e.data_color,a=[],r=I(e.color_pattern)?e.color_pattern:Object(f.scaleOrdinal)(t.getColorFromCss()||At).range(),o=r;if(A(e.color_tiles)){var s=e.color_tiles(),c=r.map(function(e,i){var n=e.replace(/[#\(\)\s,]/g,""),a="".concat(t.datetimeId,"-pattern-").concat(n,"-").concat(i);return function(t,e,i){var n=Object(d.select)(t.cloneNode(!0));return n.attr("id",i).insert("rect",":first-child").attr("width",n.attr("width")).attr("height",n.attr("height")).style("fill",e),{id:i,node:n.node()}}(s[i%s.length],e,a)});r=c.map(function(t){return"url(#".concat(t.id,")")}),t.patterns=c}return function(e){var s,c=e.id||e.data&&e.data.id||e,l=t.isTypeOf(c,["line","spline","step"])||!t.config.data_types[c];return A(i[c])?s=i[c](e):i[c]?s=i[c]:(a.indexOf(c)<0&&a.push(c),s=l?o[a.indexOf(c)%o.length]:r[a.indexOf(c)%r.length],i[c]=s),A(n)?n(s,e):s}},generateLevelColor:function(){var t=this.config,e=t.color_pattern,i=t.color_threshold,n="value"===i.unit,a=i.max||100,r=i.values&&i.values.length?i.values:[];return I(i)?function(t){for(var i=n?t:100*t/a,o=e[e.length-1],s=0,c=r.length;s<c;s++)if(i<=r[s]){o=e[s];break}return o}:null},setOverColor:function(t,e){var i=this,n=i.config.color_onover,a=t?n:i.color;z(a)?a=function(t){var e=t.id;return e in n?n[e]:i.color(e)}:w(a)&&(a=function(){return n}),z(e)?i.main.selectAll(".".concat(p.arc).concat(i.getTargetSelectorSuffix(e.id))).style("fill",a(e)):i.main.selectAll(".".concat(p.shape,"-").concat(e)).style("fill",a)}});var wt=function(t,e,i){var n=t.config,a="axis_".concat(e,"_tick_format");return(n[a]?n[a]:t.defaultValueFormat)(i)};W(lt.prototype,{getYFormat:function(t){var e=this,i=e.yFormat,n=e.y2Format;return t&&!e.hasType("gauge")&&(i=e.defaultArcValueFormat,n=e.defaultArcValueFormat),function(t,a,r){return("y2"===e.axis.getId(r)?n:i).call(e,t,a)}},yFormat:function(t){return wt(this,"y",t)},y2Format:function(t){return wt(this,"y2",t)},defaultValueFormat:function(t){return T(t)?+t:""},defaultArcValueFormat:function(t,e){return"".concat((100*e).toFixed(1),"%")},dataLabelFormat:function(t){var e=this.config.data_labels,i=function(t){return T(t)?+t:""},n=i;return A(e.format)?n=e.format:X(e.format)&&(n=e.format[t]?!0===e.format[t]?i:e.format[t]:function(){return""}),n}}),W(lt.prototype,{addCache:function(t,e){var i=!!(arguments.length>2&&void 0!==arguments[2])&&arguments[2];this.cache[t]=i?this.cloneTarget(e):e},removeCache:function(t){var e=this;Z(t).forEach(function(t){return delete e.cache[t]})},getCache:function(t){if(!!(arguments.length>1&&void 0!==arguments[1])&&arguments[1]){for(var e,i=[],n=0;e=t[n];n++)e in this.cache&&i.push(this.cloneTarget(this.cache[e]));return i}return this.cache[t]||null},resetCache:function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)}}),W(lt.prototype,{generateClass:function(t,e){return" ".concat(t," ").concat(t+this.getTargetSelectorSuffix(e))},classText:function(t){return this.generateClass(p.text,t.index)},classTexts:function(t){return this.generateClass(p.texts,t.id)},classShape:function(t){return this.generateClass(p.shape,t.index)},classShapes:function(t){return this.generateClass(p.shapes,t.id)},generateExtraLineClass:function(){var t=this.config.line_classes||[],e=[];return function(i){var n=i.id||i.data&&i.data.id||i;return e.indexOf(n)<0&&e.push(n),t[e.indexOf(n)%t.length]}},classLine:function(t){return this.classShape(t)+this.generateClass(p.line,t.id)},classLines:function(t){return this.classShapes(t)+this.generateClass(p.lines,t.id)},classCircle:function(t){return this.classShape(t)+this.generateClass(p.circle,t.index)},classCircles:function(t){return this.classShapes(t)+this.generateClass(p.circles,t.id)},classBar:function(t){return this.classShape(t)+this.generateClass(p.bar,t.index)},classBars:function(t){return this.classShapes(t)+this.generateClass(p.bars,t.id)},classArc:function(t){return this.classShape(t.data)+this.generateClass(p.arc,t.data.id)},classArcs:function(t){return this.classShapes(t.data)+this.generateClass(p.arcs,t.data.id)},classArea:function(t){return this.classShape(t)+this.generateClass(p.area,t.id)},classAreas:function(t){return this.classShapes(t)+this.generateClass(p.areas,t.id)},classRegion:function(t,e){return"".concat(this.generateClass(p.region,e)," ").concat("class"in t?t.class:"")},classEvent:function(t){return this.generateClass(p.eventRect,t.index)},classTarget:function(t){var e=this.config.data_classes[t],i="";return e&&(i=" ".concat(p.target,"-").concat(e)),this.generateClass(p.target,t)+i},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" ".concat(this.focusedTargetIds.indexOf(t.id)>=0?p.focused:"")},classDefocused:function(t){return" ".concat(this.defocusedTargetIds.indexOf(t.id)>=0?p.defocused:"")},classChartText:function(t){return p.chartText+this.classTarget(t.id)},classChartLine:function(t){return p.chartLine+this.classTarget(t.id)},classChartBar:function(t){return p.chartBar+this.classTarget(t.id)},classChartArc:function(t){return p.chartArc+this.classTarget(t.data.id)},classChartRadar:function(t){return p.chartRadar+this.classTarget(t.id)},getTargetSelectorSuffix:function(t){return t||0===t?"-".concat(t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function(t,e){return"".concat(e||"",".").concat(p.target+this.getTargetSelectorSuffix(t))},selectorTargets:function(t,e){var i=this,n=t||[];return n.length?n.map(function(t){return i.selectorTarget(t,e)}):null},selectorLegend:function(t){return".".concat(p.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null}}),W(ut.prototype,{focus:function(t){var e=this.internal,i=e.mapToTargetIds(t),n=e.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),n.classed(p.focused,!0).classed(p.defocused,!1),e.hasArcType()&&(e.expandArc(i),e.hasType("gauge")&&e.markOverlapped(t,e,".".concat(p.gaugeValue))),e.toggleFocusLegend(i,!0),e.focusedTargetIds=i,e.defocusedTargetIds=e.defocusedTargetIds.filter(function(t){return i.indexOf(t)<0})},defocus:function(t){var e=this.internal,i=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e))).classed(p.focused,!1).classed(p.defocused,!0),e.hasArcType()&&(e.unexpandArc(i),e.hasType("gauge")&&e.undoMarkOverlapped(e,".".concat(p.gaugeValue))),e.toggleFocusLegend(i,!1),e.focusedTargetIds=e.focusedTargetIds.filter(function(t){return i.indexOf(t)<0}),e.defocusedTargetIds=i},revert:function(t){var e=this.internal,i=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(i)).classed(p.focused,!1).classed(p.defocused,!1),e.hasArcType()&&e.unexpandArc(i),e.config.legend_show&&(e.showLegend(i.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(i)).filter(function(){return Object(d.select)(this).classed(p.legendItemFocused)}).classed(p.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]}}),W(ut.prototype,{_showHide:function(t,e,i){var n=this.internal,a=n.mapToTargetIds(e);n["".concat(t?"remove":"add","HiddenTargetIds")](a);var r=n.svg.selectAll(n.selectorTargets(a)),o=t?"1":"0";r.transition().style("opacity",o,"important").call(n.endall,function(){r.style("opacity",null).style("opacity",o)}),i.withLegend&&n["".concat(t?"show":"hide","Legend")](a),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},show:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showHide(!0,t,e)},hide:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showHide(!1,t,e)},toggle:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.internal,a={show:[],hide:[]};n.mapToTargetIds(t).forEach(function(t){return a[n.isTargetToShow(t)?"hide":"show"].push(t)}),a.show.length&&this.show(a.show,i),a.hide.length&&setTimeout(function(){return e.hide(a.hide,i)},0)}});var kt=function(t){var e,i=this.internal,n=t;if(i.config.zoom_enabled&&n&&function(t,e){var i=s(e,2),n=i[0],a=i[1];return t.every(function(t,e){return 0===e?t>=n:t<=a})}(n,i.getZoomDomain())){if(i.isTimeSeries()&&(n=n.map(function(t){return i.parseDate(t)})),i.config.subchart_show){var a=i.zoomScale||i.x;i.brush.getSelection().call(i.brush.move,[a(n[0]),a(n[1])]),e=n}else i.x.domain(n),i.zoomScale=i.x,i.xAxis.scale(i.zoomScale),e=i.zoomScale.orgDomain();i.redraw({withTransition:!0,withY:i.config.zoom_rescale,withDimension:!1}),i.setZoomResetButton(),P(i.config.zoom_onzoom,i.api,e)}else e=i.zoomScale?i.zoomScale.domain():i.x.orgDomain();return e};W(kt,{enable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wheel",e=this.internal,i=e.config,n=t;t&&(n=w(t)&&/^(drag|wheel)$/.test(t)?{type:t}:t),i.zoom_enabled=n,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,i=e.config;return(0===t||t)&&(i.zoom_x_max=tt("max",[e.orgXDomain[1],t])),i.zoom_x_max},min:function(t){var e=this.internal,i=e.config;return(0===t||t)&&(i.zoom_x_min=tt("min",[e.orgXDomain[0],t])),i.zoom_x_min},range:function(t){var e=this.zoom;if(z(t)){var i=t.min,n=t.max;C(i)&&e.min(i),C(n)&&e.max(n)}return{min:e.min(),max:e.max()}}}),W(ut.prototype,{zoom:kt,unzoom:function(){var t=this.internal,e=t.config;if(t.zoomScale){e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(Tt.zoomIdentity),t.updateZoom(!0),t.zoom.resetBtn&&t.zoom.resetBtn.style("display","none");var i=t.main.select(".".concat(p.eventRects));Object(Tt.zoomTransform)(i.node())!==Tt.zoomIdentity&&t.zoom.transform(i,Tt.zoomIdentity),t.redraw({withTransition:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withY:e.zoom_rescale})}}}),W(ut.prototype,{load:function(t){var e=this.internal,i=e.config;t.xs&&e.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(e){i.data_classes[e]=t.classes[e]}),"categories"in t&&e.isCategorized()&&(i.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(e){i.data_axes[e]=t.axes[e]}),"colors"in t&&Object.keys(t.colors).forEach(function(e){i.data_colors[e]=t.colors[e]}),"unload"in t&&!1!==t.unload?e.unload(e.mapToTargetIds(!0===t.unload?null:t.unload),function(){return e.loadFromArgs(t)}):e.loadFromArgs(t)},unload:function(t){var e=this.internal,i=t||{};E(i)?i={ids:i}:w(i)&&(i={ids:[i]});var n=e.mapToTargetIds(i.ids);e.unload(n,function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.removeCache(n),i.done&&i.done()})}});var St=n(14);W(ut.prototype,{flow:function(t){var e,i,n,a,r=this.internal,o=0,s=0;if((t.json||t.rows||t.columns)&&(e=r.convertData(t)),e&&r.isTabVisible()){var c=[],l=r.getMaxDataCount(),u=r.convertDataToTargets(e,!0);r.data.targets.forEach(function(t){for(var e=!1,i=0;i<u.length;i++)if(t.id===u[i].id){e=!0,t.values[t.values.length-1]&&(s=t.values[t.values.length-1].index+1),o=u[i].values.length;for(var n=0;n<o;n++)u[i].values[n].index=s+n,r.isTimeSeries()||(u[i].values[n].x=s+n);t.values=t.values.concat(u[i].values),u.splice(i,1);break}e||c.push(t.id)}),r.data.targets.forEach(function(t){for(var e=0;e<c.length;e++)if(t.id===c[e]){s=t.values[t.values.length-1].index+1;for(var i=0;i<o;i++)t.values.push({id:t.id,index:s+i,x:r.isTimeSeries()?r.getOtherTargetX(s+i):s+i,value:null})}}),r.data.targets.length&&u.forEach(function(t){for(var e=[],i=r.data.targets[0].values[0].index;i<s;i++)e.push({id:t.id,index:i,x:r.isTimeSeries()?r.getOtherTargetX(i):i,value:null});t.values.forEach(function(t){t.index+=s,r.isTimeSeries()||(t.x+=s)}),t.values=e.concat(t.values)}),r.data.targets=r.data.targets.concat(u);var d=r.data.targets[0],g=d.values[0];C(t.to)?(o=0,a=r.isTimeSeries()?r.parseDate(t.to):t.to,d.values.forEach(function(t){t.x<a&&o++})):C(t.length)&&(o=t.length),l?1===l&&r.isTimeSeries()&&(n=(d.values[d.values.length-1].x-g.x)/2,i=[new Date(+g.x-n),new Date(+g.x+n)]):(n=r.isTimeSeries()?d.values.length>1?d.values[d.values.length-1].x-g.x:g.x-r.getXDomain(r.data.targets)[0]:1,i=[g.x-n,g.x]),i&&r.updateXDomain(null,!0,!0,!1,i),r.updateTargets(r.data.targets),r.redraw({flow:{index:g.index,length:o,duration:T(t.duration)?t.duration:r.config.transition_duration,done:t.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}}),W(lt.prototype,{generateFlow:function(t){var e=this,i=e.config;return function(){var n,a,r=t.targets,o=t.flow,s=t.shape.type,c=s.bar,l=s.line,u=s.area,h=t.shape.pos,f=h.cx,x=h.cy,v=h.xForText,m=h.yForText,_=t.xv,y=t.duration,b=o.index,T=o.length,A=e.getValueOnIndex(e.data.targets[0].values,b),w=e.getValueOnIndex(e.data.targets[0].values,b+T),k=e.x.domain(),S=o.duration||y,C=o.done||function(){},L=e.generateWait(),O=e.xgrid||Object(d.selectAll)([]),D=e.xgridLines||Object(d.selectAll)([]),X=e.mainRegion||Object(d.selectAll)([]),M=e.mainText||Object(d.selectAll)([]),I=e.mainBar||Object(d.selectAll)([]),E=e.mainLine||Object(d.selectAll)([]),z=e.mainArea||Object(d.selectAll)([]),F=e.mainCircle||Object(d.selectAll)([]);e.flowing=!0,e.data.targets.forEach(function(t){t.values.splice(0,T)});var P=e.updateXDomain(r,!0,!0);e.updateXGrid&&e.updateXGrid(!0),o.orgDataCount?n=1===o.orgDataCount||(A&&A.x)===(w&&w.x)?e.x(k[0])-e.x(P[0]):e.isTimeSeries()?e.x(k[0])-e.x(P[0]):e.x(A.x)-e.x(w.x):1===e.data.targets[0].values.length?e.isTimeSeries()?(A=e.getValueOnIndex(e.data.targets[0].values,0),w=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),n=e.x(A.x)-e.x(w.x)):n=R(P)/2:n=e.x(k[0])-e.x(P[0]),a=R(k)/R(P);var B="translate(".concat(n,",0) scale(").concat(a,",1)");e.hideGridFocus();var Y=Object(g.transition)().ease(St.easeLinear).duration(S);L.add([e.axes.x.transition(Y).call(function(t){return e.xAxis.setTransition(Y).create(t)}),I.transition(Y).attr("transform",B),E.transition(Y).attr("transform",B),z.transition(Y).attr("transform",B),F.transition(Y).attr("transform",B),M.transition(Y).attr("transform",B),X.filter(e.isRegionOnX).transition(Y).attr("transform",B),O.transition(Y).attr("transform",B),D.transition(Y).attr("transform",B)]),Y.call(L,function(){var t=i.axis_rotated;if(T){for(var n={shapes:[],texts:[],eventRects:[]},a=0;a<T;a++)n.shapes.push(".".concat(p.shape,"-").concat(a)),n.texts.push(".".concat(p.text,"-").concat(a)),n.eventRects.push(".".concat(p.eventRect,"-").concat(a));["shapes","texts","eventRects"].forEach(function(t){e.svg.selectAll(".".concat(p[t])).selectAll(n[t]).remove()}),e.svg.select(".".concat(p.xgrid)).remove()}if(O.size()&&O.attr("transform",null).attr(e.xgridAttr),D.attr("transform",null),D.select("line").attr("x1",t?0:_).attr("x2",t?e.width:_),D.select("text").attr("x",t?e.width:0).attr("y",_),I.attr("transform",null).attr("d",c),E.attr("transform",null).attr("d",l),z.attr("transform",null).attr("d",u),F.attr("transform",null),e.isCirclePoint())F.attr("cx",f).attr("cy",x);else{F.attr("x",function(t){return f(t)-i.point_r}).attr("y",function(t){return x(t)-i.point_r}).attr("cx",f).attr("cy",x)}M.attr("transform",null).attr("x",v).attr("y",m).style("fill-opacity",e.opacityForText.bind(e)),X.attr("transform",null),X.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),i.interaction_enabled&&e.redrawEventRect(),C(),e.flowing=!1})}}}),W(ut.prototype,{selected:function(t){var e=this.internal,i=[];return e.main.selectAll(".".concat(p.shapes+e.getTargetSelectorSuffix(t))).selectAll(".".concat(p.shape)).filter(function(){return Object(d.select)(this).classed(p.SELECTED)}).each(function(t){return i.push(t)}),i},select:function(t,e,i){var n=this.internal,a=n.config;a.data_selection_enabled&&n.main.selectAll(".".concat(p.shapes)).selectAll(".".concat(p.shape)).each(function(r,o){var s=Object(d.select)(this),c=r.data?r.data.id:r.id,l=n.getToggle(this,r).bind(n),u=a.data_selection_grouped||!t||t.indexOf(c)>=0,g=!e||e.indexOf(o)>=0,h=s.classed(p.SELECTED);s.classed(p.line)||s.classed(p.area)||(u&&g?a.data_selection_isselectable(r)&&!h&&l(!0,s.classed(p.SELECTED,!0),r,o):C(i)&&i&&h&&l(!1,s.classed(p.SELECTED,!1),r,o))})},unselect:function(t,e){var i=this.internal,n=i.config;n.data_selection_enabled&&i.main.selectAll(".".concat(p.shapes)).selectAll(".".concat(p.shape)).each(function(a,r){var o=Object(d.select)(this),s=a.data?a.data.id:a.id,c=i.getToggle(this,a).bind(i),l=n.data_selection_grouped||!t||t.indexOf(s)>=0,u=!e||e.indexOf(r)>=0,g=o.classed(p.SELECTED);o.classed(p.line)||o.classed(p.area)||l&&u&&n.data_selection_isselectable(a)&&g&&c(!1,o.classed(p.SELECTED,!1),a,r)})}}),W(ut.prototype,{transform:function(t,e){var i=this.internal,n=["pie","donut"].indexOf(t)>=0?{withTransform:!0}:null;(function(t,e,i){var n=this,a=i||{withTransitionForAxis:!n.hasArcType()};a.withTransitionForTransform=!1,n.transiting=!1,n.setTargetType(t,e),n.updateTargets(n.data.targets),n.updateAndRedraw(a)}).bind(i)(e,t,n)}}),W(ut.prototype,{groups:function(t){var e=this.internal,i=e.config;return S(t)?i.data_groups:(i.data_groups=t,e.redraw(),i.data_groups)}});var Ct=function(t){var e=this.internal,i=e.config;return t?(i.grid_x_lines=t,e.redrawWithoutRescale(),i.grid_x_lines):i.grid_x_lines};W(Ct,{add:function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!0)}});var Lt=function(t){var e=this.internal,i=e.config;return t?(i.grid_y_lines=t,e.redrawWithoutRescale(),i.grid_y_lines):i.grid_y_lines};W(Lt,{add:function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!1)}}),W(ut.prototype,{xgrids:Ct,ygrids:Lt});var Ot=function(t){var e=this.internal,i=e.config;return t?(i.regions=t,e.redrawWithoutRescale(),t):i.regions};W(Ot,{add:function(t){var e=this.internal,i=e.config;return t?(i.regions=i.regions.concat(t),e.redrawWithoutRescale(),i.regions):i.regions},remove:function(t){var e=this.internal,i=e.config,n=t||{},a=F(n,"duration",i.transition_duration),r=F(n,"classes",[p.region]),o=e.main.select(".".concat(p.regions)).selectAll(r.map(function(t){return".".concat(t)}));return(a?o.transition().duration(a):o).style("opacity","0").remove(),o=i.regions,Object.keys(n).length?(o=o.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){r.indexOf(t)>=0&&(e=!0)}),!e)}),i.regions=o):i.regions=[],o}}),W(ut.prototype,{regions:Ot});var Dt=function(t){var e=this.internal.data.targets;if(!S(t)){var i=E(t)?t:[t];return e.filter(function(t){return i.some(function(e){return e===t.id})})}return e};W(Dt,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=null;if(t){var n=this.data(t);n&&E(n)&&(i=[],n.forEach(function(t){var n=t.values.map(function(t){return t.value});e?i=i.concat(n):i.push(n)}))}return i},names:function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}}),W(ut.prototype,{data:Dt}),W(ut.prototype,{category:function(t,e){var i=this.internal,n=i.config;return arguments.length>1&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},categories:function(t){var e=this.internal,i=e.config;return arguments.length?(i.axis_x_categories=t,e.redraw(),i.axis_x_categories):i.axis_x_categories}}),W(ut.prototype,{color:function(t){return this.internal.color(t)}}),W(ut.prototype,{x:function(t){var e=this.internal,i=e.isCustomX()&&e.isCategorized();return E(t)&&(i?e.api.categories(t):(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),i?e.api.categories():e.data.xs},xs:function(t){var e=this.internal;return z(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}});var Rt=function(t,e,i){var n=t.config,a="axis_x_".concat(e),r="axis_y_".concat(e),o="axis_y2_".concat(e);C(i)&&(X(i)?(T(i.x)&&(n[a]=i.x),T(i.y)&&(n[r]=i.y),T(i.y2)&&(n[o]=i.y2)):(n[r]=i,n[o]=i),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))},Xt=function(t,e){var i=t.config;return{x:i["axis_x_".concat(e)],y:i["axis_y_".concat(e)],y2:i["axis_y2_".concat(e)]}},Mt=W(function(){},{labels:function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach(function(i){e.axis.setLabelText(i,t[i])}),e.axis.updateLabels())},min:function(t){var e=this.internal;return arguments.length?Rt(e,"min",t):Xt(e,"min")},max:function(t){var e=this.internal;return arguments.length?Rt(e,"max",t):Xt(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};C(t.max)&&e.max(t.max),C(t.min)&&e.min(t.min)}});W(ut.prototype,{axis:Mt});var It=W(function(){},{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}});W(ut.prototype,{legend:It}),W(ut.prototype,{resize:function(t){var e=this.internal,i=e.config;e.rendered&&(i.size_width=t?t.width:null,i.size_height=t?t.height:null,this.flush(!1,!0),e.resizeFunction())},flush:function(t,e){var i=this.internal;i.rendered?(e?i.brush&&i.brush.updateResize():i.axis&&i.axis.setOrient(),i.zoomScale=null,t?i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):i.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})):i.initToRender(!0)},destroy:function(){var t=this,e=this.internal;return I(e)&&(e.callPluginHook("$willDestroy"),e.charts.splice(e.charts.indexOf(this),1),e.svg.select("*").interrupt(),e.generateResize.timeout&&y.clearTimeout(e.generateResize.timeout),y.removeEventListener("resize",e.resizeFunction),e.selectChart.classed("bb",!1).html(""),Object.keys(this).forEach(function(i){"internal"===i&&Object.keys(e).forEach(function(t){e[t]=null}),t[i]=null,delete t[i]})),null},config:function(t,e,i){var n,a=this.internal,r=t&&t.replace(/\./g,"_");return r in a.config&&(C(e)?(a.config[r]=e,n=e,i&&this.flush()):n=a.config[r]),n}});var Et=W(function(){},{show:function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.internal;if(i.mouse&&(e=i.mouse),i.data){var a=n.getYScale(i.data.id)(i.data.value);n.isMultipleX()?e=[n.x(i.data.x),a]:(!n.config.tooltip_grouped&&(e=[0,a]),t=T(i.data.index)?i.data.index:n.getIndexByX(i.data.x))}else C(i.x)?t=n.getIndexByX(i.x):C(i.index)&&(t=i.index);("mouse"===n.inputType?["mouseover","mousemove"]:["touchstart"]).forEach(function(i){n.dispatchEvent(i,t,e)})},hide:function(){var t=this.internal;"touch"===t.inputType&&t.callOverOutForTouch(),t.hideTooltip(!0),t.hideGridFocus(),t.unexpandCircles(),t.unexpandBars()}});W(ut.prototype,{tooltip:Et});var zt=function(t,e){var i,n,a=new XMLSerializer,r=t.cloneNode(!0),o=(i=Z(b.styleSheets),n=[],i.forEach(function(t){try{t.cssRules&&t.cssRules.length&&(n=n.concat(Z(t.cssRules)))}catch(e){console.error("Error while reading rules from ".concat(t.href,": ").concat(e.toString()))}}),n).filter(function(t){return t.cssText}).map(function(t){return t.cssText});r.setAttribute("xmlns",d.namespaces.xhtml);var s=a.serializeToString(r),c=b.createElement("style");c.appendChild(b.createTextNode(o.join("\n")));var l=a.serializeToString(c),u='<svg xmlns="'.concat(d.namespaces.svg,'" width="').concat(e.width,'" height="').concat(e.height,'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t').concat(l,"\n\t\t\t\t").concat(s.replace(/(url\()[^#]+/g,"$1"),"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,".concat(btoa(encodeURIComponent(u).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x".concat(e))})))};W(ut.prototype,{export:function(t,e){var i=this.internal,n={width:i.currentWidth,height:i.currentHeight},a=zt(this.element,n);if(A(e)){var r=new Image;r.crosssOrigin="Anonymous",r.onload=function(){var i=b.createElement("canvas"),a=i.getContext("2d");i.width=n.width,i.height=n.height,a.drawImage(r,0,0),e(i.toDataURL(t))},r.src=a}return a}});var Ft={},Pt={version:"1.12.11",generate:function(t){var e=K({},Ft,t),i=new ut(e);return i.internal.charts=this.instance,this.instance.push(i),i},defaults:function(t){return z(t)&&(Ft=t),Ft},instance:[],plugin:{},chart:{fn:ut.prototype,internal:{fn:lt.prototype,axis:{fn:ct.prototype}}}};i.default=Pt}])},t.exports=n(i("ibHE"),i("nUlG"),i("l8eG"),i("ntgT"),i("wbYc"),i("2xJj"),i("JD6l"),i("IVJf"),i("aBO9"),i("yw3p"),i("Lwbo"),i("NRFW"),i("rriQ"))}).call(this,i("pCvA"))}}]);